<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    
    <title>MiCloud API Implement 2</title>
    <meta name="description" content="MiCloud API Implement 2">
    <meta name="keywords" content="MiCloud API Implement 2">

    <link rel="stylesheet" href="/stylesheets/styles.css">
    <link rel="stylesheet" href="/stylesheets/pygment_trac.css">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <style>
    html, body {
      margin: 0;
      text-align: center;
    }
    </style>
  </head>
  <body>
  
  <div style="width:100%" align="center">
  <div style="width:960px;vertical-align:bottom" align="left">
    <span style="text-align:left">
    <a href="/index.html">
    <img src="/images/wiki-logo.png" height="50px"/>
    <img src="/images/micloud-logo.png" height="40px"/>
    </a>
    </span>
    <div align="left" style="width:100%;text-align:right">
    <a href="/index.html" >
      <img src="/images/back.png" height="20px"/>
      Back to Wiki
    </a>
    </div>
  </div>
  <hr style="width:960px"/>
  <div align="center" style="text-align:left; width:960px;">
    <h1>MiCloudAPI 實做案例</h1>
<h2>預防尖峰流量拖垮服務：Scale Out應用服務-使用CloudAPI排程</h2>
<ul>
<li>調整一臺虛擬主機的記憶體大小</li>
</ul>
<pre><code>simonsuteki-MacBook-Pro:~ simonsu$ sdc-resizemachine -p &quot;M 2GB RAM (1CORE)&quot;
9626a584-187c-40b0-aa84-7f6f3a22ec44</code></pre>
<ul>
<li>開啓一臺主機</li>
</ul>
<pre><code>simonsuteki-MacBook-Pro:~ simonsu$ sdc-createmachine -name simontest123 -package &quot;S
1GB RAM (1CORE)&quot; -dataset sdc:sdc:smartos64:1.5.1
{
   &quot;id&quot;: &quot;845f21fe-1910-4b38-a4ca-e2a81144f9a2&quot;,
   &quot;name&quot;: &quot;simontest123&quot;,
   &quot;type&quot;: &quot;smartmachine&quot;,
   &quot;state&quot;: &quot;provisioning&quot;,
   &quot;dataset&quot;: &quot;sdc:sdc:smartos64:1.5.1&quot;,
   &quot;ips&quot;: [
   &quot;211.78.245.41&quot;
   ],
   &quot;memory&quot;: 1024,
   &quot;disk&quot;: 15360,
   &quot;metadata&quot;: {},
   &quot;created&quot;: &quot;2012-01-18T02:13:31+00:00&quot;,
   &quot;updated&quot;: &quot;2012-01-18T02:13:31+00:00&quot;
}</code></pre>
<h2>流量恢復正常了～WEB刪除主機</h2>
<ul>
<li>WEB刪除虛擬主機<br><img src='/images/MiCloud+API+Implement+2-p11.PNG' width='650' align='center'/></li>
</ul>
<h2>流量恢復正常了～CloudAPI刪除主機</h2>
<ul>
<li>CloudAPI刪除虛擬主機</li>
</ul>
<pre><code>simonsuteki-MacBook-Pro:~ simonsu$ sdc-deletemachine 845f21fe-1910-4b38-a4cae2a81144f9a2
Requested transition is not acceptable due to current resource state
(主機刪除前，必需要停機，否則會不能刪除)
# Stop server first
simonsuteki-MacBook-Pro:~ simonsu$ sdc-stopmachine 845f21fe-1910-4b38-a4cae2a81144f9a2
# Confirm stop OK and delete...
simonsuteki-MacBook-Pro:~ simonsu$ sdc-deletemachine 845f21fe-1910-4b38-a4cae2a81144f9a2</code></pre>

  </div>
  </div>
  </body>
</html>