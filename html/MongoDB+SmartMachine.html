<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    
    <title>MongoDB SmartMachine</title>
    <meta name="description" content="MongoDB SmartMachine">
    <meta name="keywords" content="MongoDB SmartMachine">

    <link rel="stylesheet" href="/stylesheets/styles.css">
    <link rel="stylesheet" href="/stylesheets/pygment_trac.css">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <style>
    html, body {
      margin: 0;
      text-align: center;
    }
    </style>
  </head>
  <body>
  
  <div style="width:100%" align="center">
  <div style="width:960px;vertical-align:bottom" align="left">
    <span style="text-align:left">
    <a href="/index.html">
    <img src="/images/wiki-logo.png" height="50px"/>
    <img src="/images/micloud-logo.png" height="40px"/>
    </a>
    </span>
    <div align="left" style="width:100%;text-align:right">
    <a href="/index.html" >
      <img src="/images/back.png" height="20px"/>
      Back to Wiki
    </a>
    </div>
  </div>
  <hr style="width:960px"/>
  <div align="center" style="text-align:left; width:960px;">
    <h1>MongoDB</h1>
<h2>在SmartOS上安裝MongoDB</h2>
<p>MiCloud 在SmartOS 32bit 提供預載MongoDB的服務，可以直接選擇此預載的套件，若當初沒有選擇預載服務，用戶可以依下列步驟進行安裝。</p>
<p>1.本範例將在 /tmp路徑下安裝MongoDB，請先切換至tmp目錄下。</p>
<pre><code># cd /tmp</code></pre>
<p><img src='/images/MongoDB+SmartMachine-p1.png' width='650' align='center'/></p>
<p>2.利用crul指令下載，其指令如下:</p>
<pre><code># curl http://fastdl.mongodb.org/sunos5/mongodb-sunos5-x86_64-2.2.0.tgz &gt; mongodb.tgz</code></pre>
<p><img src='/images/MongoDB+SmartMachine-p2.png' width='650' align='center'/></p>
<p>3.解開壓縮檔，並切換至mongodb-sunos5-x86_64-2.2.0下的bin目錄中:</p>
<pre><code># tar -zxvf mongodb.tgz
# cd mongodb-sunos5-x86_64-2.2.0/bin</code></pre>
<p><img src='/images/MongoDB+SmartMachine-p3.png' width='650' align='center'/></p>
<p>4.建立資料庫的位置</p>
<pre><code># mkdir -p /data/db</code></pre>
<p><img src='/images/MongoDB+SmartMachine-p4.png' width='650' align='center'/></p>
<p>5.連結資料庫，其指令如下:</p>
<pre><code># nohup ./mongod &amp;</code></pre>
<p><img src='/images/MongoDB+SmartMachine-p5.png' width='650' align='center'/></p>
<p>6.執行mongo指令，即可進入環境操作</p>
<pre><code># ./mongo</code></pre>
<p><img src='/images/MongoDB+SmartMachine-p6.png' width='650' align='center'/></p>
<h2>MongoDB操作說明</h2>
<p>1.檢視服務狀態:</p>
<p>若State為online，代表服務已啟動；反之，則代表未啟動。</p>
<pre><code># svcs mongodb</code></pre>
<p><img src='/images/MongoDB+SmartMachine-p7.png' width='650' align='center'/></p>
<p>2.啟用服務:</p>
<p>利用svcadm enable mongodb指令來啟動服務，並以svcs指令來確認是否啟用成功。</p>
<pre><code># svcadm enable mongodb
# svcs mongodb</code></pre>
<p><img src='/images/MongoDB+SmartMachine-p8.png' width='650' align='center'/></p>
<p>3.停止服務:</p>
<p>利用svcadm disable mongodb指令來啟動服務，並以svcs指令來確認是否已停止服務。</p>
<pre><code># svcadm disable mongodb
# svcs mongodb</code></pre>
<p><img src='/images/MongoDB+SmartMachine-p9.png' width='650' align='center'/></p>
<p>4.連結至MongoDB：</p>
<p>在MiCloud平台中，自行安裝MongoDB及預載的連結方式有些許差異，自行安裝的連結方式，可參考前面介紹的指令；選擇預載的用戶，需要用admin來連結至MongoDB，其指令如下，另外，登入的密碼可以在主機細項的Credentials內查看。</p>
<pre><code># mongo -u admin -p admin</code></pre>
<p><img src='/images/MongoDB+SmartMachine-p10.png' width='650' align='center'/><br><img src='/images/MongoDB+SmartMachine-p11.png' width='650' align='center'/></p>

  </div>
  </div>
  </body>
</html>