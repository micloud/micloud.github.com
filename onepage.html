<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Micloud Wiki/Document</title>

    <link rel="stylesheet" href="/stylesheets/styles.css">
    <link rel="stylesheet" href="/stylesheets/pygment_trac.css">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <style>
    html, body {
      margin: 0;
      text-align: center;
    }
    </style>
  </head>
  <body>
  <div style="width:100%" align="center">
  <div align="center" style="text-align:left; width:960px;">
    <h1 style="vertical-align:middle"><img src="images/wiki-logo.png" width="128px"/><a href="http://doc.micloud.tw">MiCloud Wiki Document</a></h1><hr/><p  id="What+is+Smart+Machine.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="html/What+is+Smart+Machine.html">何謂Smart Machine?</a>&nbsp;<a href="index.html?page=What+is+Smart+Machine.md">(What+is+Smart+Machine.md)</a><a href="#What+is+Smart+Machine.md"></a></h1><br/><h1>SmartMachine說明</h1>
<p>SmartMachine係指美國Joyent所研發SDC(SmartDatacenter)上之虛擬主機。SDC提升虛擬層的各項技術，達到超越市面上一般虛擬機器的效能，因此於SDC上提供之各項服務均優於一般虛擬主機。SmartMachine為植基於Solaris Kernel所發展的作業系統，全盤建構於ZFS檔案系統上。</p>
<p>該作業系統無縫的與SDC做緊密的結合，可提供同平台的其他作業系統將近一倍以上的運算能力，省去跨系統溝通的耗損，能夠提供用戶動態調整資源、更符合用戶的需求，達到快速部署之應用能力。</p>
<p>您可透過MiCloud雲端管理系統 (<a href="http://micloud.tw">http://micloud.tw</a>) 監控並管理您的虛擬主機，以及連線操控所部屬的應用服務。MiCloud為持續精進的雲端管理平台，提供多項第三方預載套件，包含最常使用的資料庫MySQL與網頁工具Apache HTTPD、PHP，以及遠端管理界面webmin等。</p>
<hr>
<h2>更進階的說明，可以在Joyent Wiki搜尋到</h2>
<ul>
<li><a href="http://wiki.joyent.com/display/smart/Getting+Started+with+SmartMachines">Joyent wiki</a></li>
</ul>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="Micloud+Features.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="html/Micloud+Features.html">MiCloud的特點是什麼?</a>&nbsp;<a href="index.html?page=Micloud+Features.md">(Micloud+Features.md)</a><a href="#Micloud+Features.md"></a></h1><br/><h1>MiCloud的特點</h1>
<p>有別於台灣其他業者，不論是在服務或技術方面皆持續完善及創新，以符合整個市場需求，MiCloud是您服務的最佳選擇。MiCloud擁有以下的特點：</p>
<p>(1) 線上快速申請</p>
<p>透過 <a href="http://micloud.tw">http://micloud.tw</a> 即可立即申請專屬的虛擬主機。</p>
<p>(2) 彈性付費</p>
<p>針對不同的虛擬主機提供不同的計費方式，以分計費，讓您用多少、付多少。</p>
<p>詳細計費方式，請參考<a href="http://portal.micloud.tw/price/price">MiCloud產品價目表</a></p>
<p>(3) 提供免費主機</p>
<p>每個帳號皆可線上申請免費主機(256MB) 試用，直接至<a href="http://micloud.tw">MiCloud平台</a> ， 點選”免費試用”，免付用卡、免個人資料，1分鐘即可擁有個人免費主機。</p>
<p>(4) 多樣化作業系統</p>
<p>MiCloud提供三種不同的虛擬主機服務：SmartMachine、Ubuntu Linux、Windows R2 2008，分別可針對不同需求有不同的記憶體、CPU、硬碟規格。</p>
<p>(5) 高效能</p>
<p>MiCloud讓企業自訂服務條件，自動調整CPU、記憶體、網路等，透過作業系統內建虛擬化管理功能，直接控管硬體資源，讓效能最大化。</p>
<p>(6) 高安全性</p>
<ul>
<li>MiCloud引進Joyent公有雲架構，從SmartDataCenter的ZFS架構，使用Zone安全隔離每部虛擬機器的檔案空間，並加上網路上安全規劃的實體隔離，達到虛擬主機內部安全機制，並加上MiCloud特殊防火牆規劃，特別防護網路上多種攻擊。</li>
<li>使用SSH key連線方式，保護虛擬主機之擁有者，亦可隔離無金鑰之駭客。</li>
<li>嚴密及安全的機房管理<br>*機房門禁管理<br>*24小時機房監視錄影系統<br>*24小時網路監控<br>*防火牆之保護<br>*提供不斷電系統</li>
</ul>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="PuttyLoginErrorCannotAgreeAClientToServerCipher.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="html/PuttyLoginErrorCannotAgreeAClientToServerCipher.html">PUTTY連線錯誤訊息：Cannot Agree A Client To Server Cipher</a>&nbsp;<a href="index.html?page=PuttyLoginErrorCannotAgreeAClientToServerCipher.md">(PuttyLoginErrorCannotAgreeAClientToServerCipher.md)</a><a href="#PuttyLoginErrorCannotAgreeAClientToServerCipher.md"></a></h1><br/><h1>Putty登入SmartOS錯誤訊息：Couldn&#39;t agree a client-to-server cipher</h1>
<p>申請SmartOS之用戶，如遇到登入錯誤訊息如下：<br><img src='images/PuttyLoginErrorCannotAgreeAClientToServerCipher-CannotAgreeAClientToServerCipher.png' align='center'/></p>
<p>則可能原因有數種，您可檢查下面項目：</p>
<ul>
<li>確認SSH Key已經上傳，且本機之連線已經使用SSH私鑰加密。</li>
<li>針對SmartOS，您可重新產生SSH Key並重新上傳至Portal，應該就可以直些連線。</li>
<li>如上述均未能解決連線問題，您可確認Putty版本是否為最新，可至Putty官方網站下載新版本軟體，重新執行即可正常連線。</li>
<li>如均為您解決您的問題，可聯繫<a href="mailto:service@micloud.tw">MiCloud Service</a></li>
</ul>
<p>參考：</p>
<ul>
<li><a href="http://www.google.com.tw/url?sa=t&amp;rct=j&amp;q=putty&amp;source=web&amp;cd=1&amp;ved=0CDIQFjAA&amp;url=http%3A%2F%2Fwww.chiark.greenend.org.uk%2F~sgtatham%2Fputty%2Fdownload.html&amp;ei=YJbXTtDACITKmQXppsXtCw&amp;usg=AFQjCNEawi7s0aRUeJP3qKnncgvPiSqZYA&amp;sig2=-7FhRbxa0seZVhrrNQUBnw">Putty官方網站</a></li>
<li><a href="http://hub.opensolaris.org/bin/view/Community+Group+on/2009013001">http://hub.opensolaris.org/bin/view/Community+Group+on/2009013001</a></li>
</ul>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="SmartOS+Install+Oracle.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="html/SmartOS+Install+Oracle.html">SmartOS如何安裝Oracle</a>&nbsp;<a href="index.html?page=SmartOS+Install+Oracle.md">(SmartOS+Install+Oracle.md)</a><a href="#SmartOS+Install+Oracle.md"></a></h1><br/><h1>SmartOS install Oracle</h1>
<h2>準備</h2>
<p>開始安裝Oracle Universal前，的準備工作：</p>
<ul>
<li>建立資料庫專用帳戶、群組與目錄</li>
<li>修改主機Shared Memory設定</li>
<li>安裝X11相關套件</li>
</ul>
<p>設定步驟可參考下面指令：</p>
<pre><code>admin$ su
...
# groupadd -g 1000 dba
# groupadd -g 1001 oinstall
# groupadd -g 1002 oper
# mkdir -p /u01/app/oracle
# useradd -u 1000 -g oinstall -G dba,oper -s /bin/bash -d /u01/app/oracle oracle
# chown -R oracle:dba /u01
# mkdir -p /u02/oradata
# chown -R oracle:dba /u02
# passwd oracle
...
# projadd -U oracle -K &quot;project.max-shm-memory=(priv,2GB,deny)&quot; user.oracle
# exit
admin$ su oracle
...</code></pre>
<h2>遠端安裝Oracle</h2>
<p>在開始遠端安裝Oracle之前，您需要先安裝X11相關套件，於Mac OS, Linux上以支援X11服務，您可以開啓式窗界面，然後直接使用下面指令將X Window Forward回到您的桌面：</p>
<pre><code>$xhost +
access control disabled, clients can connect from any host
$ssh -X oracle@your.machine.ip</code></pre>
<p>完成X11套件設定與安裝後，您可以直接下載Oracle之套件進行解壓縮安裝，安裝步驟如下：</p>
<pre><code>$ ./runInstaller -ignoreSysPrereqs
Starting Oracle Universal Installer...

Checking installer requirements...

Checking operating system version: must be 5.10.    Actual 5.11
Failed &lt;&lt;&lt;&lt;


&gt;&gt;&gt; Ignoring required pre-requisite failures. Continuing...

Preparing to launch Oracle Universal Installer ...</code></pre>
<p>注意：OpenSolaris (5.11)版本非Oracle原廠建議之作業系統，因此安裝前需要加設作業系統檢查參數：-ignoreSysPrereqs</p>
<h2>其他資訊</h2>
<p>如果您需要更多有關於Oracle之安裝資訊，您可以參考Oracle installation manuals及 The Cuddletech SAs Guide to Oracle.</p>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="View+network+routing+instructions.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="html/View+network+routing+instructions.html">如何檢視網路路由?</a>&nbsp;<a href="index.html?page=View+network+routing+instructions.md">(View+network+routing+instructions.md)</a><a href="#View+network+routing+instructions.md"></a></h1><br/><h1>SmartOS檢視網路路由指令</h1>
<p>透過netstat指令檢視路由表：</p>
<pre><code># netstat -rn</code></pre>
<pre><code>Routing Table: IPv4
Destination           Gateway           Flags  Ref     Use     Interface
-------------------- -------------------- ----- ----- ---------- ---------
default              211.78.255.254       UG        3        193
127.0.0.1            127.0.0.1            UH        3          8 lo0
211.78.255.0         211.78.255.31        U         3          0 net0

Routing Table: IPv6
Destination/Mask            Gateway                   Flags Ref   Use    If
--------------------------- --------------------------- ----- --- ------- -----
::1                         ::1                         UH      2       0 lo0</code></pre>
<p>檢視到某個網站的路由：</p>
<p><code># traceroute google.com</code></p>
<pre><code>traceroute: Warning: google.com has multiple addresses; using 74.125.31.138
traceroute to google.com (74.125.31.138), 30 hops max, 40 byte packets
1  254.2.......54)  0.189 ms  0.194 ms  0.096 ms
2  211..........1 ms  0.453 ms  0.444 ms
....</code></pre>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="Used+commmands.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="html/Used+commmands.html">常用指令集有哪些?</a>&nbsp;<a href="index.html?page=Used+commmands.md">(Used+commmands.md)</a><a href="#Used+commmands.md"></a></h1><br/><h1>常用指令集</h1>
<p>各版本套件指令比較表<br>雖然目前許多市面常見的作業系統例如Ubuntu、Debian、CentOS、Fedora，甚至是目前Micloud所用的SmartOS都是以linux為底的架構。不過由於開發人員的不同在指令的操作上也會有稍稍的不同，在套件的指令集中，我們利用列表來比較各版本不同的指令:</p>
<table>
<thead>
<tr>
<th></th>
<th>Ubuntu、Debian</th>
<th>CentOS、Fedora</th>
<th>SmartOS</th>
</tr>
</thead>
<tbody>
<tr>
<td>查詢已安裝的套件</td>
<td>apt-cache pkgnames</td>
<td>yum list</td>
<td>pkgin list</td>
</tr>
<tr>
<td>查詢套件可安裝套件的名稱或關鍵字</td>
<td>apt-cache search &quot;套件名稱&quot;或apt-cache search &quot;關鍵字&quot;</td>
<td>yum search &quot;套件名稱&quot;或yum search &quot;關鍵字&quot;</td>
<td>pkgin search &quot;套件名稱&quot;或pkgin search &quot;關鍵字&quot;</td>
</tr>
<tr>
<td>安裝套件</td>
<td>apt-get install &quot;套件名稱&quot;</td>
<td>yum install &quot;套件名稱&quot;</td>
<td>pkgin install &quot;套件名稱&quot;</td>
</tr>
<tr>
<td>移除套件</td>
<td>apt-get remove &quot;套件名稱&quot;</td>
<td>yum remove &quot;套件名稱&quot;</td>
<td>pkgin remove &quot;套件名稱&quot;</td>
</tr>
<tr>
<td>升級所有己安裝的最新列表</td>
<td>apt-get update</td>
<td>yum update</td>
<td>pkgin update</td>
</tr>
<tr>
<td>下載檔案</td>
<td>wget &quot;網址&quot;</td>
<td>wget &quot;網址&quot;</td>
<td>wget &quot;網址&quot;</td>
</tr>
<tr>
<td>複製檔案</td>
<td>cp &quot;來源檔&quot;  &quot;目的檔&quot;</td>
<td>cp &quot;來源檔&quot;  &quot;目的檔&quot;</td>
<td>cp &quot;來源檔&quot;  &quot;目的檔&quot;</td>
</tr>
<tr>
<td>刪除檔案</td>
<td>rm &quot;檔案或目錄&quot;</td>
<td>rm &quot;檔案或目錄&quot;</td>
<td>rm &quot;檔案或目錄&quot;</td>
</tr>
<tr>
<td>檢視檔案內容</td>
<td>cat &quot;檔案名稱&quot;</td>
<td>cat &quot;檔案名稱&quot;</td>
<td>cat &quot;檔案名稱&quot;</td>
</tr>
<tr>
<td>切換目錄</td>
<td>cd &quot;相對路徑或絕對路徑&quot;</td>
<td>cd &quot;相對路徑或絕對路徑&quot;</td>
<td>cd &quot;相對路徑或絕對路徑&quot;</td>
</tr>
<tr>
<td>顯示所在目錄</td>
<td>pwd</td>
<td>pwd</td>
<td>pwd</td>
</tr>
<tr>
<td>檢視目錄下的檔案</td>
<td>ls</td>
<td>ls</td>
<td>ls</td>
</tr>
<tr>
<td>重新開機</td>
<td>reboot</td>
<td>reboot</td>
<td>reboot</td>
</tr>
</tbody>
</table>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="Update+Timezone.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="html/Update+Timezone.html">如何更新主機時區？</a>&nbsp;<a href="index.html?page=Update+Timezone.md">(Update+Timezone.md)</a><a href="#Update+Timezone.md"></a></h1><br/><h1>如何更新主機時區？</h1>
<h2>Linux (Redhat / Fedora / CentOS) 設定時間的方式</h2>
<p>(1) copy /usr/share/zoneinfo/* 內的確切時區資料檔案為 /etc/localtime</p>
<pre><code># cp /usr/share/zoneinfo/GMT+0 /etc/localtime</code></pre>
<p>(2) 執行 date -u</p>
<pre><code># date -u</code></pre>
<p>(3) 輸入 date 看看是否已經是正確時區</p>
<pre><code># date</code></pre>
<hr>
<h2>SmartMachine 設定時間的方式</h2>
<p>選擇TimeZone時區</p>
<pre><code>[root@XXXX /opt/local/etc/nginx]# tzselect
Please identify a location so that time zone rules can be set correctly.
Please select a continent or ocean.
1) Africa
2) Americas
3) Antarctica
4) Arctic Ocean
5) Asia
6) Atlantic Ocean
7) Australia
8) Europe
9) Indian Ocean
10) Pacific Ocean
11) none - I want to specify the time zone using the POSIX TZ format.
#? 5
Please select a country or region.
1) Afghanistan                                            26) Laos
2) Armenia                                                27) Lebanon
3) Azerbaijan                                             28) Macao
4) Bahrain                                                29) Malaysia
5) Bangladesh                                             30) Mongolia
6) Bhutan                                                 31) Myanmar (Burma)
7) Brunei                                                 32) Nepal
8) Cambodia                                               33) Oman
9) China                                                  34) Pakistan
10) Cyprus                                                 35) Palestine
11) East Timor                                             36) Philippines
12) Georgia                                                37) Qatar
13) Hong Kong                                              38) Russia
14) India                                                  39) Saudi Arabia
15) Indonesia                                              40) Singapore
16) Iran                                                   41) Sri Lanka
17) Iraq                                                   42) Syria
18) Israel                                                 43) Taiwan
19) Japan                                                  44) Tajikistan
20) Jordan                                                 45) Thailand
21) Kazakhstan                                             46) Turkmenistan
22) Korea (North)                                          47) United Arab Emirates
23) Korea (South)                                          48) Uzbekistan
24) Kuwait                                                 49) Vietnam
25) Kyrgyzstan                                             50) Yemen
#? 43

The following information has been given:

Taiwan

Therefore TZ=&#39;Asia/Taipei&#39; will be used.
Local time is now:       Tue Nov  1 18:33:44 CST 2011
Universal Time is now:   Tue Nov  1 10:33:44 UTC 2011
Is the above information OK?
1) Yes
2) No
#? 1
Here is the TZ value again, this time on standard output:
Asia/Taipei</code></pre>
<p>修改Time Zone設定擋</p>
<pre><code>[root@XXXX /opt/local/etc/nginx]# vi /etc/default/init</code></pre>
<p>修改TZ設定內容為Asia/Taipei</p>
<pre><code>TZ=Asia/Taipei</code></pre>
<p>重新開機生效</p>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="View+Used+Resources.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="html/View+Used+Resources.html">如何檢視已使用的資源?</a>&nbsp;<a href="index.html?page=View+Used+Resources.md">(View+Used+Resources.md)</a><a href="#View+Used+Resources.md"></a></h1><br/><h1>如何檢視已使用的資源?</h1>
<h2>檢查磁碟使用情況</h2>
<table>
<thead>
<tr>
<th>如何得到這個資訊</th>
<th>請使用此命令</th>
</tr>
</thead>
<tbody>
<tr>
<td>查詢整個文件系統的磁碟空間使用情況</td>
<td>df -ht</td>
</tr>
<tr>
<td>查詢當前目錄的磁碟空間使用情況</td>
<td>du -h</td>
</tr>
<tr>
<td>查詢摘要目錄使用的空間</td>
<td>du -hs /opt</td>
</tr>
</tbody>
</table>
<p>在這些命令中的-h參數的結果，是以“人類可讀”的形式呈現。</p>
<h2>從 shell 檢查程序</h2>
<table>
<thead>
<tr>
<th>相關資訊</th>
<th>使用此命令</th>
</tr>
</thead>
<tbody>
<tr>
<td>通用處理器和內存統計資料</td>
<td>prstat -Z -s cpu <br>If prstat changes your terminal settings, use the reset command to reset them.</td>
</tr>
<tr>
<td>正在運行的程序列表</td>
<td>ps -elf</td>
</tr>
<tr>
<td>admin用戶程序列表</td>
<td>ps -uadmin -o pcpu,user,pid,args,comm,s<br>ps -uadmin -o user,args,pcpu,pmem,vsz,time,comm</td>
</tr>
<tr>
<td>MySQL用戶程序</td>
<td>ps -umysql -o pcpu,vsz,osz,args,comm,s</td>
</tr>
<tr>
<td>使用80 port的所有程序</td>
<td>/root/bin/pcp -p 80</td>
</tr>
<tr>
<td>2806過程中使用的所有埠</td>
<td>/root/bin/pcp -P 28068</td>
</tr>
<tr>
<td>所有埠和程序的資訊</td>
<td>/root/bin/pcp -a</td>
</tr>
<tr>
<td>CPU使用率</td>
<td>sudo /root/jinf -C</td>
</tr>
<tr>
<td>記憶體使用</td>
<td>sudo /root/jinf -m</td>
</tr>
<tr>
<td>互換空間的使用情況</td>
<td>sudo /root/jinf -S</td>
</tr>
</tbody>
</table>
<h2>檢查Webmin的過程</h2>
<ul>
<li>登錄到Virtualmin（請參考帳戶登錄及重要網址一文 ）。</li>
<li>點擊Webmin在左上方的選單，然後點選系統=&gt;運行的程序。</li>
<li>點擊PID、用戶、記憶體、或是CPU，以便為您的帳戶上運行的程序列表，分別按不同標準進行排序。</li>
</ul>
<hr>
<p>資料來源：<a href="http://wiki.joyent.com/display/www/Documentation+Home">Joyent Wiki</a></p>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="Apply+MiCloud+Account-new.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="html/Apply+MiCloud+Account-new.html">申請帳號</a>&nbsp;<a href="index.html?page=Apply+MiCloud+Account-new.md">(Apply+MiCloud+Account-new.md)</a><a href="#Apply+MiCloud+Account-new.md"></a></h1><br/><h1>申請MiCloud帳號</h1>
<h2>申請MiCloud帳號 <a href="http://micloud.tw">GO</a></h2>
<p>請於<strong>MiCloud</strong>首頁左上角點選右邊選項＜<strong>註冊</strong>＞。</p>
<p><img src='images/Apply+MiCloud+Account-new-p1-2.png' width='650' align='center'/></p>
<hr>
<h2>設定帳號&amp;密碼</h2>
<p>進入註冊新帳戶頁面填寫電子郵件&amp;密碼</p>
<p>電子郵件將作為日後登入之用途，平台相關資訊將寄送至此註冊之郵件地址，請務必填寫正確之地址，以避免權益受損。</p>
<p><img src='images/Apply+MiCloud+Account-new-set.jpg' width='650' align='center'/></p>
<hr>
<h2>註冊完成</h2>
<p>註冊完成後，您將可以訂購我們所提供的產品(訂購前，需至先先完成帳單資訊及付款方式填寫，此相關操作說明，請參考 <a href="html/MiCloud+Account+Modify.html">帳戶資訊修改</a></p>
<p><img src='images/Apply+MiCloud+Account-new-set2.jpg' width='650' align='center'/></p>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="Order+a+Machine.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="html/Order+a+Machine.html">訂購主機</a>&nbsp;<a href="index.html?page=Order+a+Machine.md">(Order+a+Machine.md)</a><a href="#Order+a+Machine.md"></a></h1><br/><h1>訂購主機</h1>
<p>若您還未建立您的 <strong>SSH-Key</strong> 以及 <strong>付款方式</strong> 的資料填寫 ，請先建立完成。</p>
<ul>
<li>SSH-Key 相關教學:<a href="html/SSH+KeyGen+Connect+Tutorial-Windows.html">Windows</a><a href="html/SSH+KeyGen+Connect+Tutorial-Linux+or+Unix.html">Linux/Unix</a><a href="html/SSH+KeyGen+Connect+Tutorial-MacOS.html">MacOS</a></li>
<li>付款方式 相關教學:<a href="html/Pay+way.html">付費方式</a></li>
</ul>
<p>若您上述步驟皆已完成，即可進入此頁訂購主機。</p>
<ul>
<li>首先您可以先從頁面左邊(即藍色框框)開始看起,其內容為 MiCloud 所有提供的機器類型、規格、服務項目以及各自的定價為何.</li>
<li>接著您可以於右邊紅色框框內開始選擇您想要購買的機器或服務,選擇完後可先看一看下方顯示的資訊(即黃色框框).</li>
<li>確認完成即可點選 <strong>Provision</strong>(綠色框框), MiCloud 會馬上幫您建立機器.</li>
</ul>
<p>關於機器建立狀況與相關資訊可於 <a href="html/Manage+your+Machines.html">主機管理</a></p>
<p><img src='images/Order+a+Machine-p1+-5.png' width='650' align='center'/></p>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="Instruction+for+2XS+Machine.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="html/Instruction+for+2XS+Machine.html">免費試用主機主機使用說明</a>&nbsp;<a href="index.html?page=Instruction+for+2XS+Machine.md">(Instruction+for+2XS+Machine.md)</a><a href="#Instruction+for+2XS+Machine.md"></a></h1><br/><h1>免費主機主機使用說明</h1>
<p>Small Package 服務主機為SmartOs主機，網路配置部分，提供一個內部私有IP，並透過外部DNS設定串聯，內部主機彼此間可以透過私有IP互通。一般設定說明如下:</p>
<h2>HTTP/HTTPS使用</h2>
<p>開放80、443、8080、3000、10000等port供HTTP(S)連線使用，連線時請使用主機DNS名稱連線(Ex:<a href="http://192-168-255-13.my.micloud.tw">http://192-168-255-13.my.micloud.tw</a>)</p>
<h2>80:Default HTTP protocol</h2>
<p>預設web目錄：/opt/local/share/httpd/htdocs</p>
<p>預設支援：php模組</p>
<p>使用者可以透過下面指令操作服務：</p>
<p>啟動：svcadm enable apache</p>
<p>關閉：svcadm disable apache</p>
<p>瀏覽網址：<a href="http://you_domain_name/">http://you_domain_name/</a></p>
<p>說明：如欲修改預設的htdoc目錄，可異動：includes/directory.conf與includes/core.conf兩個檔案，置換對應的目錄</p>
<ul>
<li>includes/directory.conf: 修改DocumentRoot至您的目錄</li>
<li>includes/core.conf: 修改Directory物件之目錄位置至您的目錄</li>
</ul>
<h2>443: Default HTTPS protocol (HTTP轉SSL，使用443 Port)</h2>
<p>預設目錄：/opt/local/share/httpd/htdocs</p>
<p>預設支援：php模組</p>
<p>使用者可以透過下面指令操作服務：</p>
<p>啟動：svcadm enable apache</p>
<p>關閉：svcadm disable apache</p>
<p>瀏覽網址：<a href="https://you_domain_name/">https://you_domain_name/</a></p>
<p>說明：SmartOS主機提供預設Self-Sign的SSL金鑰，位置為：/opt/local/etc/openssl/private/selfsigned.pem，設定上只需參考下面檔案，然後重起主機即可</p>
<pre><code># vi /opt/local/etc/httpd/virtualhosts/myssl.conf
&lt;VirtualHost _default_:443&gt;
SSLEngine On
SSLCertificateFile /opt/local/etc/openssl/private/selfsigned.pem
SSLCertificateKeyFile /opt/local/etc/openssl/private/selfsigned.pem
DocumentRoot /opt/local/share/httpd/htdocs
&lt;/VirtualHost&gt;</code></pre>
<h2>8080:Default Tomacat HTTP protoca</h2>
<p>由於Smartos預設沒有Tomcat, 需自行下載，指令如下</p>
<p>搜尋可下載的Tomcat(黃色框框部分為可下載的版本)</p>
<pre><code>#pkgin se tomcat</code></pre>
<p><img src='images/Instruction+for+2XS+Machine-setomcat.jpg' width='650' align='center'/></p>
<p>下載您需要的版本</p>
<pre><code>#pkgin in apache-tomcat-7.0.22</code></pre>
<p><img src='images/Instruction+for+2XS+Machine-intomcat.jpg' width='650' align='center'/></p>
<p>預設JDK版本：JDK6</p>
<p>Tomcat目錄：/opt/local/share/tomcatl</p>
<p>部署目錄：/opt/local/share/tomcat/webapps</p>
<p>使用者可以透過下面指令操作服務：</p>
<p>啟動：/opt/local/share/tomcat/bin/startup.sh</p>
<p>關閉：/opt/local/share/tomcat/bin/shutdown.sh</p>
<p>瀏覽網址：<a href="http://you_domain_name:8080/">http://you_domain_name:8080/</a></p>
<h2>3000: Default Node.js (ExpressJS) protocal</h2>
<p>Node.js版本：v0.6.17</p>
<p>Npm版本：v1.2.21</p>
<p>預載Npm套件：express@2.5.9, forever@0.9.1, smartdc@6.5.3</p>
<p>使用範例：</p>
<p>$ express TestProject</p>
<p>$ cd TestProject &amp;&amp; npm install</p>
<p>啓動服務：node app.js</p>
<p>關閉服務：kill <code>ps -ef | grep “node app.js” | awk ‘{print $2}’</code></p>
<p>瀏覽網址：<a href="http://you_domain_name:3000/">http://you_domain_name:3000/</a></p>
<h2>10000: Default Webmin protocal</h2>
<p>(背後服務走HTTPS 10000 Port，Stingray負責重導流量)</p>
<p>使用者可以透過下面指令操作服務：</p>
<p>啟動：svcadm enable webmin</p>
<p>關閉：svcadm disable webmin</p>
<p>瀏覽網址：<a href="https://you_domain_name:10000/">https://you_domain_name:10000/</a></p>
<h2>其他-SmartOS套件安裝與管理：</h2>
<pre><code>搜尋：pkgin search [package name]
安裝：pkgin install [package name]
移除：pkgin remove [package name]</code></pre>
<h2>其他-SMF服務管理：</h2>
<pre><code>啓動服務：svcadm enable [service name]
關閉服務：svcadm disable [service name]
服務狀態檢視：svcs -a | grep [service name]
服務LOG檢視：tail -f `svcs -L [service name]`</code></pre>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="Ubuntu+mirror+site.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="html/Ubuntu+mirror+site.html">變更套件庫來源及安裝軟體(Ubuntu)</a>&nbsp;<a href="index.html?page=Ubuntu+mirror+site.md">(Ubuntu+mirror+site.md)</a><a href="#Ubuntu+mirror+site.md"></a></h1><br/><h1>變更套件庫來源及安裝軟體(Ubuntu)</h1>
<p>目前MiCloud提供的系統各自採用國外所提供的套件庫，主要是因為台灣的鏡像站點並不保證其服務的可靠度及可用率，但您也可以透過修改設定檔將套件庫來源指向台灣，其可靠度您必須自行評估，以保障您的虛擬主機。</p>
<p>Ubuntu採用APT套件管理，其套件庫的修改與設定相似，實際修改方式如下說明:</p>
<h2>變更套件來源</h2>
<p>登入後，請先複製“sources.list”檔案，此檔案存放在“/etc/apt/”下，此複製動作針對改錯時，未來可以回復原來的檔案。將sources.list檔案複製一份，命名為sources.bak，指令如下</p>
<pre><code>#cp /etc/apt/sources.list /etc/apt/sources.list.bak</code></pre>
<p>備份完成後請至/etc/apt下確認是否成功增加sources.list.bak檔，如下圖</p>
<p><img src='images/Ubuntu+mirror+site-ubcp.jpg' width='650' align='center'/></p>
<p>確認Ubuntu版本並編輯sorces.list，編輯指令如下</p>
<pre><code># vi /etc/apt/sources.list</code></pre>
<p>原來的套件庫參考網站為 <a href="http://us.archive.ubuntu.com/ubuntu/">http://us.archive.ubuntu.com/ubuntu/</a> ，將其改為參考台灣鏡像站 <a href="http://opensource.nchn.org.tw/ubuntu/">http://opensource.nchn.org.tw/ubuntu/</a> ，下圖紅色框框部分即是要修改的部分，Ubuntu有分多個模組，用戶可以自行選擇哪幾個要變更。</p>
<pre><code>deb http://opensource.nchc.org.tw/ubuntu/ lucid main restricted
deb-src http://opensource.nchc.org.tw/ubuntu/ lucid main restricted</code></pre>
<p>修改完後儲存即可。<br><img src='images/Ubuntu+mirror+site-ubchange1.jpg' width='650' align='center'/></p>
<p>請執行更改後的檔案，並確認是否更新，執行指令及畫面如下:</p>
<p>黃色框框部分即更改過後，系統於您更改的路徑中找尋到可更新套件。</p>
<pre><code>#apt-get update</code></pre>
<p><img src='images/Ubuntu+mirror+site-ubupdate1.jpg' width='650' align='center'/></p>
<h2>更多Ubuntu mirror site list</h2>
<ul>
<li>Ubuntu全球映射站<br><a href="https://launchpad.net/ubuntu/+archivemirrors">https://launchpad.net/ubuntu/+archivemirrors</a></li>
</ul>
<ul>
<li><p>台灣鏡像站推薦使用</p>
<p><a href="http://opensource.nchc.org.tw/ubuntu/">http://opensource.nchc.org.tw/ubuntu/</a></p>
<p><a href="http://ftp.nchc.org.tw/ubuntu/">http://ftp.nchc.org.tw/ubuntu/</a></p>
<p><a href="http://free.nchc.org.tw/ubuntu/">http://free.nchc.org.tw/ubuntu/</a></p>
<p><a href="http://ftp.twaren.net/ubuntu/">http://ftp.twaren.net/ubuntu/</a></p>
</li>
</ul>
<hr>
<h2>安裝非預載套件</h2>
<p>使用apt指令安裝Ubuntu套件，相關指令如下:</p>
<p>先查詢可安裝的套件</p>
<pre><code>#apt-cache pkgnames</code></pre>
<p><img src='images/Ubuntu+mirror+site-un-apt-cache.jpg' width='650' align='center'/></p>
<p>若找不到您需要的套件也可透過下面的指令來搜尋</p>
<pre><code>#apt-cache search [套件名稱/關鍵字]</code></pre>
<p><img src='images/Ubuntu+mirror+site-un-apt-cache-search.jpg' width='650' align='center'/></p>
<p>再執行安裝，指令如下</p>
<pre><code>#apt-get install [套件名稱]</code></pre>
<p><img src='images/Ubuntu+mirror+site-un-apt-+install.png' width='650' align='center'/></p>
<p>檢查是否安裝成功，指令</p>
<pre><code>#dpkg --get-selections | grep &quot;套件名稱&quot;</code></pre>
<p><img src='images/Ubuntu+mirror+site-un-selection.jpg' width='650' align='center'/></p>
<p>若想移除套件，指令如下</p>
<pre><code>#apt-get remove [套件名稱]</code></pre>
<p><img src='images/Ubuntu+mirror+site-un-apt-+remove.jpg' width='650' align='center'/></p>
<p>若要更新己安裝的套件，指令如下:</p>
<p>(此指令可一次升級所有已安裝套件的版本，也可以單獨升級某指定套件。)</p>
<pre><code>#apt-get upgrade</code></pre>
<p><img src='images/Ubuntu+mirror+site-un-aptupgrade.jpg' width='650' align='center'/></p>
<p>只更新某套件</p>
<pre><code>#apt-get upgrade [套件名稱]</code></pre>
<p><img src='images/Ubuntu+mirror+site-un-aptupgrade1.jpg' width='650' align='center'/></p>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="Debian+mirror+site.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="html/Debian+mirror+site.html">變更套件庫來源及安裝軟體(Debian)</a>&nbsp;<a href="index.html?page=Debian+mirror+site.md">(Debian+mirror+site.md)</a><a href="#Debian+mirror+site.md"></a></h1><br/><h1>變更套件庫來源及安裝軟體(Debian)</h1>
<p>目前MiCloud提供的系統各自採用國外所提供的套件庫，主要是因為台灣的鏡像站點並不保證其服務的可靠度及可用率，但您也可以透過修改設定檔將套件庫來源指向台灣，其可靠度您必須自行評估，以保障您的虛擬主機。</p>
<p>Debian採用APT套件管理，其套件庫的修改與設定相似，實際修改方式如下說明:</p>
<h2>變更套件來源</h2>
<p>登入後，請先複製“sources.list”檔案，此檔案存放在“/etc/apt/”下，此複製動作針對改錯時，未來可以回復原來的檔案。將sources.list檔案複製一份，命名為sources.bak，指令如下</p>
<pre><code>#cp /etc/apt/sources.list /etc/apt/sources.list.bak</code></pre>
<p>備份完成後請至/etc/apt下確認是否成功增加sources.list.bak檔，如下圖</p>
<p><img src='images/Debian+mirror+site-decp.jpg' width='650' align='center'/></p>
<p>確認Debian 版本並編輯sources.list，編輯指令如下:</p>
<pre><code>#vi /etc/apt/sources.list</code></pre>
<p>原來的套件庫參考網站為 <a href="http://http.us.debian.org/debian/">http://http.us.debian.org/debian/</a> ，將其改為參考台灣鏡像站 <a href="http://opensource.nchn.org.tw/debian/”">http://opensource.nchn.org.tw/debian/”</a>  下圖紅色框框部分即是要修改的部分</p>
<pre><code>deb http://opensource.nchc.org.tw/debian squeeze main contrib non-free
deb http://opensource.nchc.org.tw/debian squeeze-updates main contrib non-free
deb http://security.debian.org/ squeeze/updates main contrib non-free</code></pre>
<p>修改完後儲存即可。</p>
<p><img src='images/Debian+mirror+site-dechange.jpg' width='650' align='center'/></p>
<p>請執行更改後的檔案，並確認是否更新，執行指令及畫面如下系統將於您更改的路徑中找到可更新的套件。(如下方黃色底線)</p>
<pre><code>#apt-get update</code></pre>
<p><img src='images/Debian+mirror+site-deupdate.jpg' width='650' align='center'/></p>
<h2>更多Debian mirror site list</h2>
<ul>
<li><p>Debian全球映射站</p>
<p> <a href="http://www.debian.org/mirror/list">http://www.debian.org/mirror/list</a></p>
</li>
</ul>
<ul>
<li><p>台灣鏡像站推薦使用</p>
<p> <a href="http://opensource.nchc.org.tw/debian/">http://opensource.nchc.org.tw/debian/</a></p>
<p> <a href="http://ftp.tw.debian.org/debian/">http://ftp.tw.debian.org/debian/</a></p>
<p> <a href="http://opensource.nchc.org.tw/debian/">http://opensource.nchc.org.tw/debian/</a></p>
<p> <a href="http://debian.linux.org.tw/debian/">http://debian.linux.org.tw/debian/</a></p>
</li>
</ul>
<hr>
<h2>安裝非預載套件</h2>
<p>使用apt指令安裝Debian套件，相關指令如下:</p>
<p>先查詢可安裝的套件</p>
<pre><code>#apt-cache pkgnames</code></pre>
<p><img src='images/Debian+mirror+site-de-apt-cache.jpg' width='650' align='center'/></p>
<p>若找不到您需要的套件也可透過下面的指令來搜尋</p>
<pre><code>#apt-cache search [套件名稱/關鍵字]</code></pre>
<p><img src='images/Debian+mirror+site-de-apt-cache-search.jpg' width='650' align='center'/></p>
<p>再執行安裝，指令如下</p>
<pre><code>#apt-get install [套件名稱]</code></pre>
<p><img src='images/Debian+mirror+site-de-apt-+install.png' width='650' align='center'/></p>
<p>檢查是否安裝成功，指令如下</p>
<pre><code>#dpkg --get-selections | grep &quot;套件名稱&quot;</code></pre>
<p><img src='images/Debian+mirror+site-de-selection.jpg' width='650' align='center'/></p>
<p>若想移除套件，指令如下</p>
<pre><code>#apt-get remove [套件名稱]</code></pre>
<p><img src='images/Debian+mirror+site-de-remove.jpg' width='650' align='center'/></p>
<p>若要更新所有己安裝的套件，指令如下:</p>
<pre><code>#apt-get upgrade</code></pre>
<p><img src='images/Debian+mirror+site-de-aptupgrade.jpg' width='650' align='center'/></p>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="CentOS+mirror+site.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="html/CentOS+mirror+site.html">變更套件庫來源及安裝軟體(CentOS)</a>&nbsp;<a href="index.html?page=CentOS+mirror+site.md">(CentOS+mirror+site.md)</a><a href="#CentOS+mirror+site.md"></a></h1><br/><h1>變更套件庫來源及安裝軟體(CentOS)</h1>
<p>目前MiCloud提供的系統各自採用國外所提供的套件庫，主要是因為台灣的鏡像站點並不保證其服務的可靠度及可用率，但您也可以透過修改設定檔將套件庫來源指向台灣，其可靠度您必須自行評估，以保障您的虛擬主機。</p>
<p>CentOS引入了為Yellow Dog Linux 而設的YUM系統套件管理工具，其套件庫的修改與設定相似。實際修改方式如下說明:</p>
<h2>變更套件來源</h2>
<p>登入後，請先複製“CentOS-Base.repo”檔案，此檔案存放在“/etc/yum.repos.d/”下，此複製動作針對改錯時，未來可以回復原來的檔案。將CentOS-Base.repo檔案複製一份，命名為CentOS-Base.repo.bak，指令如下</p>
<pre><code>#cp /etc/yum.repos.d/CentOS-Base.repo /etc/yum.repos.d/CentOS-Base.repo.bak</code></pre>
<p>備份完成後請至/etc/yum.repos.d下確認是否成功增加CentOS-Base.repo.bak檔，如下圖</p>
<p><img src='images/CentOS+mirror+site-cecp.jpg' width='650' align='center'/></p>
<p>編輯repo檔，編輯指令如下:</p>
<pre><code>#vi /etc/yum.repos.d/CentOS-Base.repo</code></pre>
<p>原來的套件庫參考網站為 <a href="http://mirror.centos.org/centos">http://mirror.centos.org/centos</a> ，將其改為參考台灣鏡像站 <a href="http://opensource.nchn.org.tw/centos">http://opensource.nchn.org.tw/centos</a> ，下圖紅色框框部分包含原來的套件來源(已註解掉，將不會再執行)，以及修改至台灣鏡像站的網址。CentOS有分很多模組，用戶可以自行選擇哪幾個要變更。</p>
<pre><code>[base]
#mirrorlist=http://mirrorlist.centos.org/?release=$releasever&amp;arch=$basearch&amp;repo=os
baseurl=http://opensource.nchc.org.tw/centos/$releasever/os/$basearch/
[updates]
#mirrorlist=http://mirrorlist.centos.org/?release=$releasever&amp;arch=$basearch&amp;repo=updates
baseurl=http://opensource.nchc.org.tw/centos/$releasever/updates/$basearch/
[extras]
#mirrorlist=http://mirrorlist.centos.org/?release=$releasever&amp;arch=$basearch&amp;repo=extras
baseurl=http://opensource.nchc.org.tw/centos/$releasever/extras/$basearch/
[centosplus]
#mirrorlist=http://mirrorlist.centos.org/?release=$releasever&amp;arch=$basearch&amp;repo=centosplus
baseurl=http://opensource.nchc.org.tw/centos/$releasever/centosplus/$basearch/
[contrib]
#mirrorlist=http://mirrorlist.centos.org/?release=$releasever&amp;arch=$basearch&amp;repo=contrib
baseurl=http://opensource.nchc.org.tw/centos/$releasever/contrib/$basearch/</code></pre>
<p>修改完後儲存即可。</p>
<p><img src='images/CentOS+mirror+site-cechange.jpg' width='650' align='center'/></p>
<p>請執行更改後的檔案，並確認是否更新，執行指令及畫面如下</p>
<ul>
<li>清除yum的暫存</li>
</ul>
<pre><code>#yum clean all</code></pre>
<p><img src='images/CentOS+mirror+site-ceclean.jpg' width='650' align='center'/></p>
<ul>
<li>列出有更新的檔案</li>
</ul>
<pre><code>#yum list</code></pre>
<p><img src='images/CentOS+mirror+site-celist.jpg' width='650' align='center'/></p>
<ul>
<li>執行更新</li>
</ul>
<pre><code>#yum update</code></pre>
<p><img src='images/CentOS+mirror+site-ceupdate.jpg' width='650' align='center'/></p>
<ul>
<li>找到您更新過的路徑</li>
</ul>
<pre><code>#yum repolist –v</code></pre>
<p><img src='images/CentOS+mirror+site-cerepolist.jpg' width='650' align='center'/></p>
<h2>更多CentOS mirror site list</h2>
<ul>
<li><p>Debian全球映射站</p>
<p><a href="http://www.centos.org/modules/tinycontent/index.php?id=30">http://www.centos.org/modules/tinycontent/index.php?id=30</a></p>
</li>
</ul>
<ul>
<li><p>台灣鏡像站推薦使用</p>
<p><a href="http://opensource.nchc.org.tw/centos/">http://opensource.nchc.org.tw/centos/</a></p>
<p><a href="http://mirror01.idc.hinet.net/CentOS/">http://mirror01.idc.hinet.net/CentOS/</a></p>
<p><a href="http://ftp.twaren.net/Linux/CentOS/">http://ftp.twaren.net/Linux/CentOS/</a></p>
<p><a href="http://ftp.isu.edu.tw/pub/Linux/CentOS/">http://ftp.isu.edu.tw/pub/Linux/CentOS/</a></p>
</li>
</ul>
<hr>
<h2>安裝非預載套件</h2>
<p>使用yum指令安裝CentOS套件，相關指令如下:</p>
<p>先查詢可安裝的套件</p>
<pre><code>#yum list</code></pre>
<p><img src='images/CentOS+mirror+site-ce-list.jpg' width='650' align='center'/></p>
<p>若找不到您需要的套件也可透過下面的指令來搜尋</p>
<pre><code>#yum search [套件名稱/關鍵字]</code></pre>
<p><img src='images/CentOS+mirror+site-ce-search.jpg' width='650' align='center'/></p>
<p>再執行安裝，指令如下</p>
<pre><code>#yum install [套件名稱]</code></pre>
<p><img src='images/CentOS+mirror+site-ce-install.jpg' width='650' align='center'/></p>
<p>若想移除套件，指令如下</p>
<pre><code>#yum remove [套件名稱]</code></pre>
<p><img src='images/CentOS+mirror+site-ce-remove.jpg' width='650' align='center'/></p>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="Fedora+mirror+site.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="html/Fedora+mirror+site.html">變更套件庫來源及安裝軟體(Fedora)</a>&nbsp;<a href="index.html?page=Fedora+mirror+site.md">(Fedora+mirror+site.md)</a><a href="#Fedora+mirror+site.md"></a></h1><br/><h1>變更套件庫來源及安裝軟體(Fedora)</h1>
<p>目前MiCloud提供的系統各自採用國外所提供的套件庫，主要是因為台灣的鏡像站點並不保證其服務的可靠度及可用率，但您也可以透過修改設定檔將套件庫來源指向台灣，其可靠度您必須自行評估，以保障您的虛擬主機。</p>
<p>Fedora引入了為Yellow Dog Linux 而設的YUM系統套件管理工具，其套件庫的修改與設定相似。實際修改方式如下說明:</p>
<h2>變更套件來源</h2>
<p>登入後，請先複製“fedora.repo、fedora-updates.repo、fedora-updates-testing.repo”這三個檔案存放在“/etc/yum.repos.d/”下，此複製動作針對改錯時，未來可以回復原來的檔案。</p>
<p>將fedora.repo、fedora-updates.repo、fedora-updates-testing.repo複製一份，命名為fedora.repo.bak、fedora-updates.repo.bak、fedora-updates-testing.repo.bak，指令如下:</p>
<pre><code>#cp /etc/yum.repos.d/fedora.repo /etc/yum.repos.d/fedora.repo.bak
#cp /etc/yum.repos.d/fedora-updates.repo /etc/yum.repos.d/fedora-updates.repo.bak
#cp /etc/yum.repos.d/fedora-updates-testing.repo /etc/yum.repos.d/fedora-updates-testing.repo.bak</code></pre>
<p>備份完成後請至/etc/apt下確認是否成功增加，如下圖:</p>
<p><img src='images/Fedora+mirror+site-fecp.jpg' width='650' align='center'/></p>
<p>編輯repo檔，編輯指令如下<br>*  fedora.repo</p>
<pre><code>#vi /etc/yum.repos.d/fedora.repo</code></pre>
<p>原來的套件庫參考網站為 <a href="http://download.fedoraproject.org/pub/fedora/">http://download.fedoraproject.org/pub/fedora/</a> ，將其改為參考台灣鏡像站 <a href="http://opensource.nchn.org.tw/fedora">http://opensource.nchn.org.tw/fedora</a> ，下圖紅色框框部分包含原來的套件來源(已註解掉，將不會再執行)，以及修改至台灣鏡像站的網址。Fedora有分很多模組，用戶可以自行選擇哪幾個要變更。//</p>
<pre><code>[fedora]
baseurl=http://opensource.nchc.org.tw/fedora/linux/releases/$releasever/Everything/$basearch/os/
#mirrorlist=https://mirrors.fedoraproject.org/metalink?repo=fedora-$releasever&amp;arch=$basearch
[fedora-debuginfo]
baseurl=http://opensource.nchc.org.tw/fedora/linux/releases/$releasever/Everything/$basearch/debug/
#mirrorlist=https://mirrors.fedoraproject.org/metalink?repo=fedora-debug-$releasever&amp;arch=$basearch
[fedora-source]
baseurl=http://opensource.nchc.org.tw/fedora/linux/releases/$releasever/Everything/source/SRPMS/
#mirrorlist=https://mirrors.fedoraproject.org/metalink?repo=fedora-source-$releasever&amp;arch=$basearch</code></pre>
<p>修改完後儲存即可。</p>
<p><img src='images/Fedora+mirror+site-fevifedora.jpg' width='650' align='center'/></p>
<ul>
<li>fedora-updates.repo</li>
</ul>
<pre><code># vi /etc/yum.repos.d/fedora-updates.repo</code></pre>
<p>原來的套件庫參考網站為 <a href="http://download.fedoraproject.org/pub/fedora/">http://download.fedoraproject.org/pub/fedora/</a> ，將其改為參考台灣鏡像站 <a href="http://opensource.nchn.org.tw/fedora">http://opensource.nchn.org.tw/fedora</a> ，下圖紅色框框部分包含原來的套件來源(已註解掉，將不會再執行)，以及修改至台灣鏡像站的網址。Fedora有分很多模組，用戶可以自行選擇哪幾個要變更。</p>
<pre><code>[updates]
baseurl=http://opensource.nchc.org.tw/fedora/linux/updates/$releasever/$basearch/
#mirrorlist=https://mirrors.fedoraproject.org/metalink?repo=updates-released-f$releasever&amp;arch=$basearch
[updates-debuginfo]
baseurl=http://opensource.nchc.org.tw/fedora/linux/updates/$releasever/$basearch/debug/
#mirrorlist=https://mirrors.fedoraproject.org/metalink?repo=updates-released-debug-f$releasever&amp;arch=$basearch
[updates-source]
baseurl=http://opensource.nchc.org.tw/fedora/linux/updates/$releasever/SRPMS/
#mirrorlist=https://mirrors.fedoraproject.org/metalink?repo=updates-released-source-f$releasever&amp;arch=$basearch</code></pre>
<p>修改完後儲存即可。</p>
<p><img src='images/Fedora+mirror+site-fevifedora-up.jpg' width='650' align='center'/></p>
<ul>
<li>fedora-updates-testing.repo</li>
</ul>
<pre><code>#vi /etc/yum.repos.d/fedora-updates-testing.repo</code></pre>
<p>原來的套件庫參考網站為 <a href="http://download.fedoraproject.org/pub/fedora/">http://download.fedoraproject.org/pub/fedora/</a> ，將其改為參考台灣鏡像站 <a href="http://opensource.nchn.org.tw/fedora">http://opensource.nchn.org.tw/fedora</a> ，下圖紅色框框部分包含原來的套件來源(已註解掉，將不會再執行)，以及修改至台灣鏡像站的網址。Fedora有分很多模組，用戶可以自行選擇哪幾個要變更。</p>
<pre><code>[updates-testing]
baseurl=http://opensource.nchc.org.tw/fedora/linux/updates/testing/$releasever/$basearch/
#mirrorlist=https://mirrors.fedoraproject.org/metalink?repo=updates-testing-f$releasever&amp;arch=$basearch
[updates-testing-debuginfo]
baseurl=http://opensource.nchc.org.tw/fedora/linux/updates/testing/$releasever/$basearch/debug/
#mirrorlist=https://mirrors.fedoraproject.org/metalink?repo=updates-testing-debug-f$releasever&amp;arch=$basearch
[updates-testing-source]
baseurl=http://opensource.nchc.org.tw/fedora/linux/updates/testing/$releasever/SRPMS/
#mirrorlist=https://mirrors.fedoraproject.org/metalink?repo=updates-testing-source-f$releasever&amp;arch=$basearch</code></pre>
<p>修改完後儲存即可。</p>
<p><img src='images/Fedora+mirror+site-fevifedora-up-test.jpg' width='650' align='center'/></p>
<p>請執行更改後的檔案，並確認是否更新，執行指令及畫面如下<br>*  清除yum暫存</p>
<pre><code>#yum clean all</code></pre>
<p><img src='images/Fedora+mirror+site-feclean.jpg' width='650' align='center'/></p>
<ul>
<li>列出有更新的檔案</li>
</ul>
<pre><code>#yum list</code></pre>
<p><img src='images/Fedora+mirror+site-felist.jpg' width='650' align='center'/></p>
<ul>
<li>執行更新</li>
</ul>
<pre><code>#yum update</code></pre>
<p><img src='images/Fedora+mirror+site-feupdate.jpg' width='650' align='center'/></p>
<ul>
<li>找到您更新過的路徑</li>
</ul>
<pre><code>#yum repolist –v</code></pre>
<p><img src='images/Fedora+mirror+site-ferepolist.jpg' width='650' align='center'/></p>
<h2>更多Fedora mirror site list</h2>
<ul>
<li><p>Fedora全球映射站</p>
<p><a href="http://mirrors.fedoraproject.org/publiclist/">http://mirrors.fedoraproject.org/publiclist/</a></p>
</li>
</ul>
<ul>
<li><p>台灣鏡像站推薦使用</p>
<p><a href="http://opensource.nchc.org.tw/fedora/">http://opensource.nchc.org.tw/fedora/</a></p>
<p><a href="http://free.nchc.org.tw/fedora/linux/">http://free.nchc.org.tw/fedora/linux/</a></p>
<p><a href="http://ftp.twaren.net/Linux/Fedora/linux/">http://ftp.twaren.net/Linux/Fedora/linux/</a></p>
<p><a href="http://opensource.nchc.org.tw/fedora/linux/">http://opensource.nchc.org.tw/fedora/linux/</a></p>
</li>
</ul>
<hr>
<h2>安裝非預載套件</h2>
<p>使用yum指令安裝Fedora套件，相關指令如下:</p>
<p>先查詢可安裝的套件</p>
<pre><code>#yum list</code></pre>
<p><img src='images/Fedora+mirror+site-fe-list.png' width='650' align='center'/></p>
<p>若找不到您需要的套件也可透過下面的指令來搜尋</p>
<pre><code>#yum search [套件名稱/關鍵字]</code></pre>
<p><img src='images/Fedora+mirror+site-fe-search.jpg' width='650' align='center'/></p>
<p>再執行安裝，指令如下</p>
<pre><code>#yum install [套件名稱]</code></pre>
<p><img src='images/Fedora+mirror+site-fe-install.jpg' width='650' align='center'/></p>
<p>若想移除套件，指令如下</p>
<pre><code>#yum remove [套件名稱]</code></pre>
<p><img src='images/Fedora+mirror+site-fe-remove.jpg' width='650' align='center'/></p>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="Install+SmartOS+Packages.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="html/Install+SmartOS+Packages.html">更新套件庫及安裝軟體(SmartOS)</a>&nbsp;<a href="index.html?page=Install+SmartOS+Packages.md">(Install+SmartOS+Packages.md)</a><a href="#Install+SmartOS+Packages.md"></a></h1><br/><h1>更新套件庫及安裝軟體(SmartOS)</h1>
<h2>套件更新</h2>
<p>不同SmartOS版本有不同的套件庫來源，無法任意變更，但可以執行套件更新，相關指令如下:</p>
<p>先從套件庫找出需要更新的套件，指令如下:</p>
<pre><code>#pkgin update</code></pre>
<p><img src='images/Install+SmartOS+Packages-update.jpg' width='650'  align='center'/><br>再執行更新，指令如下:</p>
<pre><code>#pkgin upgrade</code></pre>
<p><img src='images/Install+SmartOS+Packages-upgrade.jpg' width='650'  align='center'/></p>
<hr>
<h2>安裝非預載套件</h2>
<p>在SmartOS上安裝套件是非常簡單的事情，SmartOS使用pkgin及相關的指令來作套件的安裝與維護，使用上就像yum或是apt-get一樣簡單。您可在putty或其他terminal工具連上SmartOS後，使用pkgin指令說明如下:</p>
<h2>列出系統上的套件</h2>
<pre><code>#pkgin list</code></pre>
<p><img src='images/Install+SmartOS+Packages-pkgin-list.png' width='650'  align='center'/></p>
<h2>搜尋套件</h2>
<p>若裡面沒有您需要的軟體套件，這時能使用搜尋軟體:</p>
<pre><code>#pkgin search [套件部份名稱]
ex:pkgin search postgre</code></pre>
<p><img src='images/Install+SmartOS+Packages-pkgin-search.png' width='650'  align='center'/></p>
<h2>安裝套件</h2>
<pre><code>#pkgin install [套件全名]
ex:pkgin install postgresql90-adminpack-9.0.4</code></pre>
<p><img src='images/Install+SmartOS+Packages-pkgin-install.png' width='650'  align='center'/></p>
<h2>刪除套件</h2>
<p>安裝完若發現安裝錯誤，則可移除套件:</p>
<pre><code>#pkgin remove [套件全名]
ex:pkgin remove postgresql90-adminpack-9.0.4</code></pre>
<p><img src='images/Install+SmartOS+Packages-pkgin-remove.png' width='650'  align='center'/></p>
<h2>常用套件</h2>
<ul>
<li>Install Apache Httpd</li>
<li>Install Apache Tomcat</li>
<li>Install Java</li>
<li>Install mod_jk Module</li>
<li>Install Apache With Tomcat</li>
<li>Install Java jdk 1.5 and jboss 4.0</li>
</ul>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="SSH+KeyGen+Connect+Tutorial-Windows.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="html/SSH+KeyGen+Connect+Tutorial-Windows.html">金鑰產生與連線教學(Windows)</a>&nbsp;<a href="index.html?page=SSH+KeyGen+Connect+Tutorial-Windows.md">(SSH+KeyGen+Connect+Tutorial-Windows.md)</a><a href="#SSH+KeyGen+Connect+Tutorial-Windows.md"></a></h1><br/><h1>金鑰產生與連線教學(Windows)</h1>
<h2>SSH Key限制</h2>
<p>MiCloud SSH Key模組使用上有下面限制，使用前需要特別注意：</p>
<ol>
<li>SSH Key僅適用於SmartOS及Linux主機，Windows主機不適用。</li>
<li>Linux server之SSH Key必須於server建立前匯入，如於Server建立後匯入之SSH Key將無法使用於Linux主機上(但SmartOS可以使用)。</li>
</ol>
<p>影片:<a href="http://www.youtube.com/watch?v=QdHGTfH-WGg">MiCloud SSH Key 產生與管理</a></p>
<div align="center"><br><embed width="420" height="345" src="http://www.youtube.com/v/QdHGTfH_WGg&hd=1" type="application/x-shockwave-flash"></embed><br></div><br>影片:<a href="http://www.youtube.com/watch?v=1s1HZiPV17Q">Windows主機使用PuTTY連線MiCloud機器</a><br><div align="center"><br><embed width="420" height="345" src="http://www.youtube.com/v/1s1HZiPV17Q&hd=1" type="application/x-shockwave-flash"></embed><br></div>

<h2>MiCloud SSH Key管理功能</h2>
<p>MiCloud提供SSH Key的管理模組，您可透過<a href="http://micloud.tw">MiCloud Customer Portal</a>進行SSH Key的上傳與管理，透過SSH協定與SSH Key的認證，將可確保您與您伺服器之間的連線安全。</p>
<font color="red">申請 Linux/Unix 主機者，建議務必修改root密碼，並妥善保存，避免SSH Key遺漏時候造成無法連線問題。</font>



<h2>Windows端SSH連線設定</h2>
<p>下面將介紹MiCloud上建立SSH Key與上傳SSH Key的方式：</p>
<ol>
<li>於下列網址下載 Putty and PuttyGen，該工具可以協助您進行SSH連線與產生SSH連線金鑰(SSH Key)。</li>
</ol>
<p><a href="http://www.chiark.greenend.org.uk/~sgtatham/putty/download.html">Putty download page</a><br><img src='images/SSH+KeyGen+&+Connect+Tutorial-Windows-putty-download-page.png' width='500' align='center'/></p>
<ol>
<li>執行 PuttyGen.exe，並點選”Generate”按鈕</li>
</ol>
<p><img src='images/SSH+KeyGen+&+Connect+Tutorial-Windows-putty-generator.png' width='500' align='center'/><br><img src='images/SSH+KeyGen+&+Connect+Tutorial-Windows-putty-generator2.png' width='500' align='center'/><br>在執行的時候請<font color="red" style="font-weight:bold">一直搖晃您的滑鼠</font>直到密碼產生。<br><img src='images/SSH+KeyGen+&+Connect+Tutorial-Windows-putty-generator3.png' width='500' align='center'/><br>執行完成後，請儲存您的public key (Save public key按鈕)與private key (Save private key)按鈕。</p>
<p>3.上傳SSH Key</p>
<p>登入系統後，點選右上方帳戶並點選下方SSH Key頁籤 ，填上SSH Key名稱，並將上面PuttyGen產生的檔案內容拷貝貼在SSH金鑰欄位。<br><img src='images/SSH+KeyGen+&+Connect+Tutorial-Windows-p1+-7.png' width='650' align='center'/><br><img src='images/SSH+KeyGen+&+Connect+Tutorial-Windows-upload-key2.png' width='500' align='center'/><br>上圖圈起的key即是public key ，可將裡面的內容全部直接複製貼上於SSH 金鑰的欄位內即可。或是開啟SSH public key檔案。</p>
<p><strong>SSH public key檔案:</strong><br><img src='images/SSH+KeyGen+&+Connect+Tutorial-Windows-upload-key3.png' width='600' align='center'/><br>Public key檔案內容範例如上圖，請將第3-7行拷貝下來貼到SSH金鑰欄位，並在最前面加上“ssh-rsa ”，填寫畫面與填寫內容如下圖所示：<br><img src='images/SSH+KeyGen+&+Connect+Tutorial-Windows-upload-key4.png' width='500' align='center'/><br>上述動作已完成SSH Key之上傳動作，請妥善保管public / private keys。</p>
<h2>Windows使用SSH登入系統</h2>
<p>左鍵雙擊下載之putty.exe，下圖為putty執行畫面：</p>
<p>請於<strong>Host Name (or IP address)</strong>內輸入您機器的IP,<br><strong>Port</strong> 則是輸入 <strong>22</strong> (22為MiCloud的預設SSH連接阜)</p>
<p>下方的 <strong>Saved Sessions</strong> 則是給您下次使用時能夠辨別這是哪一台機器用,所以能可以以您希望的名字命名,也可以使用當台機器的IP作為命名.</p>
<p>輸入完成後請於左邊的Category表單中點選 <strong>Connection</strong> -&gt; <strong>SSH</strong> -&gt; <strong>Auth</strong> 內(如下圖)<br><img src='images/SSH+KeyGen+&+Connect+Tutorial-Windows-b1.png' width='500' align='center'/></p>
<p>點選 <strong>Browse...</strong> 後選擇您的private key加入</p>
<p>為確保您使用Putty時不會出現中文亂碼,您可於左邊的Category表單中點選 <strong>Window</strong> -&gt; <strong>Translation</strong></p>
<p><img src='images/SSH+KeyGen+&+Connect+Tutorial-Windows-b2.png' width='500' align='center'/></p>
<p>於右方 <strong>Remote Character set:</strong> 的下拉式選單中選擇 <strong>UTF-8</strong></p>
<p>為了下次能夠方便使用,請於左邊的Category表單中點選<strong>Session</strong></p>
<p><img src='images/SSH+KeyGen+&+Connect+Tutorial-Windows-b4.png' width='500' align='center'/></p>
<p>回到Session後,點選右方的Save</p>
<p>這樣下次要連線這台機器時你就不用特別再去設定,只需要於左方Saved Sessions中左鍵雙擊你存下來的那個名子即可.</p>
<p><img src='images/SSH+KeyGen+&+Connect+Tutorial-Windows-b3.png' width='500' align='center'/></p>
<p>進入Putty後,他會要求你輸入帳號(Login as:),請輸入root</p>
<p><font color="red">(註：連線時，請使用root登入，可不用輸入密碼：若使用預設帳號jill登入，則請參照Customer Portal上Credential設定。)</font><br><img src='images/SSH+KeyGen+&+Connect+Tutorial-Windows-b6.png' width='500' align='center'/><br><img src='images/SSH+KeyGen+&+Connect+Tutorial-Windows-b5.png' width='500' align='center'/></p>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="SSH+KeyGen+Connect+Tutorial-Linux+or+Unix.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="html/SSH+KeyGen+Connect+Tutorial-Linux+or+Unix.html">金鑰產生與連線教學(Linux/Unix)</a>&nbsp;<a href="index.html?page=SSH+KeyGen+Connect+Tutorial-Linux+or+Unix.md">(SSH+KeyGen+Connect+Tutorial-Linux+or+Unix.md)</a><a href="#SSH+KeyGen+Connect+Tutorial-Linux+or+Unix.md"></a></h1><br/><h1>金鑰產生與連線教學(Linux/Unix)</h1>
<h2>SSH Key 限制</h2>
<p>MiCloud SSH Key模組使用上有下面限制，使用前需要特別注意：</p>
<ol>
<li>SSH Key僅適用於SmartOS及Linux主機，Windows主機不適用。</li>
<li>Linux server之SSH Key必須於server建立前匯入，如於Server建立後匯入之SSH Key將無法使用於Linux主機上(但SmartOS可以使用)。</li>
<li><font color="red">申請Linux主機者，建議務必修改root密碼，並妥善保存，避免SSH Key遺漏時候造成無法連線問題。</font>



</li>
</ol>
<p>影片:<a href="http://www.youtube.com/watch?v=MUxTHgrMj-E">MiCloud SSH金鑰產生教學(Linux/Unix)</a></p>
<p><div align="center"></p>
<p><embed width="420" height="345" src="http://www.youtube.com/v/MUxTHgrMj_E&hd=1" type="application/x-shockwave-flash"></embed><br></div></p>
<h2>MiCloud SSH Key 管理功能</h2>
<p>MiCloud提供SSH Key的管理模組，您可透過MiCloud Customer Portal(<a href="http://micloud.tw">http://micloud.tw</a> )進行SSH Key的上傳與管理，透過SSH協定與SSH Key的認證，將可確保您與您伺服器之間的連線安全。</p>
<p>SSH Key上傳與管理，請參考 <a href="/html/SSH+KeyGen+Connect+Tutorial-Windows.html">&quot;使用Windows連線SmartMachine&quot;</a> 說明</p>
<h2>Linux/Unix Like 系統建立SSH-KEY與使用方法</h2>
<p>產生SSH Key:</p>
<pre><code>ssh-keygen -t rsa</code></pre>
<p>產生過程如下：</p>
<pre><code>Generating public/private rsa key pair.
Enter file in which to save the key (/root/.ssh/id_rsa):    #按Enter繼續下一步
/root/.ssh/id_rsa already exists.
Overwrite (yes/no)? yes                            #如果已經存在會詢問是否覆蓋
Enter passphrase (empty for no passphrase):            #按Enter繼續下一步
Enter same passphrase again:                    #按Enter繼續下一步
Your identification has been saved in /root/.ssh/id_rsa.    #private key (預設產出路徑為$HOME/.ssh)
Your public key has been saved in /root/.ssh/id_rsa.pub.    #public key
The key fingerprint is:
ad:a2:53:fc:2c:eb:f1:3a:3d:6b:44:92:29:33:f0:a5 root@XXXXX.local</code></pre>
<p>確定並複製產出的SSH Key:</p>
<pre><code>cd $HOME/.ssh/        #切換到SSH Key的預設資料匣
cat id_rsa.pub        #讀取產出的金鑰檔案</code></pre>
<p>公開金鑰產出格式一不同機器略有不同，但大至上類似下面一串文字：</p>
<pre><code>ssh-rsa AAAAB3NzaC1yc2EAAAABIwAAAQEAsU6C3X3dwtRcpHDGb1nrYOmdWwsLAu1DVtR+UebO53Cr
QWl7j/FKcLQFPRliiIIsR0rmt5+8s3JyIwkpd+2Ci5Szvhs/URpVhtoei4Xn0TMQg/I/8ZnKHxAsZ2tg
r91eLfYSbMGqqkqS371G68HFDqTgjSAOoPUTWms8afMZ67B/Fr3Yrt8egEaSdpTw== root@XXXX</code></pre>
<p>複製這段文字貼於網頁中的SSH-Key欄位中即可</p>
<p>下圖為Linux參考畫面:</p>
<p><img src='images/SSH+KeyGen+&+Connect+Tutorial-Linux+or+Unix-linux-key.png' width='500' align='center'/></p>
<h2>Linux/Unix Like 系統連線方式</h2>
<p>使用 openssh client，請帶參數-i來使用剛剛所建的id_rsa這個private ssh key。</p>
<p>例如：</p>
<pre><code>ssh -i id_rsa root@211.123.123.31</code></pre>
<h2>Linux 主機更新SSH Key</h2>
<p>MiCloud Linux主機於開通主機時會將您帳戶資料中之SSH Key匯入新開通的Linux主機中，匯入的目錄位於：$HOME/.ssh/authorized_keys檔案中，此為一次性設定，日後再登錄至MiCloud Customer Portal之SSH Key將不會再寫入Linux主機中(SmartOS之認證為結合SSH Key Database之認證，因此不在此限制下)。若您需要更新SSH Key，可採下面步驟：</p>
<ul>
<li><p>產生SSH Key:<br>請參考：“MiCloud自助服務操作資訊 &gt; SSH金鑰相關使用教學”中金鑰產生部分。</p>
</li>
<li><p>將Public Key寫入Server端$HOME/.ssh/authorized_keys檔案中，以斷行隔開</p>
</li>
</ul>
<pre><code>vi $HOME/.ssh/authorized_keys</code></pre>
<p>增加您產生的public key至該檔案中</p>
<h2>Joyent Wiki使用SSH連線教學與資訊</h2>
<ul>
<li>SSH金鑰產生與設定：<a href="http://wiki.joyent.com/display/gen/SSH+Guide">http://wiki.joyent.com/display/gen/SSH+Guide</a></li>
<li>SSH連線緩慢之設定調整：<a href="http://wiki.joyent.com/display/gen/SSH+Guide#SSHGuide-SSHslowfromUbuntuLinuxorCygwin">http://wiki.joyent.com/display/gen/SSH+Guide#SSHGuide-SSHslowfromUbuntuLinuxorCygwin</a></li>
</ul>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="SSH+KeyGen+Connect+Tutorial-MacOS.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="html/SSH+KeyGen+Connect+Tutorial-MacOS.html">金鑰產生與連線教學(MacOS)</a>&nbsp;<a href="index.html?page=SSH+KeyGen+Connect+Tutorial-MacOS.md">(SSH+KeyGen+Connect+Tutorial-MacOS.md)</a><a href="#SSH+KeyGen+Connect+Tutorial-MacOS.md"></a></h1><br/><h1>金鑰產生與連線教學(MacOS)</h1>
<h2>SSH Key 限制</h2>
<p>MiCloud SSH Key模組使用上有下面限制，使用前需要特別注意：</p>
<ol>
<li>SSH Key僅適用於SmartOS及Linux主機，Windows主機不適用。</li>
<li>Linux server之SSH Key必須於server建立前匯入，如於Server建立後匯入之SSH Key將無法使用於Linux主機上(但SmartOS可以使用)。</li>
<li><font color="red">申請Linux主機者，建議務必修改root密碼，並妥善保存，避免SSH Key遺漏時候造成無法連線問題。</font>



</li>
</ol>
<h2>MiCloud SSH Key 管理功能</h2>
<p>MiCloud提供SSH Key的管理模組，您可透過MiCloud Customer Portal(<a href="http://micloud.tw">http://micloud.tw</a>) 進行SSH Key的上傳與管理，透過SSH協定與SSH Key的認證，將可確保您與您伺服器之間的連線安全。</p>
<p>SSH Key上傳與管理，<a href="/html/SSH+KeyGen+Connect+Tutorial-Windows.html">&quot;使用Windows連線SmartMachine&quot;</a> 說明</p>
<h2>Mac OS 建立 SSH-KEY 與使用方法</h2>
<p>產生SSH Key:</p>
<pre><code>ssh-keygen -t rsa</code></pre>
<p>產生過程如下：<br><img src='images/SSH+KeyGen+&+Connect+Tutorial-MacOS-pic1.png' width='500' align='center'/><br>上圖底下的兩個紅色框框的內容為您的私鑰與公鑰所擺放的位置。</p>
<pre><code>cd /user/[您的帳號資料夾]/.ssh    #切換到SSH Key的預設資料匣](cd /user/[您的帳號資料夾/.ssh    #切換到SSH Key的預設資料匣)
ls                              #查看該資料夾底下是否正確產生id_rsa(private key)及id_rsa.pub(public key)兩個檔案
cat id_rsa.pub                #讀取產出的金鑰檔案</code></pre>
<p><img src='images/SSH+KeyGen+&+Connect+Tutorial-MacOS-pic2.png' width='500' align='center'/><br>公開金鑰產出格式一不同機器略有不同。</p>
<p>複製上圖下方紅色框框內的文字貼於網頁中的SSH-Key欄位中即可</p>
<h2>Mac OS 連線方式</h2>
<p>使用 openssh client，請帶參數-i來使用剛剛所建的id_rsa這個private ssh key。</p>
<p>例如：</p>
<pre><code>ssh -i id_rsa root@211.123.123.31</code></pre>
<p><img src='images/SSH+KeyGen+&+Connect+Tutorial-MacOS-pic3.png' width='500' align='center'/></p>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="Free+machine+Connect+Tutorial.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="html/Free+machine+Connect+Tutorial.html">主機金鑰設置與連線教學  </a>&nbsp;<a href="index.html?page=Free+machine+Connect+Tutorial.md">(Free+machine+Connect+Tutorial.md)</a><a href="#Free+machine+Connect+Tutorial.md"></a></h1><br/><h1>主機金鑰設置與連線教學</h1>
<p>說明：本次公測主機為MiCloud 2XS型號主機，為小於一般市場提供之虛擬主機機型，提供一般網頁服務應用與開發使用，其中網路連線部分提供Public DNS，讓您用主機之專屬DNS連線，連線方式請參考下面說明：</p>
<p>您申請免費30天試用服務後，SmartOS/Linux主機連線必須透過SSH協定與SSH Key的認證，以確保您與您的伺服器之間的連線安全。</p>
<p>1.若您已設定ssh key則使用您原本的私鑰進行連線</p>
<p>2.<font color='blue'>若您尚未設定ssh key則系統會發送一組私鑰和公鑰給您,相關設定如下:</font></p>
<h2>Linux/MacOS主機</h2>
<p>如您為Linux或MacOS用戶，在登入平台後，選擇主機，點選下方紅色框框部分的任何一台主機，會進入主機的細項畫面，您可以看到如下資訊：</p>
<p><img src='images/Free+machine+&+Connect+Tutorial-machine1.jpg' width='650' align='center'/></p>
<p><img src='images/Free+machine+&+Connect+Tutorial-dnsport.jpg' width='650' align='center'/></p>
<p>請直接使用下面指令連線：</p>
<pre><code>ssh root@your.domain.name -p ssh_port -i your_private_key</code></pre>
<p>ex:</p>
<pre><code>ssh root@192-168-255-13.my.micloud.tw -p 65013 -i ~/.ssh/id_rsa</code></pre>
<h2>Windows主機(使用Putty工具連線範例)</h2>
<p>由於Putty採用特有格式的puk檔案來封裝SSH Key，因此必須透過Putty相關工具將MiCloud產出之Key File進行轉換，轉換動作如下：</p>
<p>(1)將信件中的私鑰下載至您的電腦中，如下圖。</p>
<p><img src='images/Free+machine+&+Connect+Tutorial-key.png' width='500' align='center'/></p>
<p>(2)於下列網址下載PuTTy、Pageant and PuTTYgen，該工具可以協助您進行SSH Key的建立與SSH的連線。</p>
<p>&nbsp;&nbsp;&nbsp;網址為:<a href="http://www.chiark.greenend.org.uk/~sgtatham/putty/download.html"><a href="http://www.chiark.greenend.org.uk/~sgtatham/putty/download.html">http://www.chiark.greenend.org.uk/~sgtatham/putty/download.html</a></a></p>
<p><img src='images/Free+machine+&+Connect+Tutorial-putty.jpg' width='500' align='center'/></p>
<p>(3)執行puttygen.exe並點選Load，”檔案類型”選擇所有檔案，匯入您所下載的key</p>
<p><img src='images/Free+machine+&+Connect+Tutorial-load.jpg' width='500' align='center'/></p>
<p><img src='images/Free+machine+&+Connect+Tutorial-file.jpg' width='500' align='center'/></p>
<p>(4)匯入後會才會產生putty可執行的key，並將此金鑰儲存，即可關閉程式。</p>
<p><img src='images/Free+machine+&+Connect+Tutorial-save.jpg' width='500' align='center'/></p>
<p><img src='images/Free+machine+&+Connect+Tutorial-save2.jpg' width='500' align='center'/></p>
<p>(5)開啟pageant.exe執行後程式會在螢幕的右下角如下圖:</p>
<p><img src='images/Free+machine+&+Connect+Tutorial-pageant.jpg' width='500' align='center'/></p>
<p>點開後按下Add key按鈕，將上面所儲存的key開啟。</p>
<p><img src='images/Free+machine+&+Connect+Tutorial-addkey.jpg' width='500' align='center'/></p>
<p><img src='images/Free+machine+&+Connect+Tutorial-addkey2.jpg' width='500' align='center'/></p>
<p>(6)新增完後請先登入平台選擇主機，檢視主機的細項畫面，再開啟putty.exe，hostname為DNS，設定完按下open按鈕，進入putty後輸入root即可使用。</p>
<p><img src='images/Free+machine+&+Connect+Tutorial-machine.jpg' width='650' align='center'/></p>
<p><img src='images/Free+machine+&+Connect+Tutorial-dnsport1.jpg' width='650' align='center'/></p>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="File+Upload+Tutorial-PSCP.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="html/File+Upload+Tutorial-PSCP.html">使用指令上傳檔案(Windows至Linux)</a>&nbsp;<a href="index.html?page=File+Upload+Tutorial-PSCP.md">(File+Upload+Tutorial-PSCP.md)</a><a href="#File+Upload+Tutorial-PSCP.md"></a></h1><br/><h1>使用指令上傳檔案(Windows至Linux)</h1>
<h2>檔案上傳教學(指令)</h2>
<p>影片:<a href="http://www.youtube.com/watch?v=Ha17-BbePI4">MiCloud 使用 PSCP 配合 SSH-Key(.ppk) 上傳與下載檔案</a></p>
<p><div align="center"></p>
<p><embed width="420" height="345" src="http://www.youtube.com/v/Ha17-BbePI4&hd=1" type="application/x-shockwave-flash"></embed><br></div></p>
<h2>使用 PSCP 配合 SSH-Key(.ppk) 上傳與下載檔案</h2>
<h2>設定環境變數</h2>
<ul>
<li>選擇一個資料夾放置 Putty 相關檔案(putty.exe,pscp.exe...)</li>
</ul>
<p>本範例放在 <strong>C:\putty</strong> 資料夾內</p>
<p><img src='images/File+Upload+Tutorial-PSCP-a.png' width='600' align='center'/><br>*  於我的電腦空白處按右鍵,選擇 <strong>內容</strong></p>
<p><img src='images/File+Upload+Tutorial-PSCP-a1.png' width='600' align='center'/><br>*  於內容之上方表單選擇 <strong>進階</strong> ,於下方點選 <strong>環境變數(N)</strong></p>
<p><img src='images/File+Upload+Tutorial-PSCP-a2.png' width='400' align='center'/><br>*  於下方 <strong>系統變數(S)</strong> 中下拉,點選變數 <strong>Path</strong> , 使用編輯(I)</p>
<p>於變數值最後加上<strong>分號(;)</strong>接著加上您putty所在資料夾的路徑</p>
<p>本範例則是加上 <strong>;C:\putty</strong><br><img src='images/File+Upload+Tutorial-PSCP-a3.png' width='400' align='center'/><br><em>  按下 <strong>開始</strong> -&gt; <strong>執行(R)</strong> -&gt; 輸入 <strong>cmd</strong> -&gt; 按下 <strong>確定</strong> 後便會開啟命令提示字元<br><img src='images/File+Upload+Tutorial-PSCP-a4.png' width='400' align='center'/>
</em>  在命令提示字元中輸入 <strong>pscp</strong> 測試環境變數之設定是否成功<br><img src='images/File+Upload+Tutorial-PSCP-a5.png' width='650' align='center'/></p>
<h2>Putty 連線設定</h2>
<p>左鍵雙擊下載之putty.exe，下圖為putty執行畫面：</p>
<p>請於<strong>Host Name (or IP address)</strong>內輸入您機器的IP,<br><strong>Port</strong> 則是輸入 <strong>22</strong> (22為MiCloud的預設SSH連接阜)</p>
<p>下方的 <strong>Saved Sessions</strong> 則是給您下次使用時能夠辨別這是哪一台機器用,所以能可以以您希望的名字命名,也可以使用當台機器的IP作為命名.</p>
<p><img src='images/File+Upload+Tutorial-PSCP-b1.png' width='500' align='center'/><br>輸入完成後請於左邊的Category表單中點選 <strong>Connection</strong> -&gt; <strong>SSH</strong> -&gt; <strong>Auth</strong> 內(如下圖)</p>
<p>點選 <strong>Browse...</strong> 後選擇您的private key加入</p>
<p><img src='images/File+Upload+Tutorial-PSCP-b2.png' width='500' align='center'/></p>
<p>為確保您使用Putty時不會出現中文亂碼,您可於左邊的Category表單中點選 <strong>Window</strong> -&gt; <strong>Translation</strong></p>
<p>於右方 <strong>Remote Character set:</strong> 的下拉式選單中選擇 <strong>UTF-8</strong></p>
<p><img src='images/File+Upload+Tutorial-PSCP-b4.png' width='500' align='center'/></p>
<p>為了下次能夠方便使用,請於左邊的Category表單中點選<strong>Session</strong></p>
<p>回到Session後,點選右方的Save</p>
<p>這樣下次要連線這台機器時你就不用特別再去設定,只需要於左方Saved Sessions中左鍵雙擊你存下來的那個名子即可.</p>
<p><img src='images/File+Upload+Tutorial-PSCP-b3.png' width='500' align='center'/></p>
<p>進入Putty後,他會要求你輸入帳號(Login as:),請輸入root</p>
<p><font color="red">(註：連線時，請使用root登入，可不用輸入密碼：若使用預設帳號jill登入，則請參照Customer Portal上Credential設定。)</font><br><img src='images/File+Upload+Tutorial-PSCP-b6.png' width='500' align='center'/><br><img src='images/File+Upload+Tutorial-PSCP-b5.png' width='500' align='center'/></p>
<h2>PSCP 指令介紹</h2>
<p>於MS-DOS 命令的視窗中輸入指令即可上傳與下載檔案<br>*  <font color="red">(1)  pscp  拷貝檔案(絕對路徑)  使用者(root)@電腦地址(IP):新檔名(絕對路徑)    - 從 MS Window 拷貝到 Linux 電腦</p>
<p></font><br>ex : 我要從我正在使用的電腦,放在C槽中的資料夾Windows_Test底下有一個upload.cpp的檔案,上傳到我在MiCloud申請的電腦(123.123.123.123)中,並放在/home/Linux_Test底下</p>
<p>所以我的指令會是 : pscp c:\Windows_Testupload.cpp root@123.123.123.123:/home/Linux_Test<br>*  <font color="red">(2)  pscp  使用者(root)@電腦地址(IP):拷貝檔案(絕對路徑)  新檔名(絕對路徑)    - 從 Linux 拷貝到 MS Window 電腦</p>
<p></font><br>ex : 我要從我在MiCloud申請的電腦(123.123.123.123)中抓一個download.cpp的檔案,它放在/home/Linux_Test底下,並將它放到我的電腦C槽中的資料夾Windows_Test底下</p>
<p>所以我的指令會是 : pscp root@123.123.123.123:/home/Linux_Test/download.cpp c:\Windows_Test<br><img src='images/File+Upload+Tutorial-PSCP-a6.png' width='650' align='center'/></p>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="File+Upload+Tutorial-Linux+or+Unix.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="html/File+Upload+Tutorial-Linux+or+Unix.html">使用指令上傳檔案(Linux/Unix)</a>&nbsp;<a href="index.html?page=File+Upload+Tutorial-Linux+or+Unix.md">(File+Upload+Tutorial-Linux+or+Unix.md)</a><a href="#File+Upload+Tutorial-Linux+or+Unix.md"></a></h1><br/><h1>使用指令上傳檔案(Linux/Unix)</h1>
<h2>Linux/Unix Like 檔案傳輸</h2>
<p>使用 openssh client，請帶參數 -i 來使用 private ssh key。</p>
<p>上傳：</p>
<pre><code>scp -i id_rsa /home/Test/upload.txt root@211.123.123.123:/home/Test_2</code></pre>
<p><img src='images/File+Upload+Tutorial-Linux+or+Unix-l4.png' width='720' align='center'/><br>下載：</p>
<pre><code>scp -i id_rsa root@211.123.123.123:/home/Test_2/download.txt /home/Test</code></pre>
<p><img src='images/File+Upload+Tutorial-Linux+or+Unix-l3.png' width='720' align='center'/></p>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="File+Upload+Tutorial-MacOS.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="html/File+Upload+Tutorial-MacOS.html">使用指令上傳檔案(MacOS)</a>&nbsp;<a href="index.html?page=File+Upload+Tutorial-MacOS.md">(File+Upload+Tutorial-MacOS.md)</a><a href="#File+Upload+Tutorial-MacOS.md"></a></h1><br/><h1>使用指令上傳檔案(MacOS)</h1>
<h2>Mac OS 檔案傳輸</h2>
<p>使用 openssh client，請帶參數 -i 來使用 private ssh key。</p>
<p>上傳：</p>
<pre><code>scp -i id_rsa ./MiCRM.tgz root@211.123.123.123:/root/</code></pre>
<p><img src='images/File+Upload+Tutorial-MacOS-l2.png' width='650' align='center'/><br>下載：</p>
<pre><code>scp -i id_rsa root@211.123.123.123:/tmp/MiCRM.tgz .</code></pre>
<p><img src='images/File+Upload+Tutorial-MacOS-l1.png' width='650' align='center'/></p>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="File+Upload+Tutorial-WinScp.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="html/File+Upload+Tutorial-WinScp.html">使用軟體上傳檔案(WinScp)</a>&nbsp;<a href="index.html?page=File+Upload+Tutorial-WinScp.md">(File+Upload+Tutorial-WinScp.md)</a><a href="#File+Upload+Tutorial-WinScp.md"></a></h1><br/><h1>使用軟體上傳檔案(WinScp)</h1>
<h2>檔案上傳教學(WinScp)</h2>
<p>影片:<a href="http://www.youtube.com/watch?v=O-HDpdX7mD8">MiCloud 使用 WinScp 配合 SSH-Key(.ppk) 上傳與下載檔案</a></p>
<p><div align="center"></p>
<p><embed width="420" height="345" src="http://www.youtube.com/v/O-HDpdX7mD8&hd=1" type="application/x-shockwave-flash"></embed><br></div></p>
<h2>使用 WinScp 配合 SSH-Key(.ppk) 上傳與下載檔案</h2>
<h2>WinScp 使用 SSH-key(.ppk) 與 MiCloud 機器連線</h2>
<p><strong>輸入 Session 內之欄位(紅色框框)</strong></p>
<p>Host name : 輸入您的主機IP</p>
<p>Port number : 22   (22為MiCloud的預設SSH連接阜)</p>
<p>User name : root   (root為MiCloud的預設帳號)</p>
<p>Password : 空白即可</p>
<p>Private key file : 點選右方藍色框框,選擇您的 Private Key(.ppk)</p>
<p><img src='images/File+Upload+Tutorial-WinScp-winscp1.png' width='500' align='center'/><br>輸入完成後點選Login<br><img src='images/File+Upload+Tutorial-WinScp-winscp2.png' width='650' align='center'/></p>
<h2>WinScp 上傳與下載檔案</h2>
<p>成功登入後,左邊紅色框框為你本機的資料夾,右邊藍色框框為你連線過去的電腦資料夾.</p>
<p>如果要上傳A檔案,只需要從左邊紅色框框內找出那份檔案後,將其拖曳去右邊的資料夾即可.</p>
<p>同理,如果要下載A檔案至你本機電腦,只需在右邊藍色框框內找出您的檔案後,拖曳至左邊紅色框框內即可.<br><img src='images/File+Upload+Tutorial-WinScp-winscp3.png' width='650' align='center'/></p>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="File+Upload+Tutorial-FileZilla.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="html/File+Upload+Tutorial-FileZilla.html">使用軟體上傳檔案(FileZilla)</a>&nbsp;<a href="index.html?page=File+Upload+Tutorial-FileZilla.md">(File+Upload+Tutorial-FileZilla.md)</a><a href="#File+Upload+Tutorial-FileZilla.md"></a></h1><br/><h1>使用軟體上傳檔案(FileZilla)</h1>
<h2>檔案上傳教學(FileZilla)</h2>
<p>影片:<a href="http://www.youtube.com/watch?v=m-CBesKRE6s">MiCloud 使用 FileZilla 配合 SSH-Key(.ppk) 上傳與下載檔案</a></p>
<p><div align="center"></p>
<p><embed width="420" height="345" src="http://www.youtube.com/v/m_CBesKRE6s&hd=1" type="application/x-shockwave-flash"></embed><br></div></p>
<h2>使用 FileZilla 配合 SSH-Key(.ppk) 上傳與下載檔案</h2>
<h2>加入 SSH-Key (紅色框框與黑色箭頭)</h2>
<p>開啟 FileZilla 後,於 <strong>編輯(E)</strong> 內點選 <strong>設定(S)...</strong></p>
<p>於左方欄位選擇 <strong>SFTP</strong> ,點選 <strong>加入金鑰檔案(A)...</strong></p>
<p>選擇您的 Private Key 加入,完成後點選 <strong>確認</strong> .</p>
<h2>輸入相關設定(黃色框框)</h2>
<p>主機(H):輸入您的主機IP</p>
<p>使用者名稱(U):root   (root為MiCloud的預設帳號)</p>
<p>密碼(W):空白即可</p>
<p>連接阜(P):22   (22為MiCloud的預設SSH連接阜)</p>
<p><img src='images/File+Upload+Tutorial-FileZilla-fz.png' width='650' align='center'/></p>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="File+Upload+Tutorial-Windows+to+Windows.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="html/File+Upload+Tutorial-Windows+to+Windows.html">使用指令上傳檔案(Windows至Windows)</a>&nbsp;<a href="index.html?page=File+Upload+Tutorial-Windows+to+Windows.md">(File+Upload+Tutorial-Windows+to+Windows.md)</a><a href="#File+Upload+Tutorial-Windows+to+Windows.md"></a></h1><br/><h1>使用指令上傳檔案(Windows至Windows)</h1>
<h2>檔案上傳與下載教學(Windows至Windows)</h2>
<p>要從MiCloud Windows Server上進行軟體或檔案的上下載有許多方式，在此建議您使用網路芳鄰方式來進行檔案傳輸。</p>
<p>下面介紹相關設定方式：</p>
<h2>遠端登入Windows Server 2008 設定資料夾分享</h2>
<ol>
<li>新增資料夾並加以命名</li>
</ol>
<p><img src='images/File+Upload+Tutorial-Windows+to+Windows-z1.png' width='450' align='center'/></p>
<ol>
<li>在您要開啟共用的資料夾按下滑鼠右鍵選擇內容,並點選上方列表切換至共用頁面</li>
</ol>
<p><img src='images/File+Upload+Tutorial-Windows+to+Windows-p+-3.png' width='500' align='center'/><br>3. 點選&quot;進階共用(D)&quot;</p>
<p><img src='images/File+Upload+Tutorial-Windows+to+Windows-p+-4.png' width='500' align='center'/><br>4. 勾選共用資料夾,點選完後可於下方點選&quot;權限（P）&quot;,進入選擇您想給他人登入使用的權限</p>
<p><img src='images/File+Upload+Tutorial-Windows+to+Windows-p+-5.png' width='500' align='center'/><br><img src='images/File+Upload+Tutorial-Windows+to+Windows-p6.png' width='500' align='center'/></p>
<h2>在Windows系統下，上傳與下載檔案</h2>
<ol>
<li>開始 -&gt; 執行 , 再填入您的ip（ex：&quot;<strong>//IP</strong>&quot;）<br><img src='images/File+Upload+Tutorial-Windows+to+Windows-p+-6.png' width='500' align='center'/><br><img src='images/File+Upload+Tutorial-Windows+to+Windows-p+-7.png' width='500' align='center'/></li>
<li>輸入您的帳號密碼 ,就能開始上傳與下載檔案<br><img src='images/File+Upload+Tutorial-Windows+to+Windows-id.png' width='500' align='center'/><br><img src='images/File+Upload+Tutorial-Windows+to+Windows-p+-8.png' width='500' align='center'/></li>
</ol>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="File+Upload+Tutorial-Linux+to+Windows.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="html/File+Upload+Tutorial-Linux+to+Windows.html">使用指令上傳檔案(Linux至Windows)</a>&nbsp;<a href="index.html?page=File+Upload+Tutorial-Linux+to+Windows.md">(File+Upload+Tutorial-Linux+to+Windows.md)</a><a href="#File+Upload+Tutorial-Linux+to+Windows.md"></a></h1><br/><h1>使用指令上傳檔案(Linux至Windows)</h1>
<h2>檔案上傳與下載教學(Linux至Windows)</h2>
<p>要從MiCloud Windows Server上進行軟體或檔案的上下載有許多方式，在此建議您使用網路芳鄰方式來進行檔案傳輸。</p>
<p>下面介紹相關設定方式：</p>
<h2>遠端登入Windows Server 2008 設定資料夾分享</h2>
<ol>
<li>新增資料夾並加以命名</li>
</ol>
<p><img src='images/File+Upload+Tutorial-Linux+to+Windows-z1.png' width='450' align='center'/></p>
<ol>
<li>在您要開啟共用的資料夾按下滑鼠右鍵選擇內容,並點選上方列表切換至共用頁面</li>
</ol>
<p><img src='images/File+Upload+Tutorial-Linux+to+Windows-p+-3.png' width='500' align='center'/><br>3. 點選&quot;進階共用(D)&quot;</p>
<p><img src='images/File+Upload+Tutorial-Linux+to+Windows-p+-4.png' width='500' align='center'/><br>4. 勾選共用資料夾,點選完後可於下方點選&quot;權限（P）&quot;,進入選擇您想給他人登入使用的權限</p>
<p><img src='images/File+Upload+Tutorial-Linux+to+Windows-p+-5.png' width='500' align='center'/><br><img src='images/File+Upload+Tutorial-Linux+to+Windows-p6.png' width='500' align='center'/></p>
<h2>在Linux系統下，上傳與下載檔案</h2>
<ol>
<li><p>先將視窗點選到桌面，於左上角點選 File -&gt; Connect to Server...<br><img src='images/File+Upload+Tutorial-Linux+to+Windows-l1.png' width='500' align='center'/></p>
</li>
<li><p>輸入相關資訊</p>
</li>
</ol>
<ul>
<li>Server:輸入您將上傳或下載的機器的ip</li>
<li>Domain name:輸入micloud.tw</li>
<li>User name:輸入您的帳號</li>
<li>Password:輸入您的密碼<br><img src='images/File+Upload+Tutorial-Linux+to+Windows-l2.png' width='500' align='center'/><br>.3. 進入後便可看到您共用的資料夾<br><img src='images/File+Upload+Tutorial-Linux+to+Windows-l3.png' width='500' align='center'/><br>.4. 若您要進一步上傳或下載檔案,需再次驗證您要登入的角色 , 然後您就能開始上傳與下載檔案<br><img src='images/File+Upload+Tutorial-Linux+to+Windows-l4.png' width='500' align='center'/><br><img src='images/File+Upload+Tutorial-Linux+to+Windows-l5.png' width='500' align='center'/></li>
</ul>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="Setting+hostname+on+SmartOS.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="html/Setting+hostname+on+SmartOS.html">SmartOS Hostname設置</a>&nbsp;<a href="index.html?page=Setting+hostname+on+SmartOS.md">(Setting+hostname+on+SmartOS.md)</a><a href="#Setting+hostname+on+SmartOS.md"></a></h1><br/><h1>SmartOS Hostname設置</h1>
<p>當您申請MiCloud上任何主機時，若未指定主機名稱，系統將預設以亂數產生一串文字做為您的主機名稱，可能類似：fxyzabcd.local的名稱。您可以以IP登入您的主機，並透過&quot;hostname&quot;之指令看到您的Hostname。</p>
<p>如您需要重設您的主機名稱，您可以修改某些檔案來達到修改Hostname的目的，詳細說明如下:</p>
<p>SmartMachine需要修改的檔案如下:</p>
<ul>
<li>/etc/hosts：修改此檔案，讓您的主機本身認得此Hostname</li>
<li>/etc/nodename：此檔案為主要Hostname所讀取的檔案</li>
<li>/etc/inet/ipnodes：此檔案為/etc/hosts之symbolic link，主要存放主機靜態路由之IP/Name對應</li>
</ul>
<p>1.修改檔案：/etc/hosts (也是/etc/inet/ipnodes)，加上您主機之新名稱，並對應到::1、127.0.0.1與您的主機IP(視申請服務類型而定，您的主機可能擁有一個或一個以上的內部或外部IP)指令為:</p>
<pre><code>#vi /etc/hosts</code></pre>
<p>於下方畫面紅色框框更改您的主機名稱<br><img src='images/Setting+hostname+on+SmartOS-smhostname.jpg' width='500' align='center'/></p>
<p>2.修改hostname設定檔：/etc/nodename，指令如下:</p>
<pre><code>#vi /etc/nodename</code></pre>
<p>於下方畫面紅色框框更改您新的主機名稱<br><img src='images/Setting+hostname+on+SmartOS-smhostname2.jpg' width='500' align='center'/></p>
<p>設定完畢後，重新開啓主機則會生效(您可以直接使用&quot;reboot&quot;指令重開或至<a href="http://portal.micloud.tw/">自助服務平台</a></p>
<p>當您設定好，並<a href="/html/Server+Restart+From+Portal.html">重開主機</a>後，您可以使用下面指令驗證：</p>
<pre><code>#hostname</code></pre>
<font color='red'>※若您的服務需要對外提供時，您會需要設定DNS記錄，相關指令如下:</font>


<p>請您先向信任之網域名稱服務公司申請DNS，並將您主機名稱的紀錄指定至您上面所設定的網域名稱(smartos.example.com)。</p>
<p>若您己有申請及設定好DNS服務，可以透過下面指令檢查您的網域名稱是否生效:</p>
<pre><code>host + 網域名稱</code></pre>
<p>以micloud為例：</p>
<pre><code># host portal.micloud.tw</code></pre>
<p><img src='images/Setting+hostname+on+SmartOS-host.png' width='500' align='center'/></p>
<p>或者您可以透過nslookup檢查您的網域名稱是否與IP對應：</p>
<pre><code>nslookup + 網域名稱</code></pre>
<p>以micloud為例：</p>
<pre><code># nslookup portal.micloud.tw</code></pre>
<p><img src='images/Setting+hostname+on+SmartOS-nslookup.png' width='500' align='center'/></p>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="Setting+hostname+on+Linux.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="html/Setting+hostname+on+Linux.html">Linux Hostname設置</a>&nbsp;<a href="index.html?page=Setting+hostname+on+Linux.md">(Setting+hostname+on+Linux.md)</a><a href="#Setting+hostname+on+Linux.md"></a></h1><br/><h1>Linux Hostname設置</h1>
<p>當您申請MiCloud上任何主機時，若未指定主機名稱，系統將預設以亂數產生一串文字做為您的主機名稱，可能類似：fxyzabcd.local的名稱。您可以以IP登入您的主機，並透過&quot;hostname&quot;之指令看到您的Hostname。<br>如您需要重設您的主機名稱，您可以修改某些檔案來達到修改Hostname的目的，不同的作業系統需要更改的檔案並不相同，詳細說明如下:</p>
<h2>Debian</h2>
<p>您需要修改的檔案如下:</p>
<ul>
<li>/etc/hostname</li>
<li>/etc/hosts</li>
</ul>
<p>(1)修改/etc/hostname，指令如下:</p>
<pre><code>#vi /etc/hostname</code></pre>
<p>於下方畫面紅色框框更改您新的主機名稱<br><img src='images/Setting+hostname+on+Linux-dehostname.jpg' width='650px' align='center'/></p>
<p>(2)修改/etc/hosts，指令如下:</p>
<pre><code>#vi /etc/hosts</code></pre>
<p>於下方畫面紅色框框更改您的主機名稱<br><img src='images/Setting+hostname+on+Linux-dehostname2.jpg' width='650px' align='center'/></p>
<p>(3)修改完後執行下方指令主機名稱即被更改。</p>
<pre><code>#/etc/init.d/hostname.sh start</code></pre>
<p>當您設定好，您可以使用下面指令驗證：</p>
<pre><code>#hostname</code></pre>
<hr>
<h2>Ubuntu</h2>
<p>您需要修改的檔案如下:</p>
<ul>
<li>/etc/hostname</li>
<li>/etc/hosts</li>
</ul>
<p>(1)修改/etc/hostname，指令如下:</p>
<pre><code>#vi /etc/hostname</code></pre>
<p>於下方畫面紅色框框更改您新的主機名稱<br><img src='images/Setting+hostname+on+Linux-ubhostname.jpg' width='650px' align='center'/></p>
<p>(2)修改/etc/hosts，指令如下:</p>
<pre><code>#vi /etc/hosts</code></pre>
<p>於下方畫面紅色框框更改您的主機名稱<br><img src='images/Setting+hostname+on+Linux-ubhostname2.jpg' width='650px' align='center'/></p>
<p>(3)修改完後執行下方指令主機名稱即被更改。</p>
<pre><code>#start hostname</code></pre>
<p>當您設定好，您可以使用下面指令驗證：</p>
<pre><code>#hostname</code></pre>
<hr>
<h2>CentOS</h2>
<p>您需要修改的檔案如下:</p>
<ul>
<li>/etc/sysconfig/network</li>
<li>/etc/hosts</li>
</ul>
<p>(1)修改/etc/sysconfig/network，指令如下:</p>
<pre><code>#vi /etc/sysconfig/network</code></pre>
<p>於下方畫面紅色框框更改您新的主機名稱<br><img src='images/Setting+hostname+on+Linux-cehosname.jpg' width='650px' align='center'/></p>
<p>(2)修改/etc/hosts，指令如下:</p>
<pre><code>#vi /etc/hosts</code></pre>
<p>於下方畫面紅色框框更改您的主機名稱<br><img src='images/Setting+hostname+on+Linux-cehosname1.jpg' width='650px' align='center'/></p>
<p>(3)當您設定好，並重開主機後，您可以使用下面指令驗證：</p>
<pre><code>#hostname</code></pre>
<hr>
<h2>Fedora</h2>
<p>您需要修改的檔案如下:</p>
<ul>
<li>/etc/sysconfig/network</li>
<li>/etc/hosts</li>
</ul>
<p>(1)修改/etc/sysconfig/network，指令如下:</p>
<pre><code>#vi /etc/sysconfig/network</code></pre>
<p>於下方畫面紅色框框更改您新的主機名稱<br><img src='images/Setting+hostname+on+Linux-fehosname.jpg' width='650px' align='center'/></p>
<p>(2)修改/etc/hosts，指令如下:</p>
<pre><code>#vi /etc/hosts</code></pre>
<p>於下方畫面紅色框框更改您的主機名稱<br><img src='images/Setting+hostname+on+Linux-fehosname1.jpg' width='650px' align='center'/></p>
<p>(3)當您設定好，並重開主機後，您可以使用下面指令驗證：</p>
<pre><code>#hostname</code></pre>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="Setting+hostname+on+Windows.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="html/Setting+hostname+on+Windows.html">Windows Hostname設置</a>&nbsp;<a href="index.html?page=Setting+hostname+on+Windows.md">(Setting+hostname+on+Windows.md)</a><a href="#Setting+hostname+on+Windows.md"></a></h1><br/><h1>Windows Hostname設置</h1>
<p>當您申請MiCloud上任何主機時，若未指定主機名稱，系統將預設以亂數產生一串文字做為您的主機名稱，可能類似：fxyzabcd.local的名稱。您可以以IP登入您的主機，並透過&quot;hostname&quot;之指令看到您的Hostname。</p>
<p>如您需要重設您的主機名稱，您可以修改某些檔案來達到修改Hostname的目的，詳細說明如下:</p>
<p>(1)點選開始，並且進入我的電腦，進入後點選上方工具，再點選資料夾選項<br><img src='images/Setting+hostname+on+Windows-wihostname.jpg' width='650px' align='center'/></p>
<p>(2)由於更改Hostname所在的資料夾為隱藏檔，藉由以下方式可以顯示出來。</p>
<p>選擇檢視欄位後往下方選擇，可以找到”顯示所有檔案和資料夾”的選項，並點選套用。<br><img src='images/Setting+hostname+on+Windows-wihostname1.jpg' width='450px' align='center'/></p>
<p>(3)成功之後開啟我的電腦進入以下路徑</p>
<pre><code>C:\WINDOWS\system32\drivers\etc</code></pre>
<p>利用記事本或是Notepad++開啟hosts文件並且在文件內裡面的127.0.0.1 localhost底下加入您想設定新的hostname，儲存後即可使用新的hostname。</p>
<pre><code>127.0.0.1       localhost
127.0.1.1       windows.example.com localhost</code></pre>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="About+Swap+Adjust.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="html/About+Swap+Adjust.html">swap設置</a>&nbsp;<a href="index.html?page=About+Swap+Adjust.md">(About+Swap+Adjust.md)</a><a href="#About+Swap+Adjust.md"></a></h1><br/><h1>Swap調整</h1>
<p>Micloud 客戶的Linux虛擬機會有兩個虛擬磁碟，第一個是OS掛載在&quot;/&quot;之下，另一個是packages中設定的disk space，預設掛載在/data下。 MiCloud已為SmartMachine、及1G以下用戶預先做好swap空間的預留，其餘類型的虛擬主機沒有預設swap空間，用戶需自行做設定。</p>
<p>如果客戶新建一個新的VM，可以採用下列Partition swap及File swap兩種方式中任一種，如果客戶已經寫了資料在/data 且無法更動，那只能選擇File swap的方式。</p>
<p>兩種swap設定方法及說明如下：</p>
<h2>Partition swap</h2>
<p>可以做為多重開機的swap重複使用，理論效能比較高一點點，但是無法變更大小，步驟稍為複雜，設定步驟如下。</p>
<p>(1)檢查您的磁碟</p>
<pre><code>#fdisk -l</code></pre>
<p><img src='images/About+Swap+Adjust-p3.jpg' width='650' align='center'/></p>
<center>( 請檢查是否有 vda 與 vdb，其容量大小是否為您所申請的容量 )</center>



<p>(2)卸載 /dev/vdb1</p>
<pre><code>#umount /dev/vdb1</code></pre>
<p>(3)磁碟分割，用您擅用的磁碟分割工具，我們以 fdisk 為例</p>
<pre><code>#fdisk /dev/vdb</code></pre>
<p><img src='images/About+Swap+Adjust-fdisk.jpg' width='650' align='center'/></p>
<p>(4)製作檔案系統</p>
<pre><code>#mkfs.ext4 /dev/vdb1</code></pre>
<p><img src='images/About+Swap+Adjust-mk.jpg' width='650' align='center'/></p>
<pre><code>#mkswap /dev/vdb2</code></pre>
<p><img src='images/About+Swap+Adjust-mk2.jpg' width='650' align='center'/></p>
<p>(5)掛載檔案系統</p>
<pre><code>#mount /dev/vdb1
#swapon /dev/vdb2</code></pre>
<p>(6)檢查是否生效</p>
<pre><code>#df -h ( 檢查 /dev/vdb1 是否已經掛載 )</code></pre>
<p><img src='images/About+Swap+Adjust-df.jpg' width='650' align='center'/></p>
<pre><code>#free -m ( 檢查 swap 是否有數值 )</code></pre>
<p><img src='images/About+Swap+Adjust-free2.jpg' width='650' align='center'/></p>
<p>(7)開機自動掛載</p>
<pre><code>#vi /etc/fstab
加入一行 /dev/vdb2 swap swap defaults 0 0</code></pre>
<p><img src='images/About+Swap+Adjust-mount.jpg' width='650' align='center'/></p>
<p>(8)重新開機並驗證<br><img src='images/About+Swap+Adjust-free2.jpg' width='650' align='center'/></p>
<h2>File swap</h2>
<p>File swap的檔案是置於檔案系統之上，所以理論效能差一點點，可以刪除、移動與變更大小，步驟比partition swap簡單，其設定步驟如下。</p>
<p>(1)製作一個當作 swap 的檔案</p>
<pre><code># dd if=/dev/zero of=/data/swap.img bs=1024k count=1024
( 1024k x 1024 = 1GB，請調整 count 達到您要的大小 )</code></pre>
<p><img src='images/About+Swap+Adjust-dd.jpg' width='650' align='center'/></p>
<p>(2)製作SWAP檔案格式</p>
<pre><code># mkswap /data/swap.img</code></pre>
<p><img src='images/About+Swap+Adjust-filemk.jpg' width='650' align='center'/></p>
<p>(3)立刻啟動SWAP空間</p>
<pre><code># swapon /data/swap.img</code></pre>
<p>(4)檢查是否生效</p>
<pre><code>#free -m</code></pre>
<p><img src='images/About+Swap+Adjust-free.jpg' width='650' align='center'/></p>
<p>(5)自動掛載SWAP</p>
<pre><code># vi /etc/fstab
加入一行/data/swap.img swap swap defaults 0 0</code></pre>
<p><img src='images/About+Swap+Adjust-mount2.jpg' width='650' align='center'/><br>附註： /data 是目前 MiCloud Linux VMs 預設第二顆磁碟的掛載點，依客戶使用方式不同而有所差異</p>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="Setting+IPFilter.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="html/Setting+IPFilter.html">設定IPFilter</a>&nbsp;<a href="index.html?page=Setting+IPFilter.md">(Setting+IPFilter.md)</a><a href="#Setting+IPFilter.md"></a></h1><br/><h1>設定IPFILTER</h1>
<h2>安全與IPFILTER</h2>
<p>在您全新Joyent的Smartmachines預設虛擬NIC的網路和default情況下， 這意味著您必須在您的電腦的網路協定中進行相關設訂。 最安全的做法，是建立一台防禦主機或是VPN伺服器，並以後端存取訪問相關服務，如資料庫存取或是Web伺服器，並加載負載平衡器如Zeus/Stingray。</p>
<p>以下是以IPFILTER為您的SmartOS Smartmachine所做的基本的分配概況：</p>
<h2>如何啟動與停止IPFILTER</h2>
<p>以SmartOS的方式，在IPFILTER過程配置下運行的SMF（服務管理工具）進行停止和啟動服務。<br>查詢關於服務管理工具。</p>
<p>IPFILTER是在default情況下禁用。 如何啟用，禁用，啟動或停止服務:</p>
<pre><code># svcadm enable ipfilter</code></pre>
<p>重新啟動該服務:</p>
<pre><code># svcadm restart ipfilter</code></pre>
<p>檢查服務的狀態:</p>
<pre><code># svcs -a | grep ipfilter
online         20:49:27 svc:/network/ipfilter:default</code></pre>
<h2>IPFilter相關範例規則</h2>
<ul>
<li>IPFilter規則都包含在/ etc / IPF / ipf.conf</li>
<li>src.ip.addr指定源頭和dest.ip.addr指定的目的地。<br>允許從一個特定的IP位址的進入:</li>
</ul>
<pre><code>pass in quick from src.ip.addr to dest.ip.addr</code></pre>
<p>允許從特定IP位址的進入到一個特定的Port：:</p>
<pre><code>pass in quick from src.ip.addr to dest.ip.addr port=22</code></pre>
<p>允許ICMP只從一個特定的IP位址進入:</p>
<pre><code>pass in quick proto icmp from src.ip.addr to dest.ip.addr keep state</code></pre>
<p>允許任何人從SmartMachine出去:</p>
<pre><code>pass out from src.ip.addr to any keep state</code></pre>
<p>阻止一個特定的IP位址:</p>
<pre><code>block in from src.ip.addr to dest.ip.addr</code></pre>
<p>阻止一個特定的範圍:</p>
<pre><code>block in from src.ip.addr/xx to dest.ip.addr</code></pre>
<p>阻止從任何一個特定的IP進出:</p>
<pre><code>block in from any to dest.ip.addr</code></pre>
<p>阻止ICMP只從一個特定的IP進入:</p>
<pre><code>block in proto icmp from src.ip.addr to dest.ip.addr</code></pre>
<p>阻止所有從任何一個特定的port進出:</p>
<pre><code>block in from any to dest.ip.addr port = (example:22)</code></pre>
<p>設置default的拒絕規則，阻止除了443和80以外的Port:</p>
<pre><code>pass out from src.ip.addr to any keep state
pass in quick from any to dest.ip.addr port=443
pass in quick from any to dest.ip.addr port=80
block in from any to dest.ip.addr</code></pre>
<p>只要使用XXXX / XX，而不是使用一個特定的IP，範圍可以適用於任何規則.</p>
<hr>
<p>資料來源：<a href="http://wiki.joyent.com/display/www/Documentation+Home">Joyent Wiki</a></p>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="Using+Memcached.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="html/Using+Memcached.html">使用memcached</a>&nbsp;<a href="index.html?page=Using+Memcached.md">(Using+Memcached.md)</a><a href="#Using+Memcached.md"></a></h1><br/><h1>使用memcached</h1>
<p>memcached是一套 Name-Value Pair(NVP) 分散式記憶體快取系統，其主要目的是在於減少資料庫的負擔。透過memcached的快取對於使用者在等待資料存取時間可以加快進行而不會延遲服務。以下將會教您如何在SmartMachine去啟用和設置memcached。</p>
<h2>啟動 Memcached</h2>
<p>利用root權限或是利用sudo指令來啟動memcached:</p>
<pre><code>#svcadm enable memcached</code></pre>
<p>輸入svcs指令確認memcached啟動是否成功，如以下的畫面中，可以看到memcached是online狀態，表示是啟用中:</p>
<pre><code>#svcs memcached</code></pre>
<p><img src='images/Using+Memcached-memcached-1.png' width='650' align='center'/></p>
<p>確認目前設定:</p>
<pre><code>#prctl -i process -n process.max-file-descriptor `pgrep memcached`</code></pre>
<p><img src='images/Using+Memcached-memcached-2.png' width='650' align='center'/></p>
<h2>設置 Memcached</h2>
<p>用戶可以自行設置memcached的大小以及所允許的連線數量，使用svcprop驗證目前memcached的大小:</p>
<pre><code># svcprop -p config/memory memcached</code></pre>
<p><img src='images/Using+Memcached-memcached-3.png' width='650' align='center'/></p>
<p>從上方的擷圖可以看到目前memcached大小為64 MB<br>另外，用戶可以利用指令來調整memcached大小， 例如.從64MB調至128MB:</p>
<pre><code># svccfg -s memcached setprop config/memory=128
# svcadm refresh memcached
# svcprop -p config/memory memcached
128</code></pre>
<p><img src='images/Using+Memcached-memcached-4.png' width='650' align='center'/></p>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="Enable+SMTP+on+SmartOS+Plus.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="html/Enable+SMTP+on+SmartOS+Plus.html">啓動SmartOS Plus上之SMTP</a>&nbsp;<a href="index.html?page=Enable+SMTP+on+SmartOS+Plus.md">(Enable+SMTP+on+SmartOS+Plus.md)</a><a href="#Enable+SMTP+on+SmartOS+Plus.md"></a></h1><br/><h1>啓動SmartOS Plus上之SMTP</h1>
<p>如果您需要建立電子郵件伺服器來收發電子郵件，您必須在您的主機上啟用此服務，而處理電子郵件收發服務的通訊協定為簡易郵件傳送通訊協定，簡稱SMTP(Simple Mail Transfer Protocol)，在SmartMachines上SMTP預設是關閉，但用戶可以利用以下步驟來啟用SMTP的服務。</p>
<h2>前置作業</h2>
<p>在啟動SmartOS 主機上的SMTP之前，必需先安裝postfix和courier，您可以先使用pkgin search指令搜尋是否已有存在postfix 、courier，指令如下：</p>
<pre><code>#pkgin se postfix</code></pre>
<p><img src='images/Enable+SMTP+on+SmartOS+Plus-SMTP1.png' width='600' align='center'/></p>
<pre><code># pkgin se courier</code></pre>
<p><img src='images/Enable+SMTP+on+SmartOS+Plus-SMTP2.png' width='600' align='center'/></p>
<p>透過svcs指令確認postfix及courier的服務處於運行狀態</p>
<pre><code>#svcs -a | grep -Ee &quot;postfix|courier”</code></pre>
<p><img src='images/Enable+SMTP+on+SmartOS+Plus-SMTP3.png' width='600' align='center'/></p>
<p>從上面的擷圖可以看出，預設只有postfix是啟動的(online)，而courier中的authlib及imap的服務是關閉狀態，您必須透過svcadm enable 指令來啟動courier的兩項服務，指令如下:</p>
<pre><code>#svcadm enable svc:/network/courier:imap
#svcadm enable svc:/network/courier:authlib</code></pre>
<p><img src='images/Enable+SMTP+on+SmartOS+Plus-SMTP4.png' width='600' align='center'/></p>
<p>避免有些服務未啟用，故再次執行svcs指令來確認服務是否正常執行中:<br><img src='images/Enable+SMTP+on+SmartOS+Plus-SMTP5.png' width='600' align='center'/></p>
<h2>啟動SMTP</h2>
<ol>
<li>啟動SMTP的過程中，首先需要做連結檔，未來postfix可以直接在此檔中找到我們所要的的函式庫(lib)，指令如下:</li>
</ol>
<pre><code># ln -s /opt/local/etc/sasl2/etc/sasl2</code></pre>
<ol>
<li>postfix裡需修改main.cf及master.cf檔。main.cf是postfix最重要的設定檔，所有修改的動作皆需在這個檔案裡進行修改；master.cf主要是規定postfix每個程序的運作參數。</li>
</ol>
<ul>
<li><p>修改main.cf檔，此檔案的路徑存在 /opt/local/ect/postfix/main.cf，新增內容如下擷圖中以紅色框框起來的部分。</p>
<p> *inet_interfaces=all，設定postfix能使用的網路介面，一般預設為localhost， 如果是對外服務的郵件主機，就必須要設定為all。</p>
<p> *smtpd_sasl_auth_enable=yes，“確定是否針對Client啟動sasl的認證？”預設是不啟用，須自行將它啟用。</p>
</li>
</ul>
<p><img src='images/Enable+SMTP+on+SmartOS+Plus-SMTP6.png' width='600' align='center'/></p>
<ul>
<li><p>修改master.cf，此檔案的路徑存在 /opt/local/ect/postfix/master.cf，新增內容如下擷圖中以紅色框框起來的部分。</p>
<p> *smtpd_enforce_tls=no，啟動auth 驗證。</p>
<p> *smtpd_tls_cert_file=opt/local/etc/openssl/private/salfsigned.pem</p>
<p> *smtpd_tls_loglevel=0</p>
<p> *smtpd_use_tls=yes<br><img src='images/Enable+SMTP+on+SmartOS+Plus-SMTP7.png' width='600' align='center'/></p>
</li>
</ul>
<h2>驗證程序</h2>
<ol>
<li><p>服務設定完成後，利用以下指令確認是否設定成功，其中”Content” 為信件內容，”The Subject”為信件主旨，在信件主旨之後則是您需要測試收到系統所發出的電子郵件地址，此範例的電子郵件地址是設定傳送到Gmail。<br><img src='images/Enable+SMTP+on+SmartOS+Plus-SMTP8.png' width='600' align='center'/></p>
</li>
<li><p>完成後可以前往電子郵件信箱確認是否收到信件，如下圖所示收到主旨為“The Subject”的郵件，表示此設定為成功。<br><img src='images/Enable+SMTP+on+SmartOS+Plus-SMTP9.png' width='600' align='center'/></p>
</li>
</ol>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="Svcadm+usage.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="html/Svcadm+usage.html">使用svcadm來管理系統服務</a>&nbsp;<a href="index.html?page=Svcadm+usage.md">(Svcadm+usage.md)</a><a href="#Svcadm+usage.md"></a></h1><br/><h1>使用svcadm開啟或關閉服務</h1>
<p>Solaris base的技術，可以利用svcadm管理系統服務，以下列出常用管理的指令。</p>
<h2>svcadm用法：</h2>
<pre><code>[root@MiCloudDBT /home/user]# svcadm
Usage: svcadm [-v] [-z zone] [cmd [args ... ]]

svcadm enable [-rst] &lt;service&gt; ...      - enable and online service(s)
svcadm disable [-st] &lt;service&gt; ...      - disable and offline service(s)
svcadm restart &lt;service&gt; ...            - restart specified service(s)
svcadm refresh &lt;service&gt; ...            - re-read service configuration
svcadm mark [-It] &lt;state&gt; &lt;service&gt; ... - set maintenance state
svcadm clear &lt;service&gt; ...              - clear maintenance state
svcadm milestone [-d] &lt;milestone&gt;       - advance to a service milestone

Services can be specified using an FMRI, abbreviation, or fnmatch(5)
pattern, as shown in these examples for svc:/network/smtp:sendmail

svcadm &lt;cmd&gt; svc:/network/smtp:sendmail
svcadm &lt;cmd&gt; network/smtp:sendmail
svcadm &lt;cmd&gt; network/*mail
svcadm &lt;cmd&gt; network/smtp
svcadm &lt;cmd&gt; smtp:sendmail
svcadm &lt;cmd&gt; smtp
svcadm &lt;cmd&gt; sendmail</code></pre>
<hr>
<h2>svcadm啟動服務</h2>
<pre><code>svcadm enable [軟體名稱]
ex:svcadm enable apache</code></pre>
<hr>
<h2>svcadm關閉服務</h2>
<pre><code>svcadm disable [軟體名稱]
ex:svcadm disable apache</code></pre>
<hr>
<h2>svcadm重新啟動服務</h2>
<pre><code>svcadm restart [軟體名稱]
ex:svcadm restart apache</code></pre>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="Setting+Nagios.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="html/Setting+Nagios.html">建置Nagios網路監控主機</a>&nbsp;<a href="index.html?page=Setting+Nagios.md">(Setting+Nagios.md)</a><a href="#Setting+Nagios.md"></a></h1><br/><h1>建置Nagios網路監控主機</h1>
<p>Nagios是一套網路監控軟體，不僅可以監控主機(本地端或遠端)及服務，管理者可自行依需求來撰寫當監控主機或服務發生問題時的反應動作，例如.可以設置當服務出現問題時會透過電子郵件的方式通知管理人員，讓管理人員更快、精準掌握網路、主機設備等狀況。</p>
<h2>Fedora</h2>
<h2>安裝Nagios及相關必要套件</h2>
<p><strong>前置作業：</strong></p>
<p>新增一個使用者(nagios)做為程式的預設使用者</p>
<pre><code>#useradd -m nagios</code></pre>
<p><img src='images/Setting+Nagios-add.png' width='650' align='center'/></p>
<p><strong>安裝Nagios及相關套件</strong></p>
<p>a.安裝httpd、php，方便您可以透過網頁使用Nagios(Nagios需建置在apache中，故於安裝Nagios前先安裝)</p>
<pre><code>#yum -y install httpd</code></pre>
<p><img src='images/Setting+Nagios-yumhttpd.png' width='650' align='center'/></p>
<pre><code>#yum install php</code></pre>
<p><img src='images/Setting+Nagios-yumphp.png' width='650' align='center'/></p>
<p>b.安裝gcc套件(此套件在安裝Nagios時會做check動作，故於安裝Nagios前先安裝)</p>
<pre><code>#yum -y install gcc</code></pre>
<p><img src='images/Setting+Nagios-yumgcc.png' width='650' align='center'/></p>
<p>c.安裝Nagios</p>
<p>下載Nagios軟體</p>
<pre><code>#wget http://prdownloads.sourceforge.net/sourceforge/nagios/nagios-3.4.1.tar.gz</code></pre>
<p><img src='images/Setting+Nagios-wget.png' width='650' align='center'/></p>
<p>解壓縮 (預設會建一個nagios目錄，並將檔案放在此目錄下)</p>
<pre><code>#tar -xzf nagios-3.4.1.tar.gz</code></pre>
<p>切換至nagios目錄下，並透過configure、make進行編譯</p>
<pre><code>#./configure</code></pre>
<p><img src='images/Setting+Nagios-config.png' width='650' align='center'/></p>
<pre><code>#make all</code></pre>
<p><img src='images/Setting+Nagios-make.png' width='650' align='center'/></p>
<pre><code>#make install
#make install-init          使用make install來安裝主程序,CGI和HTML文件
#make install-commandmode     使用make install-init在/etc/rc.d/init.d安裝啟動腳本
#make install-config          使用make install-commandmode來配置目錄權限
#make install-webconf</code></pre>
<p>d.安裝nagios-plugins-1.4.11 套件</p>
<pre><code>#wget http://prdownloads.sourceforge.net/sourceforge/nagiosplug/nagios-plugins-1.4.11.tar.gz</code></pre>
<p><img src='images/Setting+Nagios-wget2.png' width='650' align='center'/></p>
<p>解壓縮檔 (預設會建一個nagios-plugins-1.4.11目錄，並將檔案放在此目錄下)</p>
<pre><code>#tar -xzf nagios-plugins-1.4.11.tar.gz</code></pre>
<p>切換至nagios-plugins-1.4.11目錄下，並透過configure、make進行編譯</p>
<pre><code>#./configure
#make
#make install</code></pre>
<h2>設定</h2>
<p>a.設定一個帳號，此帳號可以透過網頁登入做管理(帳號為nagios)</p>
<pre><code>#htpasswd -c /usr/local/nagios/etc/htpasswd.users nagios</code></pre>
<p><img src='images/Setting+Nagios-pwd.png' width='650' align='center'/></p>
<p>b.將上方的帳號加入cgi.cfg中，使此帳號有監控的權限。</p>
<pre><code>#vi /usr/local/nagios/etc/cgi.cfg</code></pre>
<p>於下方參數中加入您的帳號(有多個帳號時請用逗號分開)</p>
<pre><code>authorized_for_system_information=nagiosadmin,nagios
authorized_for_configuration_information=nagiosadmin,nagios
authorized_for_system_commands=nagiosadmin,nagios
authorized_for_all_services=nagiosadmin,nagios
authorized_for_all_hosts=nagiosadmin,nagios
authorized_for_all_service_commands=nagiosadmin,nagios
authorized_for_all_host_commands=nagiosadmin,nagios</code></pre>
<p><img src='images/Setting+Nagios-cgi.png' width='650' align='center'/></p>
<p>c.設定系統有異常時，通知的email。請編輯contacts.cfg檔，在下圖中紅色框框的地方輸入被通知的email地址</p>
<pre><code>#vi /usr/local/nagios/etc/objects/contacts.cfg</code></pre>
<p><img src='images/Setting+Nagios-nagios.png' width='650' align='center'/></p>
<p>檢查設定檔是否有問題</p>
<pre><code>#/usr/local/nagios/bin/nagios -v /usr/local/nagios/etc/nagios.cfg</code></pre>
<p><img src='images/Setting+Nagios-co.png' width='650' align='center'/></p>
<p>d.將nagios加入chkconfig中，方便查詢及開啟服務</p>
<pre><code>#chkconfig --add nagios</code></pre>
<p>e.將nagios設定於開機時自動啟動</p>
<pre><code>#chkconfig nagios on</code></pre>
<p>f.啟動nagios</p>
<pre><code>#service nagios start</code></pre>
<p>g.啟動httpd並更改開機自動啟動此服務</p>
<pre><code>#service httpd start
#chkconfig httpd on</code></pre>
<p>h.關閉防火牆，網頁才能正常開啟，並設置防火牆於開機時不自動啟動</p>
<pre><code>#/etc/init.d/iptables stop
#chkconfig iptables off</code></pre>
<h2>驗證</h2>
<p>a.請在瀏覽器上，輸入<a href="http://192.168.xxx.xxx/nagios/">http://192.168.xxx.xxx/nagios/</a> ，輸入您設置好的帳號及密碼<br><img src='images/Setting+Nagios-login.png' width='650' align='center'/><br>成功登入之頁面<br><img src='images/Setting+Nagios-success.png' width='650' align='center'/></p>
<p>b.監控Services<br>安裝完成後，您會發現http服務會有一個警告訊息如下圖紅色框框的部分<br><img src='images/Setting+Nagios-su2.png' width='650' align='center'/><br>原因:<br>雖然http服務正常，但預設apache網頁目錄/var/www/html沒有相關的index.html檔，才會出現這個警告請在此目錄下加入一個空的index.html，幾分鐘後警告即被排除，指令如下:</p>
<pre><code>#touch /var/www/html/index.html</code></pre>
<p>c.驗證是否收到系統報警通知<br><img src='images/Setting+Nagios-http.png' width='650' align='center'/><br>由上方service監控畫面上，可以看出Swap Usage為Critical，故Nagios會自動發信至您之前設定的郵件地址，信件內容如下<br><img src='images/Setting+Nagios-mail.png' width='650' align='center'/></p>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="Setting+SMF+on+SmartOS.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="html/Setting+SMF+on+SmartOS.html">在SmartOS上設置SMF</a>&nbsp;<a href="index.html?page=Setting+SMF+on+SmartOS.md">(Setting+SMF+on+SmartOS.md)</a><a href="#Setting+SMF+on+SmartOS.md"></a></h1><br/><h1>在SmartOS上設置SMF</h1>
<p>SmartOS中的服務管理功能 (Service Management Facility, SMF)，類似於Linux系統中init.d的service架構，使用者可透過SMF的管理，系統會依設定來開啟會暫停每個服務。 本範例為如何建立一個服務加入SMF中。</p>
<p>若要執行一項服務，首先必須設置一個腳本，透過腳本即可設定服務的狀態，SMF中所使用之腳本的檔案類型為xml。以下將透過下載一個腳本做為範例，我們將利用此下載的腳本來修改為我們需要的腳本並進行測試及驗證。</p>
<h2>下載腳本範例(manifest)</h2>
<pre><code>#wget --no-check-certificate http://github.com/isaacs/joyent-node-on-smart-example/raw/master/node-hello-world-service-manifest.xml</code></pre>
<h2>設定服務</h2>
<p>以自建服務至主機為範例，必須修改的指令如下。</p>
<pre><code># vi noode-hello-world-service-manifest.xml</code></pre>
<p>更改部分如下:</p>
<pre><code>1.修改設定服務名稱，由node-hello-world-service 改為testSMF。
原設定：&lt;service_bundle type=&quot;manifest&quot; name=&quot;node-hello-world-service&quot;&gt;
修改為：&lt;service_bundle type=&quot;manifest&quot; name=&quot;testSMF&quot;&gt;

2.修改SMF服務啟動時，服務中的狀態名稱:
原設定：&lt;service name=&quot;site/node-hello-world-service&quot; type=&quot;service&quot; version=&quot;1&quot;&gt;
修改為：&lt;service name=&quot;site/testSMF&quot; type=&quot;service&quot; version=&quot;1&quot;&gt;

3.在執行服務的路徑中，可設定所需執行檔案的資料夾中:
原設定：&lt;method_context&gt;&lt;working_directory=&quot;/home/admin/hello-world&quot;&gt;
修改為：&lt;method_context&gt;&lt;working_directory=&quot;/root/testSMF&quot;&gt;

4.設定user以及group中，可以執行的名稱，原範例是admin及staff，我們將他們皆設定為root。
原設定：&lt;method_credential user=&quot;admin&quot; group=&quot;staff&quot; privileges=&#39;basic,net_privaddr&#39; /&gt;
修改為：&lt;method_credential user=&quot;root&quot; group=&quot;root&quot; privileges=&#39;basic,net_privaddr&#39; /&gt;

5.設定執行檔路徑變數，我們的範例是Nodejs服務，故需建立Nodejs執行檔的路徑。
原設定：&lt;envvar name=&quot;PATH&quot; value=&quot;/home/admin/local/bin:/usr/local/bin:/usr/bin:/usr/sbin:/bin&quot;/&gt;
修改為：&lt;envvar name=&quot;PATH&quot; value=&quot;/opt/node/bin:/usr/local/bin:/usr/bin:/usr/sbin:/bin&quot;/&gt;

6.設定目錄的環境變數:
原設定：&lt;envvar name=&quot;HOME&quot; value=&quot;/home/admin&quot;/&gt;
修改為：&lt;envvar name=&quot;HOME&quot; value=&quot;/root&quot;/&gt;

7.設定執行檔的路徑:
原設定：exec=&quot;/opt/local/bin/node /home/admin/hello-world/server.js&quot;
修改為：exec=&quot;/opt/local/bin/node /root/testSMF/server.js &quot;</code></pre>
<p>上述修改的位置如下方黃色框框所示:</p>
<p><img src='images/Setting+SMF+on+SmartOS-CaptureWiz143.png' width='650' align='center'/></p>
<h2>驗證服務啟動</h2>
<p>完成以上步驟後，開始驗證此自訂服務並將其服務匯入SMF，其指令如下:</p>
<pre><code># svccfg import node-hello-world-service-manifest.xml</code></pre>
<p><img src='images/Setting+SMF+on+SmartOS-p1.png' width='650' align='center'/></p>
<p>檢視匯入服務狀態，指令如下:</p>
<pre><code># svcs –a | grep testSMF</code></pre>
<p><img src='images/Setting+SMF+on+SmartOS-p2.png' width='650' align='center'/><br>從上方擷圖可看出，testSMF已成功匯入，但未啟動。</p>
<p>利用svcadm指令來啟用服務，並且再次檢視服務狀態，online表示已啟動:</p>
<pre><code># svcadm enable testSMF
# svcs–a | grep testSMF</code></pre>
<p><img src='images/Setting+SMF+on+SmartOS-p3.png' width='650' align='center'/></p>
<h2>刪除已匯入的SMF</h2>
<p>刪除服務之前，須先關閉後，方可進行刪除動作。</p>
<p>(1) 關閉 testSMF 服務</p>
<pre><code># svcadm disable testSMF
# svcs testSMF</code></pre>
<p><img src='images/Setting+SMF+on+SmartOS-p4.png' width='650' align='center'/></p>
<p>(2) 刪除 testSMF服務</p>
<pre><code># svccfg delete testSMF
# svcs testSMF</code></pre>
<p><img src='images/Setting+SMF+on+SmartOS-p5.png' width='650' align='center'/></p>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="MiCloud+Account+Modify.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="html/MiCloud+Account+Modify.html">帳戶資訊管理</a>&nbsp;<a href="index.html?page=MiCloud+Account+Modify.md">(MiCloud+Account+Modify.md)</a><a href="#MiCloud+Account+Modify.md"></a></h1><br/><h1>MiCloud帳戶資訊修改</h1>
<p>影片:<a href="http://www.youtube.com/watch?v=qyEhOfV7GA0">MiCloud帳戶資訊管理</a></p>
<div align="center"><br><embed width="420" height="345" src="http://www.youtube.com/v/qyEhOfV7GA0&hd=1" type="application/x-shockwave-flash"></embed><br></div>

<p>若您還未註冊<strong>MiCloud</strong>，請於網頁左上角點選右邊選項＜<strong>註冊</strong>＞<a href="/html/Apply+MiCloud+Account-new.html">申請帳號</a></p>
<p>若您已註冊完<strong>MiCloud</strong>，請於網頁左上角點選左邊選項＜<strong>登入</strong>＞。</p>
<h2><img src='images/MiCloud+Account+Modify-p1-2.png' width='650' align='center'/></h2>
<h2>登入與帳戶設定</h2>
<p>進入登入頁面輸入您的帳號與密碼</p>
<h2><img src='images/MiCloud+Account+Modify-p1+-2.png' width='650' align='center'/></h2>
<h2>MiCloud產品購買頁面</h2>
<p>登入後系統將自動導向訂購MiCloud產品頁面</p>
<p>若您第一次登入Micloud請先於右上角點選<strong>帳戶設定</strong></p>
<p>設定您的<a href="/html/Pay+way.html">付款方式</a> 與<a href="/html/SSH+KeyGen+Connect+Tutorial-Windows.html">SSH-Key</a>的相關設定</p>
<h2><img src='images/MiCloud+Account+Modify-p1+-5-2.png' width='650' align='center'/></h2>
<h2>帳戶設定</h2>
<p>在這個頁面裡能修改您的基本資料</p>
<p><img src='images/MiCloud+Account+Modify-p1+-6.png' width='650' align='center'/></p>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="MiCloud+SSH+Key.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="html/MiCloud+SSH+Key.html">SSH金鑰管理</a>&nbsp;<a href="index.html?page=MiCloud+SSH+Key.md">(MiCloud+SSH+Key.md)</a><a href="#MiCloud+SSH+Key.md"></a></h1><br/><h1>SSH金鑰</h1>
<p>您若需要在Micloud上建置SmartOS及Linux的作業系統</p>
<p>則需要在這個頁面建立您的SSH-Key( <a href="/html/SSH+KeyGen+Connect+Tutorial-Windows.html">Windows</a>/<a href="html/SSH+KeyGen+Connect+Tutorial-Linux+or+Unix.html">Linux/Unix</a>/<a href="html/SSH+KeyGen+Connect+Tutorial-MacOS.html">MacOS</a>)</p>
<p>以便您在登入系統時做驗證</p>
<p><img src='images/MiCloud+Account+Modify-p1+-7.png' width='650' align='center'/></p>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="Micloud+Password.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="html/Micloud+Password.html">登入密碼管理</a>&nbsp;<a href="index.html?page=Micloud+Password.md">(Micloud+Password.md)</a><a href="#Micloud+Password.md"></a></h1><br/><h1>登入密碼管理</h1>
<p>若您需要更改登入MiCloud登入時的密碼，可於此頁做變更。<br><img src='images/MiCloud+Account+Modify-p1+-8.png' width='650' align='center'/></p>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="Pay+way.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="html/Pay+way.html">付款方式</a>&nbsp;<a href="index.html?page=Pay+way.md">(Pay+way.md)</a><a href="#Pay+way.md"></a></h1><br/><h1>付款方式</h1>
<p>付款方式分為企業付款、信用卡付款二種，詳細解說如下:</p>
<h2>企業付款說明</h2>
<p>企業付款方式僅提供合作或簽約夥伴，不適用於網路申請之用戶。</p>
<h2><img src='images/Pay+with+business-pay1.png' width='650' align='center'/></h2>
<h2>信用卡付款說明</h2>
<p><embed width="700" height="550" src='images/v4.swf' type="application/x-shockwave-flash"></embed><br>用戶皆可透過網路做信用卡認證，認證成功後即可訂購主機，未來帳單將從此張信用卡做扣款動作。</p>
<p><img src='images/Pay+way-p1+-9.png' width='650' align='center'/><br>請確認您的<strong>帳單寄送地址</strong>是否正確!<br><img src='images/Pay+way-p1+-10.png' width='650' align='center'/><br>請選擇您的信用卡與填寫相關資訊<br><img src='images/Pay+way-CC3.JPG' width='650' align='center'/><br>完成後請確認您的<strong>卡號</strong>是否正確<br><img src='images/Pay+way-CC1.JPG' width='650' align='center'/></p>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="MiCloud+billing.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="html/MiCloud+billing.html">帳單資料</a>&nbsp;<a href="index.html?page=MiCloud+billing.md">(MiCloud+billing.md)</a><a href="#MiCloud+billing.md"></a></h1><br/><h1>帳單資料</h1>
<p>用戶可以在帳單資料中，查詢到過去6個月內的帳單細項資訊以及未來帳單。<br><img src='images/MiCloud+Account+Modify-p1+-11.png' width='650' align='center'/></p>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="Manage+your+Machines.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="html/Manage+your+Machines.html">主機清單</a>&nbsp;<a href="index.html?page=Manage+your+Machines.md">(Manage+your+Machines.md)</a><a href="#Manage+your+Machines.md"></a></h1><br/><h1>主機</h1>
<p>此頁可顯示您所建的機器與機器的IP與基本的資料(作業系統、記憶體、購買了多久以及目前狀態)</p>
<p>若您的機器過多也可於中間的藍色框框內輸入該台機器的資訊來做搜尋的動作</p>
<p><img src='images/Manage+your+Machines-p2.png' width='650' align='center'/><br>*  左邊藍色框框概述您的機器設備與相關訊息。</p>
<ul>
<li>右邊黃色框框則顯示您機器目前的狀態，以及開關機的按鈕。</li>
</ul>
<ul>
<li>點擊 <strong>Show Credentials</strong>(左邊紅色框框) 則會顯示您這台機器內<a href="/html/Preload+Software+Default+Password.html">預載程式之預設密碼</a></li>
</ul>
<p><img src='images/Manage+your+Machines-p1+-18.png' width='650' align='center'/><br><strong>登入說明請參考：</strong> <a href="/html/MiCloud+Credential+Description.html">MiCloud Credential Description</a></p>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="Snapshot+recovery.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="html/Snapshot+recovery.html">使用系統快照備份及還原</a>&nbsp;<a href="index.html?page=Snapshot+recovery.md">(Snapshot+recovery.md)</a><a href="#Snapshot+recovery.md"></a></h1><br/><h1>使用Snapshot備份及還原</h1>
<p>系統快照功能，可幫助您還原被刪除或被破壞的系統。</p>
<p>當您需要操作到可能影響系統運作的動作時，可先建立系統快照，以防系統損壞無法回復。</p>
<h2>以下為系統快照之測試：</h2>
<p>1.請先登入您的主機，並建立一個測試檔”text.txt”</p>
<p><img src='images/Snapshot+recovery-snapshot2.jpg' width='650' align='center'/></p>
<p>2.建立後，登入MiCloud平台中線上管理工具，選擇該台主機，並按下右邊的&quot;建立系統快照&quot;</p>
<p><img src='images/Snapshot+recovery-snapshot.jpg' width='650' align='center'/></p>
<p>建立完成，如下圖</p>
<p><img src='images/Snapshot+recovery-snapshot1.jpg' width='650' align='center'/></p>
<p>3.回到主機將text.txt檔刪除</p>
<p><img src='images/Snapshot+recovery-snapshot3.jpg' width='650' align='center'/></p>
<p>再到平台上選擇您欲回覆時間點的系統快照，點&quot;回復選取的快照&quot;。</p>
<p><img src='images/Snapshot+recovery-snapshot7.jpg' width='650' align='center'/></p>
<p>回復選取的快照主機會經過三個動作(關閉主機--&gt;回復主機--&gt;重新啟動)，待重啟完後主機即回覆到之前的時間點狀態。</p>
<p><img src='images/Snapshot+recovery-snapshot8.jpg' width='650' align='center'/></p>
<p>開始回復，如下圖</p>
<p><img src='images/Snapshot+recovery-snapshot4.jpg' width='650' align='center'/></p>
<p>4.系統回復過程中，主機會重新啟動，所以之前的連線動作會不存在，如下圖<br><img src='images/Snapshot+recovery-snapshot9.jpg' width='650' align='center'/></p>
<p>請重新連線後確認檔案是否回復</p>
<p><img src='images/Snapshot+recovery-snapshot5.jpg' width='650' align='center'/></p>
<p>Text.txt即被回復了。</p>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="MiCloud+Credential+Description.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="html/MiCloud+Credential+Description.html">預載軟件之預設密碼</a>&nbsp;<a href="index.html?page=MiCloud+Credential+Description.md">(MiCloud+Credential+Description.md)</a><a href="#MiCloud+Credential+Description.md"></a></h1><br/><h1>預載程式之預設密碼</h1>
<p>登入 MiCloud 完成後能在畫面左上方點選主機，在從下方表格點選您的主機查看細項。<br><img src='images/MiCloud+Credential+Description-p1+-21.png' width='650' align='center'/><br>進入查詢細項頁面，可於 <strong>概述</strong> 中找到 <strong>Credentials</strong> 欄位,左鍵點擊 <strong>Show Credentials</strong>，查看該台主機預載程式之密碼。</p>
<p><img src='images/MiCloud+Credential+Description-p1+-18.png' width='650' align='center'/></p>
<p>登入帳號與密碼說明如下:</p>
<table>
<thead>
<tr>
<th>ROLE</th>
<th>功能</th>
<th>登入帳號</th>
<th>登入步驟</th>
</tr>
</thead>
<tbody>
<tr>
<td>root</td>
<td>系統帳號</td>
<td>root</td>
<td>登入：ssh root@your.ip.address<br>密碼：本表格root密碼</td>
</tr>
<tr>
<td>admin</td>
<td>系統帳號</td>
<td>admin</td>
<td>登入：ssh admin@your.ip.address<br>密碼：本表格admin密碼</td>
</tr>
<tr>
<td>mysql</td>
<td>MySQL資料庫帳號</td>
<td>root</td>
<td>登入：mysql -uroot -p<br>密碼：本表格mysql密碼</td>
</tr>
<tr>
<td>pgsql</td>
<td>PostgreSQL資料庫帳號</td>
<td>postgres</td>
<td>登入：/opt/local/bin/psql -U postgres<br>密碼：(此時輸入pgsql密碼欄位)</td>
</tr>
<tr>
<td>virtualmin</td>
<td>Virtualmin系統管理工具帳號</td>
<td>admin</td>
<td>啓動服務：svcadm enable webmin<br>連線：<a href="https://your.ip.address:10000/">https://your.ip.address:10000/</a><br>帳號：admin<br> 密碼：本表格virtualmin密碼</td>
</tr>
<tr>
<td>jill</td>
<td>系統帳號</td>
<td>jill</td>
<td>登入：ssh jill@your.ip.address<br>密碼：本表格jill密碼</td>
</tr>
<tr>
<td>zxtm</td>
<td>負載平衡服務帳號</td>
<td>admin</td>
<td>連線：h ttp://your.ip.address:9090 <br>帳號：admin<br>密碼：本表格zxtm密碼</td>
</tr>
</tbody>
</table>
<hr>
<h1>修改預設密碼</h1>
<p>SmartOS修改密碼，修改root密碼，指令如下</p>
<pre><code>#passwd</code></pre>
<p><img src='images/MiCloud+Credential+Description-clip-image001.jpg' width='650' align='center'/></p>
<p>修改Mysql密碼，先登入mysql後再執行修改密碼，登入指令如下，此時密碼為主機細項上所預設的密碼:</p>
<pre><code>#mysql -u root -p</code></pre>
<p>修改密碼指令如下:</p>
<pre><code>mysql&gt; SET PASSWORD FOR root@localhost=PASSWORD(&#39;yournewpassword&#39;);</code></pre>
<p><img src='images/MiCloud+Credential+Description-clip-image002.jpg' width='650' align='center'/></p>
<p>如欲更改其他帳戶之密碼，請於root執行下方指令。</p>
<pre><code>#passwd admin</code></pre>
<p><img src='images/MiCloud+Credential+Description-clip-image003.jpg' width='650' align='center'/></p>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="Server+Restart+From+Portal.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="html/Server+Restart+From+Portal.html">重新啟動、關閉與刪除主機</a>&nbsp;<a href="index.html?page=Server+Restart+From+Portal.md">(Server+Restart+From+Portal.md)</a><a href="#Server+Restart+From+Portal.md"></a></h1><br/><h1>主機之重啟、關閉與刪除</h1>
<p>MiCloud自助服務平台提供給您直接操控主機之重啟、關閉及刪除功能，在您登入MiCloud Customer Portal之後，您可以至主機頁面，點選您欲操控的主機，在右方控制面板中點選您所需要的服務。相關說明如下:</p>
<h2>主機之重啟</h2>
<p>在您登入MiCloud Customer Portal之後，您可以至主機頁面，點選您欲操控的主機，在右方控制面板中，點選&quot;REBOOT&quot;進行重啟。如下圖:</p>
<p><img src='images/Server+Restart+From+Portal-reboot.jpg' width='650px' align='center'/></p>
<p>Reboot會經過關閉後再啟動主機，請用戶耐心等候。</p>
<hr>
<h2>主機之關閉</h2>
<p>關閉主機可由MiCloud管理平台上點選shutdown按鈕，也可以使用指令進行關閉，相關說明如下:</p>
<p>1.由MiCloud管理平台上進行</p>
<p>同上主機管理頁面，點選&quot;shutdown&quot;進行關閉主機。如下圖:<br><img src='images/Server+Restart+From+Portal-shutdown.jpg' width='650px' align='center'/></p>
<p>※shut down後不代表終止合約，帳單仍會繼續計費，如要停止計費請執行DELETE刪除主機。如下圖提醒:</p>
<p><img src='images/Server+Restart+From+Portal-shutdown1.jpg' width='650px' align='center'/></p>
<p>2.執行指令進行關閉<br>登入主機後使用指令來執行shutdown，指令如下:</p>
<pre><code>#poweroff</code></pre>
<p>以SmartMachine為例，執行畫面如下:</p>
<p>執行poweroff後會跳出下方黃色框框的警告視窗，提醒您主機已中斷連線。<br><img src='images/Server+Restart+From+Portal-poweroff.png' width='650px' align='center'/></p>
<p>再回到MiCloud平台上檢查主機是否已被關閉。<br><img src='images/Server+Restart+From+Portal-poweroff2.jpg' width='650px' align='center'/></p>
<hr>
<h2>主機之刪除</h2>
<p>同上主機管理頁面，點選&quot;DELETE&quot;按鍵後，系統將會移除您的主機。</p>
<p>※刪除主機前必需先Shut down主機後才能刪除。</p>
<p><img src='images/Server+Restart+From+Portal-delete.jpg' width='650px' align='center'/></p>
<p>刪除後主機及其上相關資料將無法回復，請確認後再執行。</p>
<p><img src='images/Server+Restart+From+Portal-delete1.jpg' width='650px' align='center'/></p>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="Using+Cloud+Analytics.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="html/Using+Cloud+Analytics.html">使用MiCloud分析工具-DTrace</a>&nbsp;<a href="index.html?page=Using+Cloud+Analytics.md">(Using+Cloud+Analytics.md)</a><a href="#Using+Cloud+Analytics.md"></a></h1><br/><h1>使用雲端分析工具</h1>
<p>雲端分析工具，將幫助您做您Node.js的即時性的績效性能分析™應用。<br>使用雲端分析工具將需要Node 版本0.4.0或更高的版本。<br>在這個頁面，您將可以找到：</p>
<p>同時看到 <a href="http://dtrace.org/blogs/dap/2011/08/29/new-metrics-on-no-de/"><a href="http://dtrace.org/blogs/dap/2011/08/29/new-metrics-on-no-de/">http://dtrace.org/blogs/dap/2011/08/29/new-metrics-on-no-de/</a></a></p>
<p>顯示分析的概述如下：</p>
<p>分析工具將顯示兩種圖表：線狀圖和等級圖。</p>
<p>線圖顯示的數量，是根據您所給定的時間測量。</p>
<p>例如，如果您測量的是根據IP地址的HTTP操作，其圖表疊線圖將顯示每個IP地址每秒的回應數量。<br><img src='images/Using+Cloud+Analytics-pic1.jpg' width='650' align='left'/></p>
<p>而等級圖可讓您看到三個方面的數據，就像在某一特定地區，使用不同的顏色的雨水量畫出降雨分佈的地圖。</p>
<p>雲端分析等級圖則顯示不同密度的彩色區塊。</p>
<p>例如，在一個等級圖顯示了應用的細項和CPU運行速度，x軸則顯示在一秒鐘的間隔時間，Y軸則顯示了運行的時間。</p>
<p>圖中的每個區塊、密度，代表了特定的運行時間的程式的數量。</p>
<p>您可以使用過濾器，或以點選一個區塊的方式，查詢程式處理器多次執行的時間長短。</p>
<p>每個區塊的高度，都是以沿y軸的值的範圍做區分。</p>
<p><img src='images/Using+Cloud+Analytics-pic2.jpg' width='650' align='left'/></p>
<p>在這兩種圖表，x軸表示在一秒鐘的間隔時間。 y軸代表一個變量，你測量，但規模變化值的範圍擴大或縮小。</p>
<table>
<thead>
<tr>
<th>控制</th>
<th>描述  </th>
</tr>
</thead>
<tbody>
<tr>
<td>儀器儀表選項</td>
<td>這些控件可以讓你創建一個儀表盤。<br>你可以選擇從幾個指標分解以不同的方式。<br>這些指標都在下一節描述。</td>
</tr>
<tr>
<td>元素列表</td>
<td>這將列出你測量的項目。<br>例如，如果你測量HTTP服務器的URL分解操作，此窗格包含一個網址列表。<br>在熱圖，從這個名單中選擇一個項目，突出包含該元素的測量所有的水桶。<br>你可以使用隔離或排除選定的項目列表底部的過濾器。</td>
</tr>
<tr>
<td>排名 /線性</td>
<td>這種控制讓你選擇如何密度桶熱圖呈現。<br>線性著色意味著根據其價值，每個桶的顏色。<br>其價值為100桶，水桶，其價值為1暗100倍。排名基於著色所有的值進行排序和顏色密度分佈其中。 <br>排名基於著色發現離群點是非常有用的。</td>
</tr>
<tr>
<td>粒度</td>
<td>此滑塊控制每塊的高度，因此，每個桶的值的範圍。</td>
</tr>
<tr>
<td>規模</td>
<td>此滑桿可讓您控制Y軸的值的範圍。 範圍是在控制下的文本。<br>當滑塊一路的頂部和底部，y軸的變化上顯示的值的範圍而定規模。<br>如果您使用滑桿來設定一個上限或下限，規模不會改變。</td>
</tr>
<tr>
<td>放大</td>
<td>這些控件可以讓你改變每個桶的寬度，所以你可以看到一個更廣泛的時間。<br> 每個桶的寬度始終是一秒鐘。</td>
</tr>
<tr>
<td>播放 /暫停</td>
<td>這些控件可以讓您暫停和恢復顯示。</td>
</tr>
<tr>
<td>水桶</td>
<td>點擊水桶，桶的價值分佈。</td>
</tr>
</tbody>
</table>
<h2>可用的度量</h2>
<p>雲分析可以告訴你各種不同的指標:</p>
<ul>
<li>CPU線程處決的</li>
<li>HTTP服務器操作</li>
<li>HTTP客戶端操作</li>
<li>垃圾收集作業</li>
<li>套接字操作</li>
<li>邏輯文件系統操作<br>在大多數情況下，操作數是不一樣分解操作延遲有趣。 潛伏期是要求其履行的金額之間的時間。</li>
</ul>
<h2>CPU線程處決的</h2>
<p>這種度量可以幫助你了解你的應用程序使用的CPU。 報告數量排序的線程執行不同的標準。 一個線程開始執行時，當線程在CPU和結束時，它被取下。<br>您可以使用自己的下面的分解，得到一個線程執行數線圖或結合運行時，他們顯示熱圖。</p>
<table>
<thead>
<tr>
<th>分解</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>進程標識符</td>
<td>對於一個給定的進程ID線程數。</td>
</tr>
<tr>
<td>應用程序的名稱</td>
<td>每個正在運行的應用程序的線程數。</td>
</tr>
<tr>
<td>區域名稱</td>
<td>在每個區域運行的線程數（SmartMachine）。<br>如果你正在運行的只有1 SmartMachine，這個信息是不是特別有用。</td>
</tr>
<tr>
<td>原因離開CPU</td>
<td>離開CPU的原因排序的線程數。</td>
</tr>
</tbody>
</table>
<p>線圖顯示處決的人數是不是特別有趣。 運行時的熱圖，這表明線程在CPU上多久，更準確，因為它們表明，當您的應用程序已經做了很多計算。</p>
<pre><code>選擇不加分解本身的運行是在一個線程執行的熱分解圖運行，這不是特別有用的結果。</code></pre>
<p>如果您的應用程序不運行很長時間，你可以看看為什麼它來CPU。 它可能被內核鎖阻塞（可能表明內核鎖爭用），1用戶級鎖（表示用戶級鎖爭用），1條件變量（表示它很可能等待某些其他事件，如磁盤，I / O或網絡），等等。 或者它可能已經運行的，但採取的CPU，因為別的東西更高的優先級運行所需。</p>
<p>這是一個低級別和微妙的度量，但它可以幫助你了解是否應用程序這麼長時間的服務請求的理由是因為它在CPU上花費了很多時間。</p>
<h2>HTTP服務器操作</h2>
<p>HTTP服務器的性能度量Web服務器的主要性能。</p>
<p>可以使用下面的分解，自己獲得的事件數量的線圖，或者你可以結合延遲他們獲得熱圖。</p>
<table>
<thead>
<tr>
<th>分解</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>方法</td>
<td>HTTP方法的請求：GET，PUT，POST，DELETE</td>
</tr>
<tr>
<td>網址</td>
<td>通過URL請求的數量。</td>
</tr>
<tr>
<td>遠程IP地址</td>
<td>發出請求的客戶端的IP地址的請求數。</td>
</tr>
<tr>
<td>遠程TCP端口</td>
<td>發出請求的客戶端所使用的TCP端口的請求數。<br>這個衡量標準是，挑選出來自同一客戶端的多個請求，在相同的TCP連接使用HTTP保持活動的有用。</td>
</tr>
</tbody>
</table>
<h2>HTTP客戶端操作</h2>
<p>這個度量報告HTTP請求和響應，從您的應用程序發起的反對的服務。 您可以使用該數據，以幫助您確定您的服務器的延遲是由於你使用一些其他的Web服務的延遲。 舉例來說，如果Amazon的S3服務存儲數據，你可以看到如何S3 Web服務請求。</p>
<p>如果您發現另一個Web服務是您的高延遲的源，然後你可以調查，其他的Web服務（如果你能），或重新考慮你的應用程序如何使用它，通過緩存結果在可能的情況下，也許。</p>
<table>
<thead>
<tr>
<th>分解</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>方法</td>
<td>請求的HTTP方法。</td>
</tr>
<tr>
<td>網址</td>
<td>通過URL請求的數量。</td>
</tr>
<tr>
<td>HTTP服務器地址</td>
<td>服務器地址的請求數。</td>
</tr>
<tr>
<td>HTTP服務器端口</td>
<td>服務器端口的請求數。</td>
</tr>
</tbody>
</table>
<h2>垃圾收集作業</h2>
<p>這種度量可以讓你觀察到的JavaScript虛擬機的垃圾收集器所產生的延遲氣泡。 垃圾收集器跟踪分配內存和釋放內存，這不再被使用。 這意味著，作為一個程序員，你不必擔心內存分配和釋放。 然而，當垃圾收集器運行時，您所有的應用程序代碼被暫停。</p>
<p>您可以使用此指標，以觀察在您的應用程序的垃圾收集。 在這種情況下，“潛伏期”是指垃圾收集操作了多久。 如果你看到的垃圾收集活動相關的HTTP請求延遲尖峰，你可能需要重新思考如何在您的應用程序內存被使用，以免造成這麼多的垃圾，否則調整GC以避免出現大的尖峰。</p>
<table>
<thead>
<tr>
<th>分解</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>GC型</td>
<td>按類型的垃圾收集操作。</td>
</tr>
</tbody>
</table>
<h2>套接字操作</h2>
<p>套接字操作HTTP活動的WebSockets，和大多數其他類型的網絡活動的基礎上。 這種度量可以讓你觀察到非Web應用程序的活動。 因為它是不可能知道這消息對應於別人，這是不可能直接顯示在這個級別的延遲。</p>
<table>
<thead>
<tr>
<th>分解</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>類型</td>
<td>按類型套接字操作（讀，寫）。</td>
</tr>
<tr>
<td>遠程主機</td>
<td>套接字操作遠程主機的數量。</td>
</tr>
<tr>
<td>遠程端口</td>
<td>通過遠程端口號的套接字操作。</td>
</tr>
<tr>
<td>大小</td>
<td>由規模數量的套接字操作。</td>
</tr>
<tr>
<td>緩衝數據</td>
<td>Node.js的內緩衝的數據量，因為應用程序的書面比內核更可以消耗不阻塞。</td>
</tr>
</tbody>
</table>
<h2>邏輯文件系統的操作</h2>
<p>磁盤I / O可以是一個顯著的延遲源。 這種度量檢查磁盤的I / O的應用程序的首要原因之一：訪問文件系統。</p>
<table>
<thead>
<tr>
<th>分解</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>進程標識符</td>
<td>文件系統操作的進程的ID號。</td>
</tr>
<tr>
<td>應用程序的名稱</td>
<td>文件系統操作的應用程序的名稱。</td>
</tr>
<tr>
<td>區域名稱</td>
<td>文件系統操作的區域名稱。</td>
</tr>
<tr>
<td>操作類型</td>
<td>按類型的文件系統操作（讀，寫，查找，訪問等）。</td>
</tr>
<tr>
<td>文件系統類型</td>
<td>（ZFS，進程，LOFS等），文件系統類型的文件系統操作。</td>
</tr>
</tbody>
</table>
<p>如果你在這裡看到顯著的延遲，HTTP請求延遲對應的，你可能會考慮改變你的應用程序與文件系統交互，也許是通過預取數據緩存。</p>
<p>分解幫助你準確識別誰在做什麼，這樣可以優化正確的事情。 與Node.js的指標，此指標的檢查文件系統的所有的SmartMachine的活動。在這些情況下，進程ID和應用程序的名稱的分解是有用的。</p>
<h2>學習更多關於雲分析</h2>
<p>你可以了解更多有關使用熱圖可視化從這些資源中的延遲：</p>
<ul>
<li><a href="http://cacm.acm.org/magazines/2010/7/95062-visualizing-system-latency/fulltext">可視化系統延遲 </a></li>
<li><a href="http://dtrace.org/blogs/dap/2011/03/01/welcome-to-cloud-analytics/">雲分析</a></li>
<li><a href="http://joyeur.com/2011/01/24/executive-speaker-series-bryan-cantrill-and-brendan-gregg-on-cloud-analytics/">雲性能與實時可視性解決大問題（視頻）</a></li>
</ul>
<hr>
<p>資料來源：<a href="http://wiki.joyent.com/display/www/Documentation+Home">Joyent Wiki</a></p>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="Mounting+the+Data+Volume+on+Windows.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="html/Mounting+the+Data+Volume+on+Windows.html">Windows主機掛載硬碟</a>&nbsp;<a href="index.html?page=Mounting+the+Data+Volume+on+Windows.md">(Mounting+the+Data+Volume+on+Windows.md)</a><a href="#Mounting+the+Data+Volume+on+Windows.md"></a></h1><br/><h1>Windows主機掛載硬碟</h1>
<p>訂購MiCloud Windows主機的硬碟空間屬於額外提供給每台主機的空間，並不包含在原作業系統的硬碟空間中，預設每台虛擬主機之作業系統空間有40GB，但用戶需自行將OS外之硬碟掛載後，才可使用，其掛載及啟用的操作說明如下。</p>
<p>登入您的主機後點選”開始”在<strong>電腦</strong>上按右鍵點選<strong>管理</strong>，如下圖。<br><img src='images/Mounting+the+Data+Volume+on+Windows-win-dis.jpg' width='500' align='center'/></p>
<p>開啟伺服器管理員後點選存放-磁碟管理，如下圖。<br><img src='images/Mounting+the+Data+Volume+on+Windows-win-dis1.jpg' width='600' align='center'/></p>
<p>請在<strong>磁碟1</strong>的空白處按右鍵選<strong>連線</strong>，如下圖紅色框框部分。<br><img src='images/Mounting+the+Data+Volume+on+Windows-win-dis2.jpg' width='600' align='center'/></p>
<p>連線後，再<strong>按右鍵</strong>選<strong>初始化磁碟</strong>，會出現初始化硬碟的視窗，按下確定即可。<br><img src='images/Mounting+the+Data+Volume+on+Windows-win-dis3.jpg' width='600' align='center'/><br><img src='images/Mounting+the+Data+Volume+on+Windows-win-dis4.jpg' width='600' align='center'/></p>
<p>初始化磁碟後，請至紅色框框裡<strong>按右鍵</strong>點選<strong>新增簡單磁碟區</strong>，如下圖。<br><img src='images/Mounting+the+Data+Volume+on+Windows-win-dis5.jpg' width='600' align='center'/></p>
<p>出現新增簡單磁碟區精靈視窗，點選下一步即可。<br><img src='images/Mounting+the+Data+Volume+on+Windows-win-dis6.jpg' width='600' align='center'/></p>
<p>第三步驟可選擇磁碟機代號如下圖橘色框框，再執行下一步至完成即可。<br><img src='images/Mounting+the+Data+Volume+on+Windows-win-dis7.jpg' width='600' align='center'/></p>
<p>E槽即為您所掛載的硬碟，如下圖。<br><img src='images/Mounting+the+Data+Volume+on+Windows-win-dis8.jpg' width='600' align='center'/></p>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="Connect+windows.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="html/Connect+windows.html">遠端連線Windows主機</a>&nbsp;<a href="index.html?page=Connect+windows.md">(Connect+windows.md)</a><a href="#Connect+windows.md"></a></h1><br/><h1>Windows 遠端桌面連線</h1>
<p>MiCloud Windows Server預設開啓遠端桌面連線服務，讓您可以透過internet連線操控與安裝相關軟體，下面介紹如何使用遠端桌面連線從您的電腦連線至MiCloud Windows Server：</p>
<h2>Windows 下遠端桌面連線 Windows</h2>
<p>1.開啟&quot;遠端桌面連線&quot;,輸入您的ip並按下連線<br><img src='images/Connect+windows-p.png' width='450' align='center'/><br>2.輸入您的密碼,,進入後您就可以開始使用<br><img src='images/Connect+windows-p+-1.png' width='650' align='center'/></p>
<h2><img src='images/Connect+windows-p+-2.png' width='650' align='center'/></h2>
<h2>Linux 下遠端桌面連線 Windows</h2>
<p>1.再左上方搜尋欄位中輸入搜尋欄位中輸入&quot;remote desktop viewer&quot;,並點選開啟<br><img src='images/Connect+windows-x1.png' width='550' align='center'/><br>2.開啟&quot;remote desktop viewer&quot;於左上方點選連線<br><img src='images/Connect+windows-x2.png' width='550' align='center'/><br>3.於&quot;主機(H):&quot;欄位中輸入您將遠端連線的ip,&quot;使用者名稱(U):&quot;欄位中輸入您的帳號,並按下連線<br><img src='images/Connect+windows-x3.png' width='450' align='center'/><br>2.輸入您的密碼,,進入後您就可以開始使用<br><img src='images/Connect+windows-x4.png' width='650' align='center'/></p>
<h2><img src='images/Connect+windows-x5.png' width='650' align='center'/></h2>
<h2>Mac 下遠端桌面連線Windows</h2>
<p>Mac下使用遠端桌面連線至windows server，要先安裝Microsoft Remote Desktop Connection Client for Mac(<a href="http://www.microsoft.com/mac/remote-desktop-client">下載</a><br>相關設定如下:</p>
<p>1.安裝完成後，開啟Microsoft Remote Desktop Connection Client for Mac，輸入您的ip並按下connect。<br><img src='images/Connect+windows-RDCMacIntro.png' width='650' align='center'/></p>
<p>2.輸入您的User name及Password，而Domain為您主機的ip，您就可開始使用。<br><img src='images/Connect+windows-RDCMacLogin.png' width='650' align='center'/></p>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="Monitor+System.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="html/Monitor+System.html">系統監控</a>&nbsp;<a href="index.html?page=Monitor+System.md">(Monitor+System.md)</a><a href="#Monitor+System.md"></a></h1><br/><h1>主機監控之設定</h1>
<h2>Windows</h2>
<p>1.MiCloud平台虛擬主機之監控程式需使用nodejs來執行，<strong>請先登入您的Windows虛擬主機</strong>，再至<a href="http://nodejs.org/"><a href="http://nodejs.org/">http://nodejs.org/</a></a>下載並安裝 (如下圖)<br><img src='images/Monitor+System-node.png' width='650' align='center'/></p>
<p>2.請下載由MiCloud研發團隊撰寫的監控程式並解壓，下載網址為</p>
<pre><code>http://211.78.245.110:3000/install/nomon-lastest.tgz</code></pre>
<p><img src='images/Monitor+System-nom.png' width='500' align='center'/></p>
<p>3.請在桌面上新增一個副檔名為.bat的檔案(XXX.bat)，如下圖，這邊建立的檔案為test.bat<br><img src='images/Monitor+System-bat.png' width='500' align='center'/></p>
<p>在檔案上點選右鍵→編輯，在檔案中貼上下方指令(如下圖)</p>
<pre><code>node您將檔案解壓縮後存放的位置\main.js，主要用來設定排程應該執行哪支程式。</code></pre>
<p><img src='images/Monitor+System-node1.png' width='650' align='center'/></p>
<p>4.點選開始--系統管理工具--工作排程器，設定程式排程<br><img src='images/Monitor+System-p1.png' width='650' align='center'/></p>
<p>5.點選建立工作來新增排程<br><img src='images/Monitor+System-p2.png' width='650' align='center'/></p>
<p>6.在建立工作--一般，打上排程名稱，名稱可以自己命名，這裡舉例將它命名為”node”(如下圖)<br><img src='images/Monitor+System-p3.png' width='650' align='center'/></p>
<p>7.點選建立工作--觸發程序之新增並做設定，將排程設定為每5分鐘執行一次且是持續不間斷<br><img src='images/Monitor+System-p4.png' width='650' align='center'/><br><img src='images/Monitor+System-set.png' width='650' align='center'/></p>
<p>8.點選建立工作--動作之新增並設定，將前面設定的*.bat執行檔的路徑填入(步驟3中建立的檔案)<br><img src='images/Monitor+System-p6.png' width='650' align='center'/><br><img src='images/Monitor+System-p8.png' width='650' align='center'/></p>
<p>9.完成上方所有的排序設定後，即可在工作排程器主頁上的進行中工作裡看到您新增的排程。<br><img src='images/Monitor+System-p7.png' width='650' align='center'/></p>
<p>10.完成排程設定後，15分鐘後即可至MiCloud平台點選您所設置監控的主機，即可檢視您主機上的CPU、Memory、Disk的使用率。<br><img src='images/Monitor+System-cpu.png' width='650' align='center'/></p>
<p>歷史監控資料，可檢視一週、一個月或整年的監控狀況，並可下載近半年的原始資料。<br><img src='images/Monitor+System-cpu2.png' width='650' align='center'/></p>
<hr>
<h2>Linux</h2>
<p>1.登入MiCloud主機清單中，選擇任何一台Linux主機<br><img src='images/Monitor+System-pl1.png' width='650' align='center'/></p>
<p>2.進入主機細項後，請點選”主機監控”頁籤並點擊”複製指令”按鈕<br><img src='images/Monitor+System-pl2.png' width='650' align='center'/></p>
<p>3.完成上述步驟後，請登入您欲監控的虛擬主機並貼上剛剛的指令</p>
<pre><code># curl http://211.78.245.110:3000/install/install.sh | bash</code></pre>
<p><img src='images/Monitor+System-pl3.png' width='650' align='center'/></p>
<p>執行成功後，可由下方指令檢視監控程式是否己加入例行排程中</p>
<pre><code>#crontab -l</code></pre>
<p><img src='images/Monitor+System-pl4.png' width='650' align='center'/></p>
<p>4.cron job設定完成後，15分鐘後即可至MiCloud管理平台檢視您主機上的CPU、Memory、Disk的使用率。<br><img src='images/Monitor+System-pl5.png' width='650' align='center'/><br>也可以在歷史監控資料中查看週、月、年的資訊，並可下載近半年的原始資料。<br><img src='images/Monitor+System-pl6.png' width='650' align='center'/></p>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="Linux+Update+Timezone.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="html/Linux+Update+Timezone.html">時區設定</a>&nbsp;<a href="index.html?page=Linux+Update+Timezone.md">(Linux+Update+Timezone.md)</a><a href="#Linux+Update+Timezone.md"></a></h1><br/><h1>Linux (Redhat / Fedora / CentOS) 設定時間的方式</h1>
<p>(1) copy /usr/share/zoneinfo/* 內的確切時區資料檔案為 /etc/localtime</p>
<pre><code># cp /usr/share/zoneinfo/GMT+0 /etc/localtime</code></pre>
<p>(2) 執行 date -u</p>
<pre><code># date -u</code></pre>
<p>(3) 輸入 date 看看是否已經是正確時區</p>
<pre><code># date</code></pre>
<p>(4) 重開後生效</p>
<pre><code># reboot</code></pre>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="DNS+Manage.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="html/DNS+Manage.html">DNS管理</a>&nbsp;<a href="index.html?page=DNS+Manage.md">(DNS+Manage.md)</a><a href="#DNS+Manage.md"></a></h1><br/><h1>DNS設置</h1>
<p>若您想在MiCloud主機上設置DNS，請先至網址註冊商(例如:Godaddy)申請一個Domain Name，設置方式有以下二種:</p>
<ul>
<li>子網域指向MiCloud DNS Server</li>
<li>直接將您所申請的Domain Name指向MiCloud DNS Server<br>詳細說明如下:</li>
</ul>
<h2>設置子網域</h2>
<ol>
<li>請先新增一個子網域，並將Points to設為MiCloud DNS Server :</li>
</ol>
<pre><code>dns60.micloud.tw或dns64.micloud.tw</code></pre>
<p><img src='images/DNS+Manage-sub-1.png' width='650' align='center'/></p>
<p>2.新增完成後，請至MiCloud平台點選”DNS管理”下”專屬網域之主機”按鈕。<br><img src='images/DNS+Manage-sub-2.png' width='650' align='center'/><br><img src='images/DNS+Manage-sub-3.png' width='650' align='center'/></p>
<p>3.進入頁面後，請點選”新增Domain”按鈕，將剛剛所新增的子網域名稱加入頁面中。<br><img src='images/DNS+Manage-sub-4.png' width='650' align='center'/><br><img src='images/DNS+Manage-sub-5.png' width='650' align='center'/></p>
<p>4.新增成功後，點選”新增A Record”，即可為您的主機設置Domain name。<br><img src='images/DNS+Manage-sub-7.png' width='650' align='center'/><br><img src='images/DNS+Manage-sub-6.png' width='650' align='center'/></p>
<p>5.驗證Domain，使用命令提示字元或直接將您所設至的Domain Name貼至網址列即可。</p>
<p>命令提示字元請執行下方指令做驗證:</p>
<pre><code>nslookup portal.test.facewithus.com</code></pre>
<p><img src='images/DNS+Manage-sub-8.png' width='450' align='center'/></p>
<p>或者可以直接將記錄指向MiCloud DNS server查詢：</p>
<pre><code>nslookup portal.test.facewithus.com dns60.micloud.tw</code></pre>
<p><img src='images/DNS+Manage-sub-9.png' width='500' align='center'/></p>
<h2>設置整個網域</h2>
<ol>
<li>將您申請的網域名稱的server設至MiCloud DNS Server。以Godaddy為例。</li>
</ol>
<pre><code>MiCloud DNS Server:
DNS60.MICLOUD.TW
DNS64.MICLOUD.TW</code></pre>
<p><img src='images/DNS+Manage-all-1.png' width='650' align='center'/><br><img src='images/DNS+Manage-all-2.png' width='650' align='center'/></p>
<p>2.修改完成後，請至MiCloud平台點選”DNS管理”下”專屬網域之主機”按鈕。<br><img src='images/DNS+Manage-sub-2.png' width='650' align='center'/><br><img src='images/DNS+Manage-sub-3.png' width='650' align='center'/></p>
<p>3.進入頁面後，請點選”新增Domain”按鈕，將您的網域名稱新增至頁面中。<br><img src='images/DNS+Manage-sub-4.png' width='650' align='center'/><br><img src='images/DNS+Manage-all-3.png' width='650' align='center'/></p>
<p>4.新增成功後，點選”新增A Record”，即可為您的主機設置Domain name。<br><img src='images/DNS+Manage-sub-7.png' width='650' align='center'/><br><img src='images/DNS+Manage-all-4.png' width='650' align='center'/></p>
<p>5.驗證Domain，使用命令提示字元或直接將您所設至的Domain Name貼至網址列即可。</p>
<p>命令提示字元請執行下方指令做驗證:</p>
<pre><code>nslookup portal.test.facewithus.com</code></pre>
<p><img src='images/DNS+Manage-all-5.png' width='450' align='center'/></p>
<p>或者可以直接將記錄指向MiCloud DNS server查詢：</p>
<pre><code>nslookup portal.test.facewithus.com dns60.micloud.tw</code></pre>
<p><img src='images/DNS+Manage-all-6.png' width='450' align='center'/></p>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="Percona+install.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="html/Percona+install.html">安裝Percona</a>&nbsp;<a href="index.html?page=Percona+install.md">(Percona+install.md)</a><a href="#Percona+install.md"></a></h1><br/><h1>安裝Percona</h1>
<p>MiCloud只有在SmartOS中有預載Percona的服務，用戶可參考以下的步驟，在Linux環境下安裝。</p>
<h2>在CentOS中安裝Percona</h2>
<p>1.將Percona的套件安裝至主機的套件庫中</p>
<pre><code>#rpm -Uhv http://www.percona.com/downloads/percona-release/percona-release-0.0-1.x86_64.rpm</code></pre>
<p><img src='images/Percona+install-c1.png' width='650' align='center'/></p>
<p>2.請搜尋Percona的套件，並安裝下方框起來的二個套件</p>
<pre><code>#yum search percona</code></pre>
<p><img src='images/Percona+install-c2.png' width='650' align='center'/></p>
<p>3.安裝Percona</p>
<pre><code># yum install Percona-Server-client-55.x86_64</code></pre>
<p><img src='images/Percona+install-c3.png' width='650' align='center'/></p>
<pre><code># yum install Percona-Server-server-55.x86_64</code></pre>
<p><img src='images/Percona+install-c4.png' width='650' align='center'/></p>
<p>4.請至etc下建立一個檔案，且命名為my.cnf，並加入下方列出的幾個設定</p>
<pre><code>#vi /etc/my.cnf</code></pre>
<pre><code>[mysqld]
plugin-load=handlersocket.so

loose_handlersocket_port = 9998
# the port number to bind to (for read requests)

loose_handlersocket_port_wr = 9999
# the port number to bind to (for write requests)

loose_handlersocket_threads = 16
# the number of worker threads (for read requests)

loose_handlersocket_threads_wr = 1
# the number of worker threads (for write requests)

open_files_limit = 65535
# to allow handlersocket accept many concurrent
# connections, make open_files_limit as large as
# possible.</code></pre>
<p><img src='images/Percona+install-c5.png' width='650' align='center'/></p>
<p>5.啟動服務</p>
<pre><code>#service mysql start</code></pre>
<p><img src='images/Percona+install-c6.png' width='650' align='center'/></p>
<p>6.設定root密碼</p>
<pre><code># mysqladmin -u root password 1qaz</code></pre>
<p>7.登入mysql</p>
<pre><code>#mysql -uroot -p</code></pre>
<p><img src='images/Percona+install-c7.png' width='650' align='center'/></p>
<hr>
<h2>在Ubuntu、Debian安裝Percona</h2>
<p>1.下載Percona套件至套件套中並安裝</p>
<pre><code>#gpg --keyserver  hkp://keys.gnupg.net --recv-keys 1C4CBDCDCD2EFD2A
#gpg -a --export CD2EFD2A | sudo apt-key add -</code></pre>
<p><img src='images/Percona+install-u1.png' width='650' align='center'/></p>
<p>2.依照不同OS及OS版本，加入不同的設定至/etc/apt/sources.list中。</p>
<pre><code>#vi /etc/apt/sources.list</code></pre>
<p>2-1 Ubuntu</p>
<p>a. Ubuntu10</p>
<pre><code>deb http://repo.percona.com/apt lucid main
deb-src http://repo.percona.com/apt lucid main</code></pre>
<p><img src='images/Percona+install-u2.png' width='650' align='center'/></p>
<p>b. Ubuntu12</p>
<pre><code>deb http://repo.percona.com/apt precise main
deb-src http://repo.percona.com/apt precise main</code></pre>
<p><img src='images/Percona+install-u3.png' width='650' align='center'/></p>
<p>2-2 Debian</p>
<pre><code>deb http://repo.percona.com/apt squeeze main
deb-src http://repo.percona.com/apt squeeze main</code></pre>
<p><img src='images/Percona+install-d1.png' width='650' align='center'/></p>
<p>3.更新套件庫</p>
<pre><code>#apt-get update</code></pre>
<p><img src='images/Percona+install-u4.png' width='650' align='center'/></p>
<p>4.安裝Percona</p>
<pre><code>#apt-get install percona-server-server-5.5 percona-server-client-5.5</code></pre>
<p><img src='images/Percona+install-u5.png' width='650' align='center'/></p>
<p>5.設定root密碼</p>
<pre><code># mysqladmin -u root password 1qaz</code></pre>
<p>6.登入mysql</p>
<pre><code>#mysql -uroot -p</code></pre>
<p><img src='images/Percona+install-c7.png' width='650' align='center'/></p>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="Riak+SmartMachine.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="html/Riak+SmartMachine.html">安裝Riak</a>&nbsp;<a href="index.html?page=Riak+SmartMachine.md">(Riak+SmartMachine.md)</a><a href="#Riak+SmartMachine.md"></a></h1><br/><h1>安裝Riak</h1>
<p>Riak為開放式、高擴增性、可容錯的NoSQL資料庫套件，提供大量資料快速存儲服務，以開放程式碼為基礎的分散式資料庫系統。<br>MiCloud所提供的SmartOS主機中，已有預載Riak服務的主機只有SmartOS32+Riak這個版本，若其他規格的主機想安裝Riak於您的主機上，請按照下列步驟進行安裝。</p>
<p>1.檢視主機上Riak可安裝的版本</p>
<pre><code>#pkgin se riak</code></pre>
<p><img src='images/Riak+SmartMachine-p1.png' width='650' align='center'/></p>
<p>2.進行安裝</p>
<pre><code># pkgin in riak-1.0.2nb1</code></pre>
<p><img src='images/Riak+SmartMachine-p2.png' width='650' align='center'/></p>
<p>3.完成後啟動服務，但會發現服務的狀態為offline</p>
<pre><code>#svcadm enable riak
#svcs riak</code></pre>
<p><img src='images/Riak+SmartMachine-p3.png' width='650' align='center'/><br>請使用下方指令檢視服務無法啟動的原因</p>
<pre><code>#svcs -xv riak</code></pre>
<p><img src='images/Riak+SmartMachine-p4.png' width='650' align='center'/></p>
<p>4.啟動epmd服務，並將riak重新啟動</p>
<pre><code>#svcadm enable svc:/network/epmd:default
#svcadm disable riak
#svcadm enable riak</code></pre>
<p><img src='images/Riak+SmartMachine-p6.png' width='650' align='center'/></p>
<p>5.檢視服務是否已啟動</p>
<pre><code>#svcs riak</code></pre>
<p><img src='images/Riak+SmartMachine-p7.png' width='650' align='center'/></p>
<p>6.連線至riak</p>
<pre><code>#riak attach</code></pre>
<p><img src='images/Riak+SmartMachine-p8.png' width='650' align='center'/></p>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="Stingray+SmartMachine.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="html/Stingray+SmartMachine.html">Stingray 基本操作說明</a>&nbsp;<a href="index.html?page=Stingray+SmartMachine.md">(Stingray+SmartMachine.md)</a><a href="#Stingray+SmartMachine.md"></a></h1><br/><h1>Stingray基本操作說明</h1>
<h2>簡介</h2>
<p>Stingray原名Zeus，為Riverbed公司所購買之Zeus公司產品，專職負載平衡與網路流量管理相關功能。</p>
<p>研究Stingray的緣起是越來越多的專案使用到網路層的Load Balancer，因大型的軟體架構中，時常需要有負載平衡及Cluster的架構，而仰賴Apache或是簡單的Load Balancer軟體常常不能滿足需求，而硬體方式的Load Balancer像是BigIP或是Cisco相對應的負載平衡設備都往往超出預算而又超出一般軟體工程師可以觸及的範圍，在這些條件之下，Stingray反而圖顯了一些他存在的重要性。</p>
<p><img src='images/Stingray+SmartMachine-p1.PNG' width='650' align='center'/><br>Stingray的許多特性，造就他在雲端服務存在的必要性，排除原廠所簡介的特性，這邊以使用者觀點就價值核心的部份列出給大家參考：</p>
<ul>
<li>本身為軟體：這部份對軟體工程師而言是好消息，不需觸及硬體部份即可將一些網路之構想以Stingray所提供之介面實現，當然設定者本身也必需具備部份網路架構之基礎，方可收事半功倍之成效。另外，不少網路設備提供可程式化介面，但往往由於網路設備下所關係到的節點數量龐大，導致安全性上考量而無法釋放給軟體工程師太多空間進行管理與設定，而本身為軟體的優勢，讓您可以在任何節點部署架構，而佈至於影響到太多的網路節點。</li>
<li>提供各種程式語言實作之API介面：提供各種語言之API介面，也是方便系統架構與軟體工程師之特性，這部份讓系統環境中許多不定因素或是需要大量判斷之路由規則不在是夢想。</li>
<li>提供友善的Web管理界面：Web的管理介面通常是一套系統必備的工具，而Stingray提供的Web介面也出奇的簡單，並可在介面中對軟體或系統進行重新?動的操控，這部份也讓管理者可以減少在外部網路環境還需要SSH連線到作業系統的需求。</li>
<li>目前Stingray系列以model區分有三個系列：1000 Model, 2000 Model, 4000 Model，功能模組上稍有差異，其中2000系列以上提供的Global Load Balancing是最大差異，該功能提供使用者可以依地區性來進行區域網址的導向，簡單的說，就是可以做到讓美國的IP連線美國的主機、台灣的IP連線台灣的主機...</li>
<li>其他有些不錯的功能像頻寬管理、服務等級監控...等功能也是2000以上系列才有提供，不過這些開發測試版本都可以直接使用喔，唯差在頻寬限制而已...<br><img src='images/Stingray+SmartMachine-p2.PNG' width='450' align='center'/><br>Stingray價目表，參考至官網<br>在官方網站簡介中，Stingray之安裝規格最小為2GB，1GB的Ubuntu(LINUX)亦可以正常安裝，且可以運作，但是考慮到穩定性，建議還是依照官方建議規格進行安裝。<br><img src='images/Stingray+SmartMachine-p3.PNG' width='550' align='center'/><br>表：建議安裝規格</li>
</ul>
<h2>相關字彙</h2>
<p>在操作Stingray的過程中，常會遇到許多設定上的專有名詞，在此特別介紹一些使用上必備的專有名詞，在介紹之前，請先一起看一下Stingray的環境架構圖，其中上部箭頭代表request的來源，所有網路流量經由Stingray的對外IP:PORT進入，而此IP:PORT則是綁定在一臺Stingray設定的Virtual Server上，Virtual Server則可值接或間接(經由Rule重新導向)將需求導向到已設定之Pool，這樣就完成一個簡單的request重新導向的動作。而在這部份，Pool, Virtual Server, Rule...是Stingray的專有名詞，另外，如果您的服務是佈局全球，則您會需要GLB(Global Load Balancer)的服務，他可以幫助您視連線IP之地理位置而將IP導向最近的服務器位置。</p>
<h2>連線MiCloud Stingray Service</h2>
<p><img src='images/Stingray+SmartMachine-stingray-machine.png' width='650' align='center'/><br>MiCloud Stingray Appliance申請完成後，您可以在MiCloud Portal中該服務之資訊頁面看到相關連線資訊，其中點選credentials按鈕後可以找到您的登入密碼，登入時，請使用admin為登入帳號，並建議登入後，重設您的密碼。</p>
<h2>Pool</h2>
<p>Pool在Stingray中是一個以上的IP:PORT的代表，也是Stingray連線的出口位置，當有request指入時，Stingray會依照設定將request導至被指定的Pool上binding的主機IP:PORT位置。</p>
<h2>Virtual Server</h2>
<p>Virtual Server是Stingray環境中的一個入口代表，他會是Stingray本身之IP與一個PORT的結合。Stingray主機使用此一設定作為對外服務的一個端口，讓request由此進入，然後在導向配置的動作。</p>
<h2>Rule</h2>
<p>Rule為Virtual Server存取後方主機的規則，透過規則的管理，可以建置您伺服器群組上的規劃與應用。</p>
<h2>GLB</h2>
<p>Global Load Balancer，全球化的負載平衡，參考網路上相關論作(服務負載平衡)，GLB為提供全球的使用者，依照IP所對應之地理位置再進行重新導向到就近地區之服務提供伺服器之用。</p>
<h2>Multi-Site Manager</h2>
<p>提供串聯跨DataCenter之服務功能，讓不同的DataCenter中的主機可以達到負載平衡之目的。</p>
<h2>基本操作介面</h2>
<p>Stingray介面中以簡單的幾個區塊負責不同的功能模組之顯示，表頭部份包含有伺服器狀態列、工具列等資訊。其中狀態列顯示目前伺服器運作狀態，以便隨時在操作時候可以知道目前環境狀態：而Menu區塊則將Stingray之功能分模組顯示，另外的其他地方，則是用來顯示目前工作狀態與設定畫面的工作區域，其中，首頁的工作區域包含Traffic Manager狀態、服務中的Service與狀態、事件檢視等。</p>
<p><img src='images/Stingray+SmartMachine-p4.PNG' width='650' align='center'/></p>
<h2>基本附載平衡功能實作</h2>
<h2>情境說明：</h2>
<p>這邊實做一個簡單的Stingray的路由範例，目的是希望讓A IP的路由可以經由Stingray Server重新導向，此應用可作為DMZ與Server Farm之單一伺服器路由重導之實現，讓應用程式伺服器(如Tomcat, Weblogic, Websphere...)資源可透過DMZ網段之伺服器重導後提供服務於外部網路。<br><img src='images/Stingray+SmartMachine-p5.PNG' width='350' align='center'/></p>
<h2>步驟一：設定Pool</h2>
<p>在此我們要設定一個名稱為&quot;PHTTP_245.11_PORT8080&quot;的Pool，Pool的Name可以是任何文字，而Node的部份則為[IP] : [PORT] 的一組數值，其中IP可以是Stingray伺服器對應得到的一組DNS名稱。<br>在此範例中，Stingray伺服器位置為：211.78.245.31，而欲導向之伺服器位置為211.78.245.11:8080，並有一資源位置<a href="http://211.78.245.11:8080/test.html">http://211.78.245.11:8080/test.html</a></p>
<p><img src='images/Stingray+SmartMachine-p6.PNG' width='650' align='center'/></p>
<h2>步驟二：設定Virtual Server</h2>
<p>在此我們設定一個名稱為&quot;VS_HTTP_PORT8088&quot;的Virtual Server，Virtual Server之語意為虛擬之伺服器位置，透過Stingray對應之IP:PORT來使用此虛擬伺服器或伺服器群組，設定上必需要指定此Virtual Server要使用的協定，在此我們設定HTTP協定作為Virtual Server的協定，並選擇步驟一之&quot;PHTTP_245.11_PORT8080&quot;作為此Virtual Server欲導向之伺服器位置，設定完成後按下&quot;Create Virtual Server&quot;按鈕，則可建立Virtual Server。</p>
<p><img src='images/Stingray+SmartMachine-p7.PNG' width='450' align='center'/></p>
<h2>步驟三：啟動Virtual Server</h2>
<p>建立好之Virtual Server預設並未啟動，必需再點選該Virtual Server後，將Enabled調整至&quot;Yes&quot;後，點選&quot;Update&quot;按鈕後，才會?動方才之設定。</p>
<p><img src='images/Stingray+SmartMachine-p8.PNG' width='650' align='center'/></p>
<h2>步驟四：測試</h2>
<p>開?瀏覽器，並指向Stingray Server位置： <a href="http://211.78.245.31:8088/test.html">http://211.78.245.31:8088/test.html</a> ，預期此網址將會連線至 <a href="http://211.78.245.11:8080/test.html">http://211.78.245.11:8080/test.html</a></p>
<p><img src='images/Stingray+SmartMachine-p9.PNG' width='650' align='center'/></p>
<p><strong>Stingray 應用影片</strong><a href="http://www.youtube.com/embed/KM5bRJJDDaw">Go to YouTube</a></p>
<iframe width="640" height="480" src="http://www.youtube.com/embed/KM5bRJJDDaw?rel=0" align="center" frameborder="0" allowfullscreen ></iframe>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="MongoDB+SmartMachine.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="html/MongoDB+SmartMachine.html">安裝MongoDB 與操作說明</a>&nbsp;<a href="index.html?page=MongoDB+SmartMachine.md">(MongoDB+SmartMachine.md)</a><a href="#MongoDB+SmartMachine.md"></a></h1><br/><h1>MongoDB</h1>
<h2>在SmartOS上安裝MongoDB</h2>
<p>MiCloud 在SmartOS 32bit 提供預載MongoDB的服務，可以直接選擇此預載的套件，若當初沒有選擇預載服務，用戶可以依下列步驟進行安裝。</p>
<p>1.本範例將在 /tmp路徑下安裝MongoDB，請先切換至tmp目錄下。</p>
<pre><code># cd /tmp</code></pre>
<p><img src='images/MongoDB+SmartMachine-p1.png' width='650' align='center'/></p>
<p>2.利用crul指令下載，其指令如下:</p>
<pre><code># curl http://fastdl.mongodb.org/sunos5/mongodb-sunos5-x86_64-2.2.0.tgz &gt; mongodb.tgz</code></pre>
<p><img src='images/MongoDB+SmartMachine-p2.png' width='650' align='center'/></p>
<p>3.解開壓縮檔，並切換至mongodb-sunos5-x86_64-2.2.0下的bin目錄中:</p>
<pre><code># tar -zxvf mongodb.tgz
# cd mongodb-sunos5-x86_64-2.2.0/bin</code></pre>
<p><img src='images/MongoDB+SmartMachine-p3.png' width='650' align='center'/></p>
<p>4.建立資料庫的位置</p>
<pre><code># mkdir -p /data/db</code></pre>
<p><img src='images/MongoDB+SmartMachine-p4.png' width='650' align='center'/></p>
<p>5.連結資料庫，其指令如下:</p>
<pre><code># nohup ./mongod &amp;</code></pre>
<p><img src='images/MongoDB+SmartMachine-p5.png' width='650' align='center'/></p>
<p>6.執行mongo指令，即可進入環境操作</p>
<pre><code># ./mongo</code></pre>
<p><img src='images/MongoDB+SmartMachine-p6.png' width='650' align='center'/></p>
<h2>MongoDB操作說明</h2>
<p>1.檢視服務狀態:</p>
<p>若State為online，代表服務已啟動；反之，則代表未啟動。</p>
<pre><code># svcs mongodb</code></pre>
<p><img src='images/MongoDB+SmartMachine-p7.png' width='650' align='center'/></p>
<p>2.啟用服務:</p>
<p>利用svcadm enable mongodb指令來啟動服務，並以svcs指令來確認是否啟用成功。</p>
<pre><code># svcadm enable mongodb
# svcs mongodb</code></pre>
<p><img src='images/MongoDB+SmartMachine-p8.png' width='650' align='center'/></p>
<p>3.停止服務:</p>
<p>利用svcadm disable mongodb指令來啟動服務，並以svcs指令來確認是否已停止服務。</p>
<pre><code># svcadm disable mongodb
# svcs mongodb</code></pre>
<p><img src='images/MongoDB+SmartMachine-p9.png' width='650' align='center'/></p>
<p>4.連結至MongoDB：</p>
<p>在MiCloud平台中，自行安裝MongoDB及預載的連結方式有些許差異，自行安裝的連結方式，可參考前面介紹的指令；選擇預載的用戶，需要用admin來連結至MongoDB，其指令如下，另外，登入的密碼可以在主機細項的Credentials內查看。</p>
<pre><code># mongo -u admin -p admin</code></pre>
<p><img src='images/MongoDB+SmartMachine-p10.png' width='650' align='center'/><br><img src='images/MongoDB+SmartMachine-p11.png' width='650' align='center'/></p>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="Installing+Node.js+on+a+Joyent+SmartOS+SmartMachine.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="html/Installing+Node.js+on+a+Joyent+SmartOS+SmartMachine.html">安裝Node.js</a>&nbsp;<a href="index.html?page=Installing+Node.js+on+a+Joyent+SmartOS+SmartMachine.md">(Installing+Node.js+on+a+Joyent+SmartOS+SmartMachine.md)</a><a href="#Installing+Node.js+on+a+Joyent+SmartOS+SmartMachine.md"></a></h1><br/><h1>Node.js</h1>
<p>Node.js 是一個高效能、易擴充的網站應用程式開發框架 (Web Application Framework)，是為了讓開發者能夠更容易開發高延展性的網路服務。系統不需要經過太多複雜的調校、效能調整及程式修改，就能滿足網路服務在不同發展階段對效能的要求。</p>
<p>MiCloud所提供的SmartOS主機中，已有預載Nodejs服務的主機只有SmartOS Plus、SmartOS32+Nodejs這二種版本，若其他規格的主機想安裝Nodejs於您的主機上，請按照下列步驟進行安裝。</p>
<h2>在SmartOS上安裝Node.js</h2>
<p>利用pkgin指令搜尋node.js:</p>
<pre><code># pkgin search nodejs</code></pre>
<p><img src='images/Installing+Node.js+on+a+Joyent+SmartOS+SmartMachine-p1.PNG' width='650' align='center'/><br>如上圖的範例，顯示0.4.9版本可供下載安裝，利用pkgin指令安裝:</p>
<pre><code># pkgin install nodejs-0.4.9</code></pre>
<p><img src='images/Installing+Node.js+on+a+Joyent+SmartOS+SmartMachine-p2.PNG' width='650' align='center'/></p>
<h2>檢視是否安裝成功</h2>
<p>首先我們透過vi指令來建立名為server.js程式:</p>
<pre><code># vi server.js</code></pre>
<p><img src='images/Installing+Node.js+on+a+Joyent+SmartOS+SmartMachine-p3.PNG' width='650' align='center'/></p>
<p>然後進入編輯文字畫面進行編輯，我們加入下列基本的測試程式指令:</p>
<pre><code>var http = require(&#39;http&#39;);
http.createServer(function (req, res) {
res.writeHead(200, {&#39;Content-Type&#39;: &#39;text/plain&#39;});
res.end(&#39;Hello Node.js\n&#39;);
}).listen(8102, &quot;127.0.0.1&quot;);
console.log(&#39;Server running at http://127.0.0.1:8102/&#39;);</code></pre>
<p>在上方指令中，您可以在.listen後方加入沒有被使用的port(本範例是使用8102)，依序是localhost的網址。如下圖所示:<br><img src='images/Installing+Node.js+on+a+Joyent+SmartOS+SmartMachine-p4.png' width='650' align='center'/></p>
<p>最後就是執行server.js 檔案，且執行以下指令就可以看到您的伺服器會在所設定的網址啟動:</p>
<pre><code># node server.js</code></pre>
<p><img src='images/Installing+Node.js+on+a+Joyent+SmartOS+SmartMachine-p5.png' width='650' align='center'/></p>
<p>最後前往瀏覽器輸入您的localhost以及後方所設定port位置來確認是否運行成功，本操作以google瀏覽器做為範例，如有出現Hello Node.js文字時，表示成功:<br><img src='images/Installing+Node.js+on+a+Joyent+SmartOS+SmartMachine-p6.png' width='500' align='center'/></p>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="Npm+usage.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="html/Npm+usage.html">Npm安裝及操作</a>&nbsp;<a href="index.html?page=Npm+usage.md">(Npm+usage.md)</a><a href="#Npm+usage.md"></a></h1><br/><h1>NPM的安裝與操作</h1>
<p>Node.js 的套件管理工具(Node Package Manager)可以讓 Node.js 的開發者直接利用、擴充線上的套件庫（packages registry），加速軟體專案的開發。此外npm 提供很友善的搜尋功能，可以快速找到及安裝需要的套件，當這些套件發行新版本時，npm 也可以協助開發者自動更新這些套件。</p>
<h2>安裝NPM</h2>
<p>利用下方指令安裝</p>
<pre><code>#pkgin install npm</code></pre>
<p><img src='images/Npm+usage-p7.png' width='650' align='center'/></p>
<h2>搜尋可附加的套件</h2>
<p>Node.js是一個非常熱門的開發平台，有各式各樣的開放套件可以供用戶去下載安裝。而npm也提供了一個平台可以讓用戶去搜尋，用戶可以在網頁上看到最新、熱門、最多人用的套件下載或是建議等等。網站來源: <a href="https://npmjs.org/"><a href="https://npmjs.org/">https://npmjs.org/</a></a><br><img src='images/Npm+usage-p8.png' width='650' align='center'/></p>
<h2>安裝套件</h2>
<p>我們以request.js來當作範例來安裝，輸入以下指令及可以安裝:</p>
<pre><code>#npm install request -gd</code></pre>
<p><img src='images/Npm+usage-p9.png' width='650' align='center'/><br>PS: -g代表安裝到NODE_PATH裡的lib裏面，而-d代表把相依性套件也一起安裝</p>
<h2>檢視己安裝套件</h2>
<p>安裝完成後Node.js所需要套件的安裝、升級、移除都靠npm這個套件來運作。我們可以利用npm list指令來看套件列表，在預設狀態下會顯示empty，而下圖範例已裝好一些套件:</p>
<pre><code># npm list</code></pre>
<p><img src='images/Npm+usage-p10.png' width='650' align='center'/><br>如果用戶在執行此指令時看到套件名稱前面有亂碼的產生，表示在預設狀態下的編碼是錯誤且無法讀取。用戶必須先在putty上先設定好編碼，如下圖:<br><img src='images/Npm+usage-p11.png' width='650' align='center'/></p>
<h2>更新套件</h2>
<p>利用npm update來更新我們已有的套件，如下圖:</p>
<pre><code># npm update</code></pre>
<p><img src='images/Npm+usage-p12.png' width='650' align='center'/></p>
<h2>移除套件</h2>
<p>利用npm uninstall指令來刪除既有套件，以textlogin套件為例，如下圖:</p>
<pre><code># npm uninstall textlogin</code></pre>
<p><img src='images/Npm+usage-p13.png' width='650' align='center'/></p>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="Install+MySQL+on+SmartOS.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="html/Install+MySQL+on+SmartOS.html">SmartOS上安裝及設定</a>&nbsp;<a href="index.html?page=Install+MySQL+on+SmartOS.md">(Install+MySQL+on+SmartOS.md)</a><a href="#Install+MySQL+on+SmartOS.md"></a></h1><br/><h1>SmartOS上安裝MySQL</h1>
<p>MiCloud在SmartOS Plus、SmartOS32中提供預載MySQL的服務，若剛開始沒有選擇預載之用戶，可以參考以下的步驟進行安裝，由於32bit及64bit的安裝過程有些許差異，故分開描述。</p>
<h2>SmartOS 32bit安裝步驟</h2>
<p>1.請先搜尋MySQL的套件，並找到mysql-server最高版本</p>
<pre><code># pkgin se mysql</code></pre>
<p><img src='images/Install+MySQL+on+SmartOS-p1.png' width='650' align='center'/></p>
<p>2.安裝MySQL</p>
<pre><code># pkgin in mysql-server-5.5.16nb1</code></pre>
<p><img src='images/Install+MySQL+on+SmartOS-p2.png' width='650' align='center'/></p>
<p>3.安裝完成後，請先找到mysql.xml，並修改此檔。</p>
<pre><code># find / -name mysql.xml</code></pre>
<p><img src='images/Install+MySQL+on+SmartOS-p3.png' width='650' align='center'/></p>
<pre><code># vi /opt/local/share/smf/manifest/mysq l.xml</code></pre>
<p>進入編輯畫面後， 請將下圖中這二個參數路徑改為/opt/local/share/smf/method/svc-mysql，指令如下</p>
<pre><code>&lt;exec_method name=&#39;start&#39; type=&#39;method&#39; exec=&#39;/opt/local/share/smf/method/svc-mysql start&#39; timeout_seconds=&#39;18446744073709551615&#39;/&gt;
&lt;exec_method name=&#39;stop&#39; type=&#39;method&#39; exec=&#39;/opt/local/share/smf/method/svc-mysql stop&#39; timeout_seconds=&#39;18446744073709551615&#39;/&gt;</code></pre>
<p><img src='images/Install+MySQL+on+SmartOS-p8.png' width='650' align='center'/></p>
<p>4.將mysql.xml匯入smf中</p>
<pre><code># svccfg import /opt/local/share/smf/manifest/mysql.xml</code></pre>
<p><img src='images/Install+MySQL+on+SmartOS-p5.png' width='650' align='center'/></p>
<p>5.先關閉後再重新啟動MySQL服務</p>
<pre><code># svcadm disable mysql
# svcadm enable mysql</code></pre>
<p><img src='images/Install+MySQL+on+SmartOS-p6.png' width='650' align='center'/></p>
<p>6.檢視服務是否啟動</p>
<pre><code># svcs mysql</code></pre>
<p><img src='images/Install+MySQL+on+SmartOS-p7.png' width='650' align='center'/></p>
<p>7.設置MySQL登入密碼，密碼可自訂，這裡舉例為1qaz</p>
<pre><code># mysqladmin -u root password 1qaz</code></pre>
<p>8.連線至MySQL</p>
<pre><code># mysql -uroot -p</code></pre>
<p><img src='images/Install+MySQL+on+SmartOS-p4.png' width='650' align='center'/></p>
<h2>SmartOS 64bit安裝步驟</h2>
<p>1.請先搜尋MySQL的套件</p>
<pre><code># pkgin se mysql</code></pre>
<p><img src='images/Install+MySQL+on+SmartOS-p61.png' width='650' align='center'/></p>
<p>2.以安裝5.1.58為例</p>
<pre><code># pkgin in mysql-server-5.1.58</code></pre>
<p><img src='images/Install+MySQL+on+SmartOS-p62.png' width='650' align='center'/></p>
<p>3.先關閉後再啟動MySQL服務</p>
<pre><code># svcadm disable mysql
# svcadm enable mysql</code></pre>
<p><img src='images/Install+MySQL+on+SmartOS-p6.png' width='650' align='center'/></p>
<p>4.檢視服務是否啟動</p>
<pre><code># svcs mysql</code></pre>
<p><img src='images/Install+MySQL+on+SmartOS-p7.png' width='650' align='center'/></p>
<p>5.設置MySQL登入密碼，密碼可自訂，這裡舉例為1qaz</p>
<pre><code># mysqladmin -u root password 1qaz</code></pre>
<p>6.連線至MySQL</p>
<pre><code># mysql -uroot -p</code></pre>
<p><img src='images/Install+MySQL+on+SmartOS-p4.png' width='650' align='center'/></p>
<p>7.外部連線設定</p>
<p>因為SmartOS 64因安全性考量，目前服務安裝完成後預設IP是binding 127.0.0.1，所以3306 port服務外部不能連線,可以透過更新MySQL設定來開放外部連線：</p>
<pre><code># vi /opt/local/etc/my.cnf</code></pre>
<p>修改下方紅色框框部份<br><img src='images/Install+MySQL+on+SmartOS-set.png' width='650' align='center'/></p>
<p>關閉服務，再重新啓動，連線設定即完成</p>
<pre><code># svcadm disable mysql
# svcadm enable mysql</code></pre>
<hr>
<h2>重設root密碼</h2>
<p>若您忘記MySQL的root密碼，可以用以下的方式重設密碼</p>
<p>1.請先將Mysql服務停止</p>
<pre><code># svcadm disable mysql</code></pre>
<p>2.在/home/admin下建立一個檔案名稱為reset-mysql-root-password-init，並在檔案內加入密碼設定指令</p>
<pre><code>#vi /home/admin/reset-mysql-root-password-init</code></pre>
<p>在檔案中加入下方指令。(密碼您可以自行輸入，這裡以1234為範例)</p>
<pre><code>UPDATE mysql.user SET Password=PASSWORD(&#39;1234&#39;) WHERE User=&#39;root&#39;;
FLUSH PRIVILEGES;</code></pre>
<p><img src='images/Install+MySQL+on+SmartOS-p63.png' width='650' align='center'/></p>
<p>3.使用特殊的MySQL伺服器 - 初始化文件選項</p>
<pre><code># /opt/local/bin/mysqld_safe --init-file=/home/admin/reset-mysql-root-password-init &amp;</code></pre>
<p><img src='images/Install+MySQL+on+SmartOS-p64.png' width='650' align='center'/></p>
<p>4.關閉MySQL</p>
<pre><code># svcadm disable network/mysql</code></pre>
<p>5.刪除創建的文件:</p>
<pre><code># rm /home/admin/reset-mysql-root-password-init</code></pre>
<p>6.重新啟動MySQL服務:</p>
<pre><code># svcadm enable network/mysql</code></pre>
<p>7.驗證密碼是否已更改</p>
<pre><code># mysql -uroot -p</code></pre>
<p><img src='images/Install+MySQL+on+Linux-p11.png' width='650' align='center'/></p>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="Install+MySQL+on+Linux.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="html/Install+MySQL+on+Linux.html">Linux上安裝及設定</a>&nbsp;<a href="index.html?page=Install+MySQL+on+Linux.md">(Install+MySQL+on+Linux.md)</a><a href="#Install+MySQL+on+Linux.md"></a></h1><br/><h1>Linux系統上安裝MySQL</h1>
<p>依下達的指令不同，各作業系統的安裝說明如下:</p>
<h2>CentOS、Fedora 安裝MySQL</h2>
<p>1.請使用yum安裝</p>
<pre><code>#yum install mysql-server</code></pre>
<p><img src='images/Install+MySQL+on+Linux-p1.png' width='650' align='center'/></p>
<p>2.啟動MySQL服務</p>
<pre><code>#service mysqld start</code></pre>
<p><img src='images/Install+MySQL+on+Linux-p2.png' width='650' align='center'/></p>
<p>3.設置MySQL登入密碼，密碼可自訂，這裡舉例為1qaz</p>
<pre><code>#mysqladmin -u root password 1qaz</code></pre>
<p>4.連線至MySQL</p>
<pre><code>#mysql -uroot -p</code></pre>
<p><img src='images/Install+MySQL+on+Linux-p4.png' width='650' align='center'/></p>
<h2>Ubuntu、Debian 安裝MySQL</h2>
<p>1.請使用apt-get安裝MySQL</p>
<pre><code>#apgt-get install mysql-server</code></pre>
<p><img src='images/Install+MySQL+on+Linux-p5.png' width='650' align='center'/></p>
<p>2.啟動MySQL服務</p>
<pre><code>#service mysql start</code></pre>
<p><img src='images/Install+MySQL+on+Linux-p6.png' width='650' align='center'/></p>
<p>3.設置MySQL登入密碼，密碼可自訂，這裡舉例為1qaz</p>
<pre><code>#mysqladmin -u root password 1qaz</code></pre>
<p>4.連線至MySQL</p>
<pre><code>#mysql -uroot -p</code></pre>
<p><img src='images/Install+MySQL+on+Linux-p4.png' width='650' align='center'/></p>
<hr>
<h2>重設root密碼</h2>
<p>若您忘記MySQL的root密碼，可以用以下的方式重設密碼:<br>1.請先將MySQL服務停止</p>
<pre><code>#service mysqld stop</code></pre>
<p><img src='images/Install+MySQL+on+Linux-p7.png' width='650' align='center'/></p>
<p>2.以不檢查密碼的方式啟動MySQL</p>
<pre><code>#mysqld_safe --skip-grant-tables&amp;</code></pre>
<p><img src='images/Install+MySQL+on+Linux-p8.png' width='650' align='center'/></p>
<p>3.登入MySQL</p>
<pre><code>#mysql</code></pre>
<p>4.將root密碼重新設定為1234</p>
<pre><code>mysql&gt;update mysql.user set password=PASSWORD(&#39;1234&#39;) where user=&#39;root&#39;;</code></pre>
<p>5.執行上一個步驟所下達的密碼設定指令</p>
<pre><code>mysql&gt; flush privileges;</code></pre>
<p>6.退出MySQL</p>
<pre><code>mysql&gt; quit</code></pre>
<p><img src='images/Install+MySQL+on+Linux-p9.png' width='650' align='center'/></p>
<p>7.重新啟動MySQL</p>
<pre><code>#service mysqld restart</code></pre>
<p><img src='images/Install+MySQL+on+Linux-p10.png' width='650' align='center'/></p>
<p>8.驗證密碼是否已更改</p>
<pre><code>#mysql -uroot -p</code></pre>
<p><img src='images/Install+MySQL+on+Linux-p11.png' width='650' align='center'/></p>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="MiCloud+Self-Service+Portal.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="html/MiCloud+Self-Service+Portal.html">在MiCloud上建置我的雲端服務</a>&nbsp;<a href="index.html?page=MiCloud+Self-Service+Portal.md">(MiCloud+Self-Service+Portal.md)</a><a href="#MiCloud+Self-Service+Portal.md"></a></h1><br/><h1>MiCloud Self-Service Portal實作</h1>
<h2>主題：我的第一個雲端服務</h2>
<h2>我的雲端服務簡介</h2>
<ul>
<li>線上紫微計算服務，透過輸入出生年月日計算紫微命盤</li>
<li>此服務提供各地命理老師可以透過遠端電腦或行動裝置連線計算，並管理客戶資料</li>
<li>服務的高峰時間約是過年期間前後兩個月</li>
</ul>
<h2>從申請MiCloud IaaS服務開始</h2>
<iframe width="560" height="315" src="http://www.youtube.com/embed/1tyCRWOp2Xo" frameborder="0" allowfullscreen></iframe>

<h2>連線我的MiCloud主機</h2>
<iframe width="560" height="315" src="http://www.youtube.com/embed/BrmyCzOI0uY" frameborder="0" allowfullscreen></iframe>

<h2>部署我的應用程式</h2>
<p>Tomcat服務安裝</p>
<iframe width="560" height="315" src="http://www.youtube.com/embed/ya76xIDdhmQ" frameborder="0" allowfullscreen></iframe>

<p>War檔部屬</p>
<iframe width="560" height="315" src="http://www.youtube.com/embed/hBH6ZzEoAEc" frameborder="0" allowfullscreen></iframe>

<h2>使用&quot;分析功能&quot;監看服務運行狀態</h2>
<iframe width="560" height="315" src="http://www.youtube.com/embed/MIfnWHD0j2c" frameborder="0" allowfullscreen></iframe>


<h2>預防尖峰流量拖垮服務：Scale Out應用服務-線上增加主機</h2>
<iframe width="560" height="315" src="http://www.youtube.com/embed/6QxgkmEs_zE" frameborder="0" allowfullscreen></iframe>


</p><hr style="border-top: 1px dotted #f00;"/><p  id="Using+DTrace+on+MySQL.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="html/Using+DTrace+on+MySQL.html">使用DTrace分析MySQL</a>&nbsp;<a href="index.html?page=Using+DTrace+on+MySQL.md">(Using+DTrace+on+MySQL.md)</a><a href="#Using+DTrace+on+MySQL.md"></a></h1><br/><h1>Using DTrace on MySQL</h1>
<p>Even though there aren&#39;t DTrace probes for MySQL released yet, we can still get useful information from MySQL. DTrace has a pid provider which allows us to get into any function the program is executing and see it&#39;s arguments. The only drawback is you have to go digging around in the source code to find out what you want to see. But thanks to guys like Brendan Gregg, they have already done some of the digging for us</p>
<p>Even if we want to go digging around ourselves, it&#39;s really not that hard; you just have to get your feet wet. And because SmartMachines have DTrace probes enabled, you can take advantage of using DTrace on MySQL. I will show some examples of this and how easy it is to hunt down your own functions.</p>
<p>First let&#39;s start with functions that have already been dug up for us:</p>
<pre><code>mysql_parse(thd, thd-&gt;query, length, &amp; found_semicolon);</code></pre>
<p>This is the function MySQL uses to parse a query. So all we have to do is trace this function through the pid provider and we get to see all the queries coming through. This shows arg1 as being the query, and we must copy it in to kernel land where DTrace works for it to see the string:</p>
<pre><code>root@ferrari:~# dtrace -qn &#39;pid$target:mysqld:*mysql_parse*:entry { printf(&quot;%Y     %s\n&quot;, walltimestamp, copyinstr(arg1)) }&#39; -p `pgrep -x mysqld`
2007 Sep 27 10:04:35     select * from blah
2007 Sep 27 10:04:58     select * from tablenothere</code></pre>
<p>Notice that this will show all queries, even if they aren&#39;t successful. Now that we can trace queries, this can give us good information. For example we can see what queries are executed the most:</p>
<pre><code>root@ferrari:~# dtrace -qn &#39;pid$target:mysqld:*mysql_parse*:entry { @queries[copyinstr(arg1)] = count() }&#39; -p `pgrep -x mysqld`](root@ferrari:~# dtrace -qn &#39;pid$target:mysqld:*mysql-parse*:entry { @queries[copyinstr - arg1 = count -  }&#39; -p `pgrep -x mysqld`)
^C

select * from blah                                                5
select * from tablenothere                                       10</code></pre>
<p>You can&#39;t get this kind of information from MySQL unless you write some kind of script to parse through the query log. If we know that there is a query being executed 1000 more times than the others, we could always try to get this one to cache. Now lets say we want to find out how long a query took to execute. The function mysql_execute_command does the actual execution of the queries so all we do here is subtract the entry and return timestamps of this function. The script shown below uses this:</p>
<pre><code>root@ferrari:~# ./exactquerytimes.d -p `pgrep -x mysqld`
Tracing... Hit Ctrl-C to end.

Query: SELECT COUNT(*) FROM joe_visitors where  upper(vs_browser) not like &#39;%GOOGLE%&#39; and upper(vs_browser) not like &#39;%GOOGLE BOT%&#39; and upper(vs_browser) not like &#39;%BOT%&#39; and upper(vs_browser) not like &#39;%MSN%&#39; and upper(vs_browser) not like &#39;%MSNBOT%&#39; and upper(,

Time: 2.32</code></pre>
<p>On the MySQL side, it showed this query being executed at 2.32 seconds as well:</p>
<p>1 row in set (2.32 sec).</p>
<p>This is awesome information because as of now MySQL doesn&#39;t allow you to see a slow query that is less than 1 second (I believe this is a fix in MySQL 5.1). So with this, we can see not just slow queries, but all queries and how long they take to execute with their times.</p>
<p>Now let&#39;s try this same query but I bumped my query_cache_size up to 50M:</p>
<p>The first try (won&#39;t hit the cache):</p>
<pre><code>root@ferrari:~# ./exactquerytimes.d -p `pgrep -x mysqld`
Tracing... Hit Ctrl-C to end.

Query: SELECT COUNT(*) FROM joe_visitors where  upper(vs_browser) not like &#39;%GOOGLE%&#39; and upper(vs_browser) not like &#39;%GOOGLE BOT%&#39; and upper(vs_browser) not like &#39;%BOT%&#39; and upper(vs_browser) not like &#39;%MSN%&#39; and upper(vs_browser) not like &#39;%MSNBOT%&#39; and upper(,

Time: 2.28</code></pre>
<p>And the second try hits the cache but doesn&#39;t show anything through DTrace. So this means a query that is served from the cache won&#39;t show up in mysql_parse. Right now this probably doesn&#39;t mean much, but as you learn more about how the internals of MySQL work, then troubleshooting becomes much easier down the road.</p>
<p>So far this has all been information that was provided. Now I will show how simple it is search through MySQL&#39;s source and look at functions.</p>
<p>First we need to decide what to look for. Let&#39;s say we want to find out every time that slow query is written to the slow query log. First we download the MySQL source code from <a href="http://www.mysql.com">http://www.mysql.com</a>. Now we can search through the source code for &#39;slow query&#39;:</p>
<pre><code>root@ferrari:/export/home/derek/mysql-5.0.45# ggrep -ri &#39;slow query&#39; *</code></pre>
<p>This turns up only a few source code files, one of them looking most obvious called log.cc with the expression &quot;Write to the query log&quot;. The MySQL code is very well commented so it makes searching really easy. Looking in this file, that comment is right above the function:</p>
<pre><code>/*
Write to the slow query log.
*  /
bool MYSQL_LOG::write(THD *thd,const char *query, uint query_length,
                      time_t query_start_arg)</code></pre>
<p>It&#39;s obvious that this function is the function that writes to the slow query log. Running this script below, looking for function LOG while a slow query is being inserted shows this function being executed with some weird characters around it:</p>
<pre><code>root@ferrari:~# dtrace -F -n &#39;pid$1:mysqld:*LOG*:entry {} pid$1:mysqld:*LOG*:return {}&#39; `pgrep -x mysqld`
dtrace: description &#39;pid$1:mysqld:*LOG*:entry &#39; matched 126 probes
CPU FUNCTION
0  -&gt; _ZN9MYSQL_LOG5writeEP3THD19enum_server_commandPKcz
0  -&gt; _ZN9MYSQL_LOG5writeEP3THDPKcjl
0  &lt; - _ZN9MYSQL_LOG5writeEP3THDPKcjl</code></pre>
<p>The only thing bad about tracing MySQL through the pid provider is that these weird characters change between MySQL versions, so we can&#39;t always trace for &#39;_ZN9MYSQL_LOG5writeEP3THDPKcjl&#39; if we want it to work on other machines. We have to trace for MYSQ*LOG*write which slowquerycounts.d uses:</p>
<pre><code>root@ferrari:~# ./slowquerycounts.d -p `pgrep -x mysqld`
Tracing... Hit Ctrl-C to end.

SELECT COUNT(*) FROM joe_visitors where  upper(vs_browser) not like &#39;%GOOGLE%&#39; and upper(vs_browser) not like &#39;%GOOGLE BOT%&#39; and upper(vs_browser) not like &#39;%BOT%&#39; and upper(vs_browser) not like &#39;%MSN%&#39; and upper(vs_browser) not like &#39;%MSNBOT%&#39; and upper(

3</code></pre>
<p>As you can see DTrace can be very powerful even if we don&#39;t have probes released yet, we just have to do a little extra work. Some of the information shown can be obtained from MySQL, but using DTrace still provides a benefit because we don&#39;t have to enable anything in the MySQL configuration, possibly making us restart the server. I&#39;m providing these scripts in the <a href="http://hell.jedicoder.net/files/MySQLDTraceKit.tar.gz">MySQLDTraceKit.tar.gz</a><br>Hopefully in the near future we will have real MySQL probes.</p>
<hr>
<p>資料來源：<a href="http://wiki.joyent.com/display/www/Documentation+Home">Joyent Wiki</a></p>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="sdcAnalytics.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="html/sdcAnalytics.html">MiCloudAPI Analysis</a>&nbsp;<a href="index.html?page=sdcAnalytics.md">(sdcAnalytics.md)</a><a href="#sdcAnalytics.md"></a></h1><br/><h1>MiCloud API Analysis</h1>
<p>MiCloud繼承Joyent的雲端平台，提供有一個進階的服務監控方式 -- Dtrace，這是個非常進階的狀態監控系統，原生於Solaris Unix上，已有Mac與SmartOS的實作套件，亦可於MiCloud環境上直接使用。本篇講解如何使用CloudAPI操作此部份分析功能…<br>首先請大家先準備好Node.js環境與CloudAPI，假設大家已經安裝好Node.js，那只要透過下面指令就可以安裝CloudAPI(由於SDC環境持續改板中，請安裝對應目前MiCloud環境的smartdc套件，目前選定的是6.5.4版本的smartdc): </p>
<pre><code>npm install smartdc@6.5.4</code></pre>
<p>安裝好相關套件後，可以透過sdc-describeanalytics指令查詢有哪些可用分析：</p>
<pre><code>$ sdc-describeanalytics</code></pre>
<p>針對回應的部份將會相當長…其中切幾個部分來看：</p>
<p>(1). 模組概述： 此部份為所有監控項目的大略說明</p>
<pre><code>{
  &quot;modules&quot;: {
    &quot;cpu&quot;: {
      &quot;label&quot;: &quot;CPU&quot;
    },
    &quot;memory&quot;: {
      &quot;label&quot;: &quot;Memory&quot;
    },
    &quot;mysql&quot;: {
      &quot;label&quot;: &quot;MySQL&quot;
    },
    …(略)
    &quot;zfs&quot;: {
      &quot;label&quot;: &quot;ZFS&quot;
    }
  },</code></pre>
<p>(2). 欄位說明： 此部份為每種欄位的設定說明</p>
<pre><code>  &quot;fields&quot;: {
    &quot;zonename&quot;: {
      &quot;label&quot;: &quot;zone name&quot;,
      &quot;type&quot;: &quot;string&quot;
    },
    &quot;pid&quot;: {
      &quot;label&quot;: &quot;process identifier&quot;,
      &quot;type&quot;: &quot;string&quot;
    },
    &quot;execname&quot;: {
      &quot;label&quot;: &quot;application name&quot;,
      &quot;type&quot;: &quot;string&quot;
    },
    …(略)
    &quot;errno&quot;: {
      &quot;label&quot;: &quot;error code&quot;,
      &quot;type&quot;: &quot;string&quot;
    },
    &quot;zdataset&quot;: {
      &quot;label&quot;: &quot;ZFS dataset&quot;,
      &quot;type&quot;: &quot;string&quot;
    }
  },</code></pre>
<p>(3). 型別說明：此部份說明於分析上定義的基本資料型態有哪些...</p>
<pre><code>  &quot;types&quot;: {
    &quot;string&quot;: {
      &quot;name&quot;: &quot;string&quot;,
      &quot;arity&quot;: &quot;discrete&quot;,
      &quot;unit&quot;: &quot;&quot;
    },
    &quot;subsecond&quot;: {
      &quot;arity&quot;: &quot;numeric&quot;,
      &quot;unit&quot;: &quot;seconds&quot;,
      &quot;abbr&quot;: &quot;s&quot;,
      &quot;base&quot;: 10,
      &quot;power&quot;: -3,
      &quot;name&quot;: &quot;subsecond&quot;
    },
    …(略)
    &quot;number&quot;: {
      &quot;arity&quot;: &quot;numeric&quot;,
      &quot;name&quot;: &quot;number&quot;,
      &quot;unit&quot;: &quot;&quot;
    }
  },</code></pre>
<p>(4). 可用監控設定說明： 這個是主要監控要設定的參考值...</p>
<pre><code>  &quot;metrics&quot;: [
    {
      &quot;module&quot;: &quot;cpu&quot;,
      &quot;stat&quot;: &quot;thread_samples&quot;,
      &quot;label&quot;: &quot;thread samples&quot;,
      &quot;interval&quot;: &quot;interval&quot;,
      &quot;fields&quot;: [
        &quot;zonename&quot;,
        &quot;pid&quot;,
        &quot;execname&quot;,
        &quot;psargs&quot;,
        &quot;ppid&quot;,
        &quot;pexecname&quot;,
        &quot;ppsargs&quot;,
        &quot;subsecond&quot;
      ],
      &quot;unit&quot;: &quot;samples&quot;
    },
    {
      &quot;module&quot;: &quot;cpu&quot;,
      &quot;stat&quot;: &quot;thread_executions&quot;,
      &quot;label&quot;: &quot;thread executions&quot;,
      &quot;interval&quot;: &quot;interval&quot;,
      &quot;fields&quot;: [
        &quot;zonename&quot;,
        &quot;pid&quot;,
        &quot;execname&quot;,
        &quot;psargs&quot;,
        &quot;ppid&quot;,
        &quot;pexecname&quot;,
        &quot;ppsargs&quot;,
        &quot;leavereason&quot;,
        &quot;runtime&quot;,
        &quot;subsecond&quot;
      ],
      &quot;unit&quot;: &quot;operations&quot;
    },…(略)
    {
      &quot;module&quot;: &quot;zfs&quot;,
      &quot;stat&quot;: &quot;dataset_quota&quot;,
      &quot;label&quot;: &quot;quota size&quot;,
      &quot;interval&quot;: &quot;point&quot;,
      &quot;fields&quot;: [
        &quot;zdataset&quot;
      ],
      &quot;type&quot;: &quot;size&quot;
    }
  ],</code></pre>
<p>(5). 轉換說明：此部份可以透過IP轉換地理位置，來進階顯示於世界地圖上…</p>
<pre><code>  &quot;transformations&quot;: {
    &quot;geolocate&quot;: {
      &quot;label&quot;: &quot;geolocate IP addresses&quot;,
      &quot;fields&quot;: [
        &quot;raddr&quot;
      ]
    },
    &quot;reversedns&quot;: {
      &quot;label&quot;: &quot;reverse dns IP addresses lookup&quot;,
      &quot;fields&quot;: [
        &quot;raddr&quot;
      ]
    }
  }
}</code></pre>
<p>建立分析項目前，我們先來看看建立分析的指令… </p>
<pre><code>$ sdc-createinstrumentation --help
sdc-createinstrumentation [--account string] [--clone number] [--debug boolean] [--decomposition string] [--help boolean] [--identity path] [--keyId string] [--module string] [--predicate string] [--stat string] [--url url]</code></pre>
<p>這邊我們先測試監控cpu的值，使用&quot;--module cpu --stat usage&quot;來建立分析項目，而執行後，系統匯吐回完整的設定值：</p>
<pre><code>$ sdc-createinstrumentation --module cpu --stat usage
{
  &quot;module&quot;: &quot;cpu&quot;,
  &quot;stat&quot;: &quot;usage&quot;,
  &quot;predicate&quot;: {},
  &quot;decomposition&quot;: [],
  &quot;value-dimension&quot;: 1,
  &quot;value-arity&quot;: &quot;scalar&quot;,
  &quot;enabled&quot;: true,
  &quot;retention-time&quot;: 600,
  &quot;idle-max&quot;: 3600,
  &quot;transformations&quot;: {},
  &quot;nsources&quot;: 0,
  &quot;granularity&quot;: 1,
  &quot;persist-data&quot;: false,
  &quot;crtime&quot;: 1371829609584,
  &quot;value-scope&quot;: &quot;point&quot;,
  &quot;id&quot;: &quot;3&quot;,
  &quot;uris&quot;: [
    {
      &quot;uri&quot;: &quot;/peihsinsu@hotmail.com/analytics/instrumentations/1/value/raw&quot;,
      &quot;name&quot;: &quot;value_raw&quot;
    }
  ]
}</code></pre>
<p>植入監控後，接下來就是採收了，剛剛上面的監控設定好後，有回傳整個監控的詳細設定，其中有個id欄位，是整個監控取值的重點，透過sdc-getinstrumentation加上id來取回監控的結果…<br>首先來看看sdc-getinstrumentation可以使用哪些參數：</p>
<pre><code>$ sdc-getinstrumentation --help
sdc-getinstrumentation [--account string] [--debug boolean] [--help boolean] [--identity path] [--keyId string] [--value boolean] [--url url]  instrumentation_id</code></pre>
<p>這邊我們使用&quot;--value true&quot;來指定回傳部分為值，並在最後帶入&quot;3&quot;，就是剛剛建完監控所回傳的id欄位值，然後我們可以得到下面的結果：</p>
<pre><code>$ sdc-getinstrumentation --value true 3
{
  &quot;value&quot;: 0,
  &quot;transformations&quot;: {},
  &quot;start_time&quot;: 1371829715,
  &quot;duration&quot;: 1,
  &quot;end_time&quot;: 1371829716,
  &quot;nsources&quot;: 1,
  &quot;minreporting&quot;: 1,
  &quot;requested_start_time&quot;: 1371829715,
  &quot;requested_duration&quot;: 1,
  &quot;requested_end_time&quot;: 1371829716
}

$ sdc-getinstrumentation --value true 3
{
  &quot;value&quot;: 48,
  &quot;transformations&quot;: {},
  &quot;start_time&quot;: 1371829863,
  &quot;duration&quot;: 1,
  &quot;end_time&quot;: 1371829864,
  &quot;nsources&quot;: 1,
  &quot;minreporting&quot;: 1,
  &quot;requested_start_time&quot;: 1371829863,
  &quot;requested_duration&quot;: 1,
  &quot;requested_end_time&quot;: 1371829864
}</code></pre>
<p>但是當我們有一台以上機器時候，上面這樣的結果值就很難滿足我們監控的需求，這時候可以加入decomposition藍未來將結果做某個屬性的分類… 下面是使用zonename(就是主機建立時候系統所給予的主機ID)來建立的監控：</p>
<pre><code>$ sdc-createinstrumentation --module cpu --stat usage --decomposition zonename
{
  &quot;module&quot;: &quot;cpu&quot;,
  &quot;stat&quot;: &quot;usage&quot;,
  &quot;predicate&quot;: {},
  &quot;decomposition&quot;: [
    &quot;zonename&quot;
  ],
  &quot;value-dimension&quot;: 2,
  &quot;value-arity&quot;: &quot;discrete-decomposition&quot;,
  &quot;enabled&quot;: true,
  &quot;retention-time&quot;: 600,
  &quot;idle-max&quot;: 3600,
  &quot;transformations&quot;: {},
  &quot;nsources&quot;: 0,
  &quot;granularity&quot;: 1,
  &quot;persist-data&quot;: false,
  &quot;crtime&quot;: 1371830663771,
  &quot;value-scope&quot;: &quot;point&quot;,
  &quot;id&quot;: &quot;4&quot;,
  &quot;uris&quot;: [
    {
      &quot;uri&quot;: &quot;/peihsinsu@hotmail.com/analytics/instrumentations/4/value/raw&quot;,
      &quot;name&quot;: &quot;value_raw&quot;
    }
  ]
}</code></pre>
<p>建立完成後，取值就會發現value部分將會帶出每台主機的ID，並且匯顯示對應的值...</p>
<pre><code>$ sdc-getinstrumentation --value true 4
{
  &quot;value&quot;: {
    &quot;4066be38-321a-4884-8979-d8629284d2d0&quot;: 0
  },
  &quot;transformations&quot;: {},
  &quot;start_time&quot;: 1371830729,
  &quot;duration&quot;: 1,
  &quot;end_time&quot;: 1371830730,
  &quot;nsources&quot;: 1,
  &quot;minreporting&quot;: 1,
  &quot;requested_start_time&quot;: 1371830729,
  &quot;requested_duration&quot;: 1,
  &quot;requested_end_time&quot;: 1371830730
}</code></pre>
<p>另外，下面換監控記憶體的使用量，採用&quot;--module memory --stat rss&quot;來監控主機，一樣以&quot;--decomposition zonename&quot;來分類...</p>
<pre><code>$ sdc-createinstrumentation --module memory --stat rss --decomposition zonename
{
  &quot;module&quot;: &quot;memory&quot;,
  &quot;stat&quot;: &quot;rss&quot;,
  &quot;predicate&quot;: {},
  &quot;decomposition&quot;: [
    &quot;zonename&quot;
  ],
  &quot;value-dimension&quot;: 2,
  &quot;value-arity&quot;: &quot;discrete-decomposition&quot;,
  &quot;enabled&quot;: true,
  &quot;retention-time&quot;: 600,
  &quot;idle-max&quot;: 3600,
  &quot;transformations&quot;: {},
  &quot;nsources&quot;: 0,
  &quot;granularity&quot;: 1,
  &quot;persist-data&quot;: false,
  &quot;crtime&quot;: 1371830787956,
  &quot;value-scope&quot;: &quot;point&quot;,
  &quot;id&quot;: &quot;5&quot;,
  &quot;uris&quot;: [
    {
      &quot;uri&quot;: &quot;/peihsinsu@hotmail.com/analytics/instrumentations/5/value/raw&quot;,
      &quot;name&quot;: &quot;value_raw&quot;
    }
  ]
}</code></pre>
<p>接下來可以透過sdc-getinstrumentation來取值… 此時搭配json commond line tool可以更有效率的切割資料...</p>
<pre><code>$ sdc-getinstrumentation --value true 5 | json value
{
  &quot;4066be38-321a-4884-8979-d8629284d2d0&quot;: 84439040
}</code></pre>
<p>當系統希望取記憶體使用數值來做其他處理時，我們也可以透過下面的方式，只把&quot;值&quot;取出來就好...</p>
<pre><code>$ sdc-getinstrumentation --value true 5 | json value.4066be38-321a-4884-8979-d8629284d2d0
84439040</code></pre>
<p>PS: 關於json command tools，請參考：<a href="http://opennodes.github.io/wiki/html/jsontool.html"><a href="http://opennodes.github.io/wiki/html/jsontool.html">http://opennodes.github.io/wiki/html/jsontool.md</a></a></p>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="MiCloud+API.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="html/MiCloud+API.html">MiCloud API</a>&nbsp;<a href="index.html?page=MiCloud+API.md">(MiCloud+API.md)</a><a href="#MiCloud+API.md"></a></h1><br/><h1>MiCloud API</h1>
<p>本文件為MiCloud API之簡短說明文件，MiCloud使用Joyent服務，進行IaaS環境部署，基於Joyent提供之API套件進行MiCloud API相關功能之提供。</p>
<h2>MiCloud API簡介</h2>
<h2>何謂MiCloud API?</h2>
<p>MiCloud API 為提供一個與MiCloud平台(SmartDataCenter，文件後面簡稱為SDC)完整介接之應用程式介面，透過該介面您可以：</p>
<ul>
<li>進行雲端主機之建立與管理(此部份將包含SmartMachine與Linux/Windows主機)</li>
<li>管理您的雲端帳戶以及相關之認證權限事宜</li>
<li>建立屬於您專屬的分析與監控儀表版</li>
</ul>
<h2>如何存取MiCloud API?</h2>
<p>MiCloud API為以REST API為呈現方式的介面,您可以透過下面方法與MiCloud API進行介接：</p>
<ul>
<li>WEB存取方式：SmartDataCenter Customer Portal (<a href="http://micloud.tw">http://micloud.tw</a>)</li>
<li>指令列存取方式：Command line interface (CLI)</li>
<li>Node.js程式化介面：node.js SDK</li>
<li>REST API協定</li>
</ul>
<h2>開始使用MiCloud API</h2>
<p>在開始使用MiCloud API前，請先確認您的環境已經安裝下述套件，如未安裝，請依照下面鏈結安裝：</p>
<ul>
<li>Node.js</li>
<li>NPM</li>
</ul>
<p>安裝完成後，您可以透過下面指令安裝MiCloud API之工具程式：</p>
<pre><code>npm install smartdc -g</code></pre>
<p>MiCloud API為以REST為協定，並以JSON為呈現之工具，為了輔助您在檢視相關訊息時格式上之排版，請依下面指令下載jsontool：</p>
<pre><code>npm install jsontool -g</code></pre>
<h2>MiCloud API連線位置</h2>
<p>MiCloud所屬之API連線位置如下：</p>
<table>
<thead>
<tr>
<th>DNS Name</th>
<th>開放區域</th>
<th>Port</th>
</tr>
</thead>
<tbody>
<tr>
<td>api.micloud.tw</td>
<td>僅限MiCloud主機連線</td>
<td>443</td>
</tr>
</tbody>
</table>
<p>PS: 原micloudapi.micloud.tw之DNS已修改為api.micloud.tw。</p>
<h2>建立與MiCloud之連線：SSH key建立</h2>
<p>MiCloud API需透過SSH之連線方式操作，為方便操作以及保護連線密碼，請依下面指令產生所屬之SSH Key，如為Windows平台，則可使用PUTTY之Key Generator工具產生SSH Key：</p>
<pre><code>ssh-keygen -b 2048 -t rsa</code></pre>
<p>Mac, Linux系統，使用ssh-keygen產生之金鑰會放置於$HOME/.ssh/目錄中，而Windows使用者則可直接指定存放之位置儲存。</p>
<h2>設定您的MiCloud API CLI介面</h2>
<p>產生好SSH Key後，您可以透過下面指令設定好您的CLI環境：</p>
<pre><code>sdc-setup https://api.example.com
Username (login): demo
Password:
SSH public key: (/Users/demo/.ssh/id_rsa.pub)</code></pre>
<h2>使用CLI</h2>
<p>MiCloud CLI的使用上，您可以透過 command --help 方式查詢該command的使用方法：</p>
<pre><code>sdc-listdatacenters --help
sdc-listdatacenters [--account string] [--debug boolean] [--help boolean]
[--identity path] [--keyId string] [--url url]</code></pre>
<p>由顯示之提示說明，使用MiCloud API CLI時候，需要指定相關權限與帳號參數：</p>
<table>
<thead>
<tr>
<th>CLI Flag</th>
<th>Description</th>
<th>Environment Variable</th>
</tr>
</thead>
<tbody>
<tr>
<td>--account</td>
<td>login name (account)</td>
<td>SDC_CLI_ACCOUNT</td>
</tr>
<tr>
<td>--keyId</td>
<td>name of the key to use for signing</td>
<td>SDC_CLI_KEY_ID</td>
</tr>
<tr>
<td>--url</td>
<td>URL of the MiCloud API endpoint</td>
<td>SDC_CLI_URL</td>
</tr>
</tbody>
</table>
<p>Note that you can use the short form of flags as well. For instance, you can use the -a or the --account flag.</p>
<h2>新建立一台SmartMachine主機</h2>
<p>在MiCloud環境上，您可以透過下面指令來新增一台雲端SmartMachine主機：</p>
<pre><code>sdc-createmachine -n getting-started</code></pre>
<p>當主機建立完成，您可透過下面方式查詢主機狀態：</p>
<pre><code>sdc-listmachines -n getting-started

[
 {
   &quot;id&quot;: &quot;0b97c186-05a5-4113-b05f-3e597e3cf038&quot;,
   &quot;name&quot;: getting-started&quot;,
   &quot;owner&quot;: demo&quot;,
   &quot;type&quot;: &quot;smartmachine&quot;,
   &quot;state&quot;: &quot;running&quot;,
   &quot;dataset&quot;: &quot;smartos-1.3.13&quot;,
   &quot;ips&quot;: [
   &quot;10.88.88.50&quot;
   ],
   &quot;memory&quot;: 128,
   &quot;disk&quot;: 5120,
   &quot;metadata&quot;: {},
   &quot;created&quot;: &quot;2011-06-27T19:52:40+00:00&quot;,
   &quot;updated&quot;: &quot;2011-06-27T20:08:55+00:00&quot;
 }
]</code></pre>
<p>當主機狀態回復至running狀態時，您就可以透過SSH連線至您的主機：</p>
<pre><code>ssh-add
$ ssh -A admin@10.88.88.50</code></pre>
<h2>MiCloud相關主機參數：Datasets</h2>
<p>於MiCloud SDC環境中，您可以透過下面指令取得目前定義中的dataset (dataset為SDC環境中描述IaaS主機類別之描述檔案，開通主機時透過此描述檔案可以決定您開立主機之類別)：</p>
<pre><code>sdc-listdatasets</code></pre>
<p>您在開立雲端主機時，可透過下面方法指定開啓主機之類別：</p>
<pre><code>sdc-createmachine -e sdc:sdc:nodejs:1.2.0 -n getting-started-nodejs</code></pre>
<h2>MiCloud相關主機參數：Packages</h2>
<p>另一各常用之主機參數為package，此參數提供主機大小規格之相關資訊，開通主機時透過指定package參數，可以決定開立之主機規格大小，下面為查詢MiCloud SDC現行定義之package內容：</p>
<pre><code>sdc-listpackages</code></pre>
<p>下面為指定dataset與package之建立主機範例：</p>
<pre><code>sdc-createmachine -e sdc:sdc:nodejs:1.2.0 -n big-nodejs -p regular_1024</code></pre>
<h2>管理您的SSH keys</h2>
<p>透過下面指令，您可以將SSH Key上傳至MiCloud SDC管理平台，讓之後的連線均直接受到SSH加密保護：</p>
<pre><code>sdc-createkey -n my_other_rsa_key ~/.ssh/my_other_rsa_key.pub</code></pre>
<p>您可以透過下面指令查詢現行已經同步至SDC環境織金鑰：</p>
<pre><code>sdc-listkeys -k my_other_rsa_key</code></pre>
<p>當您有一組以上的key時候，您需要指定key之位置，透過下面參數的指定，可以讓smartdc認得您要使用的key：</p>
<pre><code>export SDC_CLI_KEY_ID=my_other_rsa_key</code></pre>
<h2>建立主機分析</h2>
<p>MiCloud API一樣允許您建立主機之分析，SDC中特有的主機分析提供許多主機上運算與狀態資訊，透過這些資訊，您可以診斷目前環境中的弱點並予以加強，MiCloud API之分析範例(分析vnic支流量狀態)如下：</p>
<pre><code>sdc-createinstrumentation -m nic -s vnic_bytes</code></pre>
<p>當分析建立完成時，您可以透過連線上您的雲端主機，並操作ping指令：</p>
<pre><code>wget joyent.com
$ ping -I 1 joyent.com</code></pre>
<p>此時再回分析進行檢視：</p>
<pre><code>sdc-getinstrumentation -v 1</code></pre>
<p>其中上面指令的”1”是您所見立分析的ID，透過取回分析的指令，您可以完整的監控您的系統。更多詳細的資訊，請參考： Appendix B: Cloud Analytics.</p>
<h2>刪除主機</h2>
<p>MiCloud比對Amazone之收費方式，其上的IaaS服務均是以機器的生成(create)到移除(destroy)區間計費，因此確實的移除主機，方可確認您不會再被收費。而在刪除主機之前，您可以透過下面指令將上面建立的分析刪除：</p>
<pre><code>sdc-deleteinstrumentation 1</code></pre>
<p>然後透過sdc-stopmachine的指令將主機關閉：</p>
<pre><code>sdc-listmachines -n getting-started | json 0.id | xargs sdc-stopmachine</code></pre>
<p>關閉之後，透過sdc-deletemachine將主機移除：</p>
<pre><code>sdc-listmachines -n getting-started | json 0.state
$ sdc-listmachines -n getting-started | json 0.id | xargs sdc-deletemachine</code></pre>
<p>刪除SSH Key</p>
<p>另外，您或許會想要把目前沒用到的SSH Key刪除，透過下面指令可以把SSH Key移除：</p>
<pre><code>sdc-deletekey id_rsa</code></pre>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="MiCloud+API+Implement+1.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="html/MiCloud+API+Implement+1.html">MiCloud API實做案例(一)</a>&nbsp;<a href="index.html?page=MiCloud+API+Implement+1.md">(MiCloud+API+Implement+1.md)</a><a href="#MiCloud+API+Implement+1.md"></a></h1><br/><h1>MiCloudAPI 實做案例</h1>
<h2>情境：</h2>
<p>我是一個購物網站的主機管理員，當季的商品促銷期間常會造成流量爆滿，大量的transaction會導至網頁資料傳輸與反應變慢，運行在傳統的主機服務架構下，此時除非新增加伺服器規格外，似乎無其他方法... 但在雲端的環境下，我可以規劃我的促消時間，依照網站上統計的到訪人數資料來讓我可以知道大約尖峰時期在甚麼時候，透過MiCloudAPI，我建置了一個可以依據我所規劃的時間來進行增加服務端點的架構。</p>
<p><img src='images/MiCloud+API+Implement+1-p12.png' width='450' align='center'/><br>圖：利用MiCloudAPI建構可延展架構</p>
<p>架構中利用admin server做系統資源的監控，並由admin server在需要延展服務的情況下進行呼叫MiCloudAPI，請MiCloudAPI在我的帳戶底下多生成一臺主機，並且利用admin在新平台上進行服務部署工作將服務所需資源作一個調適分配，最後通知前端Load Balancer將服務需求平均分攤至新加入之伺服器上。</p>
<h2>先介紹MiCloudAPI上的基本設定</h2>
<h2>設定主機與MiCloudAPI連線：</h2>
<pre><code>$ sdc-setup https://api.micloud.tw
Username (login): YOUR_ACCOUNT
Password:
The following keys exist in SmartDataCenter:
             [1] key1
Would you like to use an existing key? (yes) no
SSH public key: (/Users/xxxx/.ssh/id_rsa.pub)</code></pre>
<h2>設定環境變數</h2>
<pre><code>export SDC_CLI_URL=https://api.micloud.tw
export SDC_CLI_ACCOUNT=YOUR_ACCOUNT
export SDC_CLI_KEY_ID=id_rsa
export SDC_CLI_IDENTITY=$HOME/.ssh/id_rsa</code></pre>
<h2>檢視目前既有主機</h2>
<pre><code>$ sdc-listmachines
[
 {
   &quot;id&quot;: &quot;9626a584-187c-40b0-aa84-7f6f3a22ec44&quot;,
   &quot;name&quot;: &quot;TS-72-SIMON-01&quot;,
   &quot;type&quot;: &quot;smartmachine&quot;,
   &quot;state&quot;: &quot;running&quot;,
   &quot;dataset&quot;: &quot;sdc:sdc:smartosplus64:3.0.7&quot;,
   &quot;ips&quot;: [
   &quot;211.78.xxx.xxx&quot;
   ],
   &quot;memory&quot;: 1024,
   &quot;disk&quot;: 15360,
   &quot;metadata&quot;: {},
   &quot;created&quot;: &quot;2011-12-20T14:25:33+00:00&quot;,
   &quot;updated&quot;: &quot;2011-12-29T04:08:25+00:00&quot;
 }
]</code></pre>
<h2>檢視可用之DataSet</h2>
<pre><code>$ sdc-listdatasets
[
 {
   &quot;id&quot;: &quot;1f26e71c-2bb7-11e1-8266-5b14c4eccd12&quot;,
   &quot;urn&quot;: &quot;sdc:admin:WinSrv2008R2STDX64CHT:1.1.0&quot;,
   &quot;name&quot;: &quot;WinSrv2008R2STDX64CHT&quot;,
   &quot;os&quot;: &quot;WinSrv2008R2STDX64CHT&quot;,
   &quot;type&quot;: &quot;virtualmachine&quot;,
   &quot;description&quot;: &quot;WinSrv2008R2STDX64CHT 1.1.0 VM image&quot;,
   &quot;default&quot;: false,
   &quot;requirements&quot;: {},
   &quot;version&quot;: &quot;1.1.0&quot;,
   &quot;created&quot;: &quot;2011-12-21T09:37:42+00:00&quot;
   },
 {
   &quot;id&quot;: &quot;1f190e72-2d19-11e1-b4a2-7b85c599c5d2&quot;,
   &quot;urn&quot;: &quot;sdc:admin:WinSrv2008R2ENTX64ENG:1.1.0&quot;,
   &quot;name&quot;: &quot;WinSrv2008R2ENTX64ENG&quot;,
   &quot;os&quot;: &quot;WinSrv2008R2ENTX64ENG&quot;,
   &quot;type&quot;: &quot;virtualmachine&quot;,
   &quot;description&quot;: &quot;WinSrv2008R2ENTX64ENG 1.1.0 VM image&quot;,
   &quot;default&quot;: false,
   &quot;requirements&quot;: {},
   &quot;version&quot;: &quot;1.1.0&quot;,
   &quot;created&quot;: &quot;2011-12-23T03:54:28+00:00&quot;
 },...(skip)
]</code></pre>
<h2>檢視可用之Package</h2>
<pre><code>$ sdc-listpackages
[
 {
   &quot;name&quot;: &quot;S 1GB RAM (1CORE)&quot;,
   &quot;memory&quot;: 1024,
   &quot;disk&quot;: 15360,
   &quot;swap&quot;: 2048,
   &quot;default&quot;: false
 },
 {
   &quot;name&quot;: &quot;M 2GB RAM (1CORE)&quot;,
   &quot;memory&quot;: 2048,
   &quot;disk&quot;: 30720,
   &quot;swap&quot;: 4096,
   &quot;default&quot;: false
 },...(skip
]</code></pre>
<h2>測試開啟主機的語法</h2>
<h2>調整一臺虛擬主機的記憶體大小</h2>
<pre><code>$ sdc-resizemachine -p &quot;M 2GB RAM (1CORE)&quot; 9626a584-187c-40b0-aa84-7f6f3a22ec44</code></pre>
<h2>開啟一臺主機</h2>
<pre><code>$ sdc-createmachine -name simontest123 -package &quot;S 1GB RAM (1CORE)&quot; -dataset sdc:sdc:smartos64:1.5.1
{
   &quot;id&quot;: &quot;845f21fe-1910-4b38-a4ca-e2a81144f9a2&quot;,
   &quot;name&quot;: &quot;simontest123&quot;,
   &quot;type&quot;: &quot;smartmachine&quot;,
   &quot;state&quot;: &quot;provisioning&quot;,
   &quot;dataset&quot;: &quot;sdc:sdc:smartos64:1.5.1&quot;,
   &quot;ips&quot;: [
   &quot;211.78.xxx.xxx&quot;
   ],
   &quot;memory&quot;: 1024,
   &quot;disk&quot;: 15360,
   &quot;metadata&quot;: {},
   &quot;created&quot;: &quot;2012-01-18T02:13:31+00:00&quot;,
   &quot;updated&quot;: &quot;2012-01-18T02:13:31+00:00&quot;
}</code></pre>
<h2>刪除虛擬主機</h2>
<pre><code>$ sdc-deletemachine 845f21fe-1910-4b38-a4ca-e2a81144f9a2
Requested transition is not acceptable due to current resource state</code></pre>
<p>(主機刪除前，必需要停機，否則會不能刪除)</p>
<ul>
<li>Stop server first</li>
</ul>
<pre><code>$ sdc-stopmachine 845f21fe-1910-4b38-a4ca-e2a81144f9a2</code></pre>
<ul>
<li>Confirm stop OK and delete...</li>
</ul>
<pre><code>$ sdc-deletemachine 845f21fe-1910-4b38-a4ca-e2a81144f9a2</code></pre>
<h2>實際執行</h2>
<p>需求：於聖誕節前(12/20 AM 0:10)新增加一臺主機加入服務，而請load balancer增加路由部份與程式部署部份，因不在MiCloudAPI討論範圍，暫時不列出來。</p>
<h2>撰寫排程程式($ HOME / script / bin / createServer.sh )</h2>
<pre><code>#!/bin/bash
export SDC_CLI_URL=https://api.micloud.tw
export SDC_CLI_ACCOUNT=YOUR_ACCOUNT
export SDC_CLI_KEY_ID=id_rsa
export SDC_CLI_IDENTITY=/Users/simonsu/.ssh/id_rsa
sdc-createmachine -name simontest123
-package &quot;S 1GB RAM (1CORE)&quot;
-dataset sdc:sdc:smartos64:1.5.1
echo “Server Create Done” | mailx -s “Add a Server to MiCloud” simonsu.mail@gmail.com</code></pre>
<p>增加load balancer路由(此部分程式碼需視不同Load Balancer實作)</p>
<pre><code>addRoute2LoadBalancer.sh</code></pre>
<p>部署應用程式(此部分程式碼需視不同應用程式實作)</p>
<pre><code>doDeployApplication.sh</code></pre>
<h2>將服務加入Cron Job</h2>
<pre><code>10 0 20 12 * $ HOME / script / bin / createServer.sh</code></pre>
<p>上述腳本正常執行後，就可以順利的在12/20當天延展AP主機的服務，並且提供服務囉！</p>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="MiCloud+API+Implement+2.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="html/MiCloud+API+Implement+2.html">MiCloud API實做案例(二)</a>&nbsp;<a href="index.html?page=MiCloud+API+Implement+2.md">(MiCloud+API+Implement+2.md)</a><a href="#MiCloud+API+Implement+2.md"></a></h1><br/><h1>MiCloudAPI 實做案例</h1>
<h2>預防尖峰流量拖垮服務：Scale Out應用服務-使用CloudAPI排程</h2>
<ul>
<li>調整一臺虛擬主機的記憶體大小</li>
</ul>
<pre><code>simonsuteki-MacBook-Pro:~ simonsu$ sdc-resizemachine -p &quot;M 2GB RAM (1CORE)&quot;
9626a584-187c-40b0-aa84-7f6f3a22ec44</code></pre>
<ul>
<li>開啓一臺主機</li>
</ul>
<pre><code>simonsuteki-MacBook-Pro:~ simonsu$ sdc-createmachine -name simontest123 -package &quot;S
1GB RAM (1CORE)&quot; -dataset sdc:sdc:smartos64:1.5.1
{
   &quot;id&quot;: &quot;845f21fe-1910-4b38-a4ca-e2a81144f9a2&quot;,
   &quot;name&quot;: &quot;simontest123&quot;,
   &quot;type&quot;: &quot;smartmachine&quot;,
   &quot;state&quot;: &quot;provisioning&quot;,
   &quot;dataset&quot;: &quot;sdc:sdc:smartos64:1.5.1&quot;,
   &quot;ips&quot;: [
   &quot;211.78.245.41&quot;
   ],
   &quot;memory&quot;: 1024,
   &quot;disk&quot;: 15360,
   &quot;metadata&quot;: {},
   &quot;created&quot;: &quot;2012-01-18T02:13:31+00:00&quot;,
   &quot;updated&quot;: &quot;2012-01-18T02:13:31+00:00&quot;
}</code></pre>
<h2>流量恢復正常了～WEB刪除主機</h2>
<ul>
<li>WEB刪除虛擬主機<br><img src='images/MiCloud+API+Implement+2-p11.PNG' width='650' align='center'/></li>
</ul>
<h2>流量恢復正常了～CloudAPI刪除主機</h2>
<ul>
<li>CloudAPI刪除虛擬主機</li>
</ul>
<pre><code>simonsuteki-MacBook-Pro:~ simonsu$ sdc-deletemachine 845f21fe-1910-4b38-a4cae2a81144f9a2
Requested transition is not acceptable due to current resource state
(主機刪除前，必需要停機，否則會不能刪除)
# Stop server first
simonsuteki-MacBook-Pro:~ simonsu$ sdc-stopmachine 845f21fe-1910-4b38-a4cae2a81144f9a2
# Confirm stop OK and delete...
simonsuteki-MacBook-Pro:~ simonsu$ sdc-deletemachine 845f21fe-1910-4b38-a4cae2a81144f9a2</code></pre>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="Share+by+qrtt1.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="html/Share+by+qrtt1.html">Micloud API</a>&nbsp;<a href="index.html?page=Share+by+qrtt1.md">(Share+by+qrtt1.md)</a><a href="#Share+by+qrtt1.md"></a></h1><br/><h1>聖藍科技分享文章</h1>
<p>感謝聖藍科技使用MiCloud服務，透過CloudAPI提供聖藍科技自動Scale之功能以架構多媒體影音服務，以下文章轉載自qrtt1 github repository<a href="http://www.accupass.com/Event/Register?eid=359099570305727">本文</a></p>
<h2>簡介</h2>
<p>最近在蒐集國內 IaaS 的資料，目前只看到 MiCloud 有提供 API。依照「沒有釋出API，就不能稱得上是真正的IaaS服務。」 那目前 MiCloud 算是國內的『真。IaaS』MiCloud 採用的 solution 是 joyent <a href="https://github.com/joyent">https://github.com/joyent</a> 的Cloud API。 對使用 solution 的 MiCloud 來說，它能提供 web 的管理頁面，而 customer 可以 command line tools 與 RESTful API 來操作它。 我們可以由 wiki 獲得操作的資訊：<a href="http://wiki.micloud.tw/Wiki/">http://wiki.micloud.tw/Wiki/</a> 。本文主要是為了 Command Line 操作而寫，希望能補足 wiki 模糊的部分。</p>
<p><strong>此文件對讀者的假設是：</strong></p>
<ul>
<li>你已註冊擁有 MiCloud 帳號</li>
<li>使用 Linux</li>
</ul>
<p><strong>安裝 MiCloud Command Line 流程如下：</strong></p>
<ul>
<li>安裝 node js (依客服的資訊，只能使用 0.6.x 版本)</li>
<li>設定 api 帳號</li>
<li>產生 ssh key</li>
<li>使用 MiCloud 帳號認證</li>
</ul>
<p><strong>常用功能：</strong></p>
<ul>
<li>建立新機器</li>
<li>建立機器並指定 user-s cript</li>
<li>查詢機器狀態</li>
<li>撤銷機器（關閉與刪除）</li>
</ul>
<p><strong>附錄：</strong></p>
<ul>
<li>Node.js RPM</li>
<li>Java API</li>
</ul>
<p>另外，Cloud API 的官方文件的位置在： <a href="http://apidocs.joyent.com/sdcapidoc/cloudapi"><a href="http://apidocs.joyent.com/sdcapidoc/cloudapi/">http://apidocs.joyent.com/sdcapidoc/cloudapi/</a></a></p>
<h2>安裝Node JS</h2>
<p>目前 Node.js 最新版為 0.8.x。一開始看 wiki 去試著安裝，但它並沒有說明僅支援 0.6.x 版的 Node.js（這資訊同樣也是來自客服）。所以在做帳號認證時總是無法過關。而 Node.js 在我常用的 Debian 或 CentOS 似乎沒有直接包在官方的 repo 上，如果你也遇到相同的問題，建議就自行編譯吧。（編譯時記得將 openssl-devel 與 npm 的選項開啟。）</p>
<p>安裝完 Node.js 後，需加裝 joynet Cloud API 提供的 cli 工具，使用 Node.js 的套件管理程式安裝 smartdc 與jsontool（wiki 上的的指令沒有加 sudo，但我們下 npm -g 會安裝在系統目錄下，若您是一般用者請加 sudo）：</p>
<pre><code>sudo npm install smartdc -g
sudo npm install jsontool -g</code></pre>
<p>完成安裝後，會有一堆 sdc- 開頭的指令能使用，等等用他們操作 MiCloud 提供的服務：</p>
<pre><code>[qrtt1@localhost ~]$ sdc-
sdc-addmachinetags            sdc-getmachinetag
sdc-createinstrumentation     sdc-getpackage
sdc-createkey                 sdc-listdatacenters
sdc-createmachine             sdc-listdatasets
sdc-createmachinesnapshot     sdc-listinstrumentations
sdc-deleteinstrumentation     sdc-listkeys
sdc-deletekey                 sdc-listmachines
sdc-deletemachine             sdc-listmachinesnapshots
sdc-deletemachinemetadata     sdc-listmachinetags
sdc-deletemachinesnapshot     sdc-listpackages
sdc-deletemachinetag          sdc-rebootmachine
sdc-describeanalytics         sdc-resizemachine
sdc-getdataset                sdc-setup
sdc-getinstrumentation        sdc-startmachine
sdc-getkey                    sdc-startmachinefromsnapshot
sdc-getmachine                sdc-stopmachine
sdc-getmachinemetadata        sdc-updatemachinemetadata
sdc-getmachinesnapshot</code></pre>
<p>註：如果你有看 wiki，它是寫 api 的操作需要在 MiCloud 網域。這句話已過時了，向客服求證已無此限制。你可以在任何有對外網路的機器腦使用它。</p>
<h2>設定API帳號</h2>
<p>完成 stmartdc 安裝後，我們能使用 sdc-setup 指令設定 api 要使用的帳號。sdc-setup 需指定 api server 位置，請使用：<a href="https://api.micloud.tw"><a href="https://api.micloud.tw">https://api.micloud.tw</a></a> 。設定 api 綁定的帳號流程如下：</p>
<ul>
<li>使用 sdc-setup 指令</li>
<li>輸入 MiCloud 帳號與密碼進行驗證</li>
<li>設定 ssh key<br>*使用既有的 ssh key<br>*使用新的 ssh key</li>
</ul>
<h2>使用既有的SSH key</h2>
<pre><code>[qrtt1@localhost ~]$ sdc-setup https://api.micloud.tw
Username (login): (qrtt1) user_account@example.mail.com
Password:
The following keys exist in SmartDataCenter:
      [1] sysGen-e10b3d16-5d92-45b0-b84f-299e4669b905]([1 sysGen-e10b3d16-5d92-45b0-b84f-299e4669b905)
      [2] id_rsa]([2 id-rsa)
Would you like to use an existing key? (yes) yes
Select a key:(1) 1


If you set these environment variables, your life will be easier:
export SDC_CLI_URL=https://api.micloud.tw
export SDC_CLI_ACCOUNT=user_account@example.mail.com
export SDC_CLI_KEY_ID=sysGen-e10b3d16-5d92-45b0-b84f-299e4669b905

You&#39;ll additionally want to set SDC_CLI_IDENTITY to the full path location of the ssh key on your system (try export SDC_CLI_IDENTITY=/home/qrtt1/.ssh/sysGen-e10b3d16-5d92-45b0-b84f-299e4669b905).</code></pre>
<p>在『使用既有的 ssh key』內，我們選擇了初次註冊 MiCloud 時透過系統建立的 ssh key。sdc-setup 的功能是替您產生操作 Cloud API 需要的環境變數，你可以將它設在 .bashrc 內，並使用 source 指令載入環境變數。</p>
<h2>使用新建的SSH key</h2>
<p>我們使用 ssh-keygen 產生一組新的 ssh key 讓 MiCloud 使用：</p>
<pre><code>[qrtt1@localhost ~]$ ssh-keygen -b 2048 -t rsa -f ~/.ssh/micloud_at_vm
Generating public/private rsa key pair.
Enter passphrase (empty for no passphrase):
Enter same passphrase again:
Your identification has been saved in /home/qrtt1/.ssh/micloud_at_vm.
Your public key has been saved in /home/qrtt1/.ssh/micloud_at_vm.pub.
The key fingerprint is:
34:e3:cd:2c:b3:1c:64:6f:29:9d:de:ef:4f:03:fe:ac qrtt1@localhost.localdomain
The key&#39;s randomart image is:
+--[ RSA 2048]----+
|                 |
|                 |
|        *        |
|       = O o     |
|        S X  .   |
|       . O .. .  |
|        o . .. ..|
|             .o..|
|             E++.|
+-----------------+</code></pre>
<p>使用 sdc-setup 並選用新的 ssh key：</p>
<pre><code>[qrtt1@localhost ~]$ sdc-setup https://api.micloud.tw
Username (login): (qrtt1) user_account@example.mail.com
Password:
The following keys exist in SmartDataCenter:
[1] sysGen-e10b3d16-5d92-45b0-b84f-299e4669b905
[2] id_rsa]([2 id-rsa)
Would you like to use an existing key? (yes) no
SSH public key: (/home/qrtt1/.ssh/id_rsa.pub) /home/qrtt1/.ssh/micloud_at_vm.pub


If you set these environment variables, your life will be easier:
export SDC_CLI_URL=https://api.micloud.tw
export SDC_CLI_ACCOUNT=user_account@example.mail.com
export SDC_CLI_KEY_ID=micloud_at_vm
export SDC_CLI_IDENTITY=/home/qrtt1/.ssh/micloud_at_vm</code></pre>
<h2>使用cli tool</h2>
<p>完成設定後我們就能開始使用 cli tool，例如：查詢已註冊的 ssh key</p>
<pre><code>[qrtt1@localhost ~]$ sdc-listkeys
[
 {
   &quot;name&quot;: &quot;sysGen-e10b3d16-5d92-45b0-b84f-299e4669b905&quot;,
   &quot;key&quot;: &quot;ssh-rsa …......&quot;,
   &quot;created&quot;: &quot;2012-11-14T16:08:33+00:00&quot;,
   &quot;updated&quot;: &quot;2012-11-14T16:08:33+00:00&quot;
   },
   {
   &quot;name&quot;: &quot;micloud_at_vm&quot;,
   &quot;key&quot;: &quot;ssh-rsa …......&quot;,
   &quot;created&quot;: &quot;2012-11-20T09:42:32+00:00&quot;,
   &quot;updated&quot;: &quot;2012-11-20T09:42:32+00:00&quot;
 }
]</code></pre>
<h2>常用功能：建立新機器</h2>
<p>建立機器有些資訊需要事先查清楚的：</p>
<ul>
<li>機器的等級（CPU、記憶體、Disk），使用 sdc-listpackages 指令</li>
<li>機器的OS，使用 sdc-listdatasets 指令</li>
<li>使用上述『參數』建立機器，使用 sdc-createmachine 指令</li>
</ul>
<p>依 Cloud API 的說明 CreateMachine 的參數 package name 可以不填，會使用 sdc-listpackages 標為 default 的那一組，而 dataset 需要填 URN：<a href="http://apidocs.joyent.com/sdcapidoc/cloudapi/#CreateMachine"><a href="http://apidocs.joyent.com/sdcapidoc/cloudapi/#CreateMachine">http://apidocs.joyent.com/sdcapidoc/cloudapi/#CreateMachine</a></a></p>
<p>先使用 sdc-listpackages 指令查出需要的機器等級的名稱 &quot;S 1GB RAM (1CORE)&quot;：</p>
<pre><code>[qrtt1@localhost ~]$ sdc-listpackages
[
 {
   &quot;name&quot;: &quot;XS 512MB RAM (4CORE)&quot;,
   &quot;memory&quot;: 512,
   &quot;disk&quot;: 15360,
   &quot;vcpus&quot;: 4,
   &quot;swap&quot;: 1024,
   &quot;default&quot;: false
 },
 {
   &quot;name&quot;: &quot;S 1GB RAM (1CORE)&quot;,
   &quot;memory&quot;: 1024,
   &quot;disk&quot;: 15360,
   &quot;vcpus&quot;: 1,
   &quot;swap&quot;: 2048,
   &quot;default&quot;: true
 },
…(略)
]</code></pre>
<p>查出 OS 的 URN，這個例子我們選用 CentOS 6：</p>
<pre><code>[qrtt1@localhost ~]$ sdc-listdatasets
[
…(略)
 {
   &quot;id&quot;: &quot;a77907fc-123b-11e1-86d8-2bb3c7c6aaf2&quot;,
   &quot;urn&quot;: &quot;centos6:0.1.0&quot;,
   &quot;name&quot;: &quot;centos6&quot;,
   &quot;os&quot;: &quot;linux&quot;,
   &quot;type&quot;: &quot;virtualmachine&quot;,
   &quot;description&quot;: &quot;您選擇的是：CentOS 6(64bit)版本，提醒您可以透過SSH金鑰的建立，讓您的連線更加方便有效率。&quot;,
   &quot;default&quot;: false,
   &quot;requirements&quot;: {},
   &quot;version&quot;: &quot;0.1.0&quot;
 },
 {
   &quot;id&quot;: &quot;0ac8200c-13b5-11e1-a042-7b2948257b3b&quot;,
   &quot;urn&quot;: &quot;centos57:1.1.6&quot;,
   &quot;name&quot;: &quot;centos57&quot;,
   &quot;os&quot;: &quot;linux&quot;,
   &quot;type&quot;: &quot;virtualmachine&quot;,
   &quot;description&quot;: &quot;您選擇的是：CentOS 5(64bit)版本，提醒您可以透過SSH金鑰的建立，讓您的連線更加方便有效率。&quot;,
   &quot;default&quot;: false,
   &quot;requirements&quot;: {},
   &quot;version&quot;: &quot;1.1.6&quot;
 }
]</code></pre>
<p>相關資料備妥後，能真的建立機器：</p>
<pre><code>[qrtt1@localhost ~]$ sdc-createmachine --package &quot;S 1GB RAM (1CORE)&quot; --dataset &quot;centos6:0.1.0&quot;
{
   &quot;id&quot;: &quot;4321d746-5df0-4e53-9178-d9390e507c17&quot;,
   &quot;name&quot;: &quot;5177256&quot;,
   &quot;type&quot;: &quot;virtualmachine&quot;,
   &quot;state&quot;: &quot;provisioning&quot;,
   &quot;dataset&quot;: &quot;sdc:sdc:centos6:0.1.0&quot;,
   &quot;ips&quot;: [
   &quot;211.78.245.129&quot;
   ],
   &quot;memory&quot;: 1024,
   &quot;disk&quot;: 15360,
   &quot;metadata&quot;: {
   &quot;root_authorized_keys&quot;: &quot;......&quot;
   },
   &quot;created&quot;: &quot;2012-11-20T10:25:54+00:00&quot;,
   &quot;updated&quot;: &quot;2012-11-20T10:25:54+00:00&quot;,
   &quot;primaryIp&quot;: &quot;211.78.245.129&quot;
}</code></pre>
<h2>常用功能:建立機器並指定user-s cript</h2>
<p>使用 MiCloud 時，第一次開啟 CentOS 並安裝軟體，你可能會注意到自動選擇的 mirror site 常常覺得 cn 離它比較接近。而開 Debian 時，預設似乎是抓到 us 的 mirror site。所以每次新建機器後，變更 repo mirror site 成為一個必要的例行工作。您可能曾在 MiCloud 的 wiki 到過這篇 <a href="html/CentOS+mirror+site.html">CentOS mirror site</a> 教你如何把 yum 的 mirror site 換到國網中心。</p>
<p>對 IaaS 最迷人之處是：用 API 能搞定一切！所以，我們就換個角度，不應該手工地事後補救。我們可以事前指定要執行的s cript 。這功能幾乎是 IaaS Provider 都有支援的功能，指定開機時執行下列s cript ：</p>
<pre><code>[qrtt1@localhost ~]$ cat change_yum.sh
yum_cfg=https://raw.github.com/gist/4109252/2899290f3749bb7ce4a5a6934757512d9b980523/yum.base.cfg
curl $yum_cfg &gt; /etc/yum.repos.d/CentOS-Base.repo</code></pre>
<p>機器時，加上 --s cript參數：</p>
<pre><code>[qrtt1@localhost ~]$ sdc-createmachine --package &quot;S 1GB RAM (1CORE)&quot; --dataset &quot;centos6:0.1.0&quot; -- s cript change_yum.sh
{
   &quot;id&quot;: &quot;e743dde0-3005-41fd-9848-07a114e9819c&quot;,
   &quot;name&quot;: &quot;a2bc32d&quot;,
   &quot;type&quot;: &quot;virtualmachine&quot;,
   &quot;state&quot;: &quot;provisioning&quot;,
   &quot;dataset&quot;: &quot;sdc:sdc:centos6:0.1.0&quot;,
   &quot;ips&quot;: [
   &quot;211.78.245.180&quot;
   ],
   &quot;memory&quot;: 1024,
   &quot;disk&quot;: 15360,
   &quot;metadata&quot;: {
   &quot;user-s cript&quot;: &quot;yum_cfg=https://raw.github.com/gist/4109252/2899290f3749bb7ce4a5a6934757512d9b980523/yum.base.cfg\ncurl $yum_cfg &gt; /etc/yum.repos.d/CentOS-Base.repo\n,
   &quot;root_authorized_keys&quot;: &quot;...&quot;
   },
   &quot;created&quot;: &quot;2012-11-22T14:46:37+00:00&quot;,
   &quot;updated&quot;: &quot;2012-11-22T14:46:37+00:00&quot;,
   &quot;primaryIp&quot;: &quot;211.78.245.180&quot;
}</code></pre>
<h2>常用功能：查詢機器狀態</h2>
<p>查詢機器狀態很直覺得要用 sdc-listmachines 指令，但對我來說比較關心的是我用了多久，也就是機器的 age。sdc-listmachines 會列出 json array：</p>
<pre><code>[qrtt1@localhost ~]$ sdc-listmachines
[
 {
   &quot;id&quot;: &quot;2b36ed3a-6388-43d0-bcfe-446056952f3b&quot;,
   &quot;type&quot;: &quot;virtualmachine&quot;,
   &quot;state&quot;: &quot;running&quot;,
   &quot;dataset&quot;: &quot;sdc:sdc:centos6:0.1.0&quot;,
   &quot;ips&quot;: [
   &quot;211.78.245.129&quot;
   ],
   &quot;memory&quot;: 1024,
   &quot;disk&quot;: 15360,
   &quot;metadata&quot;: {
   &quot;root_authorized_keys&quot;: &quot;...&quot;
   },
   &quot;created&quot;: &quot;2012-11-20T13:50:29+00:00&quot;,
   &quot;updated&quot;: &quot;2012-11-20T13:50:39+00:00&quot;,
   &quot;primaryIp&quot;: &quot;211.78.245.129&quot;
 }
]</code></pre>
<p>我們能利用一開始安裝的 jsontool，直接查出建立時間（查詢 array index 0 的 created 欄位）：</p>
<pre><code>[qrtt1@localhost ~]$ sdc-listmachines |json 0.created
2012-11-20T13:50:29+00:00</code></pre>
<p>查詢到建立時間就離取得機器的 age 不遠了！javas cript 直接支援解釋 ISO 8601 Date String，我們能寫個簡單的 s cript 換算：</p>
<pre><code>[qrtt1@localhost ~]$ cat age.js
#!/usr/bin/env node

var d = new Date(process.argv[process.argv.length-1]);
var time = ((new Date()-d) / 1000) / 60;
console.log(Math.round(time));</code></pre>
<p>配合 jsontool 執行結果如下：</p>
<pre><code>[qrtt1@localhost ~]$ sdc-listmachines | json 0.created | xargs ./age.js
23</code></pre>
<p>心得：如果能直接在 response 有 age 是最好，省得使用者要自己算。</p>
<h2>常用功能:撤銷機器</h2>
<p>MiCloud 的計價結束時間點是在刪除機後才記錄的，而機器要能被刪除必需是關機的狀態。所以，完整的撤銷機器步驟為：</p>
<ul>
<li>關閉機器，使用 sdc-stopmachine 指令</li>
<li>刪除機器，使用 sdc-deletemachine 指令</li>
</ul>
<p>接續在上一步學習使用到的 jsontool，我們能下達關機與刪除：</p>
<pre><code>sdc-listmachines | json 0.id | xargs sdc-stopmachine
sdc-listmachines | json 0.id | xargs sdc-deletemachine</code></pre>
<h2>附錄：Node.js RPMs</h2>
<p>由於 MiCloud 目前使用的 Cloud API 需要使用 Node.js。這通常得自己編譯，除了版本與現行最新版的差距外，另一個問題是它通常不在 Linux 主要的 software repo 內。我以我們單位主要用到的 CentOS 5 與 CentOS 6 打包了二組 RPMs。當然，我不是專業的 packager 只求能「動」就好。若你想要改變內容，也有 source rpm 版本可供下載：</p>
<pre><code>http://s3-ap-southeast-1.amazonaws.com/qrtt1.software/rpms/nodejs-0.6.8-1.el5.src.rpm
http://s3-ap-southeast-1.amazonaws.com/qrtt1.software/rpms/nodejs-0.6.8-1.el6.src.rpm</code></pre>
<pre><code>http://s3-ap-southeast-1.amazonaws.com/qrtt1.software/rpms/nodejs-0.6.8-1.el5.x86_64.rpm
http://s3-ap-southeast-1.amazonaws.com/qrtt1.software/rpms/nodejs-0.6.8-1.el6.x86_64.rpm</code></pre>
<h2>附錄：Java API</h2>
<p>由於我們單位的程式多半是以 Java 實作的，所以實作 Java 版的 API。目前只實作會用到的功能，但它是很容易擴充的，若是有需要額外的功能就 fork 專案去加唄。網址如下：<a href="https://github.com/qrtt1/joyent.cloudapi"><a href="https://github.com/qrtt1/joyent.cloudapi">https://github.com/qrtt1/joyent.cloudapi</a></a></p>
<hr>
<p>轉載自:</p>
<ul>
<li><a href="https://github.com/qrtt1/joyent.cloudapi/blob/master/MiCloud.Notes.zh_tw.md#%E5%B8%B8%E7%94%A8%E5%8A%9F%E8%83%BD%EF%BC%9A%E5%BB%BA%E7%AB%8B%E6%96%B0%E6%A9%9F%E5%99%A8">Github MiCloud.Notes.zh_tw.md</a></li>
</ul>
</p><hr style="border-top: 1px dotted #f00;"/><p  id="Main.md"><h1><img width="50px" src="images/book.png"/>頁面：<a href="html/Main.html">回首頁</a>&nbsp;<a href="index.html?page=Main.md">(Main.md)</a><a href="#Main.md"></a></h1><br/><h1>歡迎使用</h1>
<p>歡迎使用MiCloud Wiki，我們將在此分享MiCloud的相關說明文件。</p>
<h2>我們的特色</h2>
<ul>
<li>MiCloud SmartMachines為優質虛擬環境，能快速建置資料庫與應用系統，提供比傳統的虛擬機更高的利用率與性能比。</li>
<li>SmartMachines擁有更動態CPU配置、搭配高效能Storage I/O處理能彈性有效率的執行任務。</li>
<li>大規模可伸縮的架構下，MiCloud SmartMachines將可支援數以萬計的用戶安心使用。</li>
</ul>
<h2>MiCloud採用作業系統虛擬化技術</h2>
<p>相較於一般所稱呼的「虛擬主機(Virtual Machines ) 」，以「SmartMachines」形容新型態的雲端平台服務。以SmartMachines為虛擬化運算平台，能夠運行多元雲端應用。在MiCloud上，我們提供市面上廣泛使用的三種作業系統：</p>
<ul>
<li>Linux：CentOS, Debian, Fedora, Ubuntu等主機</li>
<li>Windows：Windwos 2008 R2 Enterprise/Standard</li>
<li>SmartOS：Standard, Preload Services.</li>
</ul>
<p>如有其他建議，或需要我們改進的地方，請隨時連絡我們！</p>
<p><img src='images/Main-p1.png' width='650'  align='center'/></p>
<p>MiCloud客服信箱：<a href="mailto:service@micloud.tw">service@micloud.tw</a></p>
</p><hr style="border-top: 1px dotted #f00;"/>
  </div>
  </div>
  </body>
</html>